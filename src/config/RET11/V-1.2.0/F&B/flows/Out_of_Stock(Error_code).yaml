meta:
  domain: ONDC:RET11
  version: 1.2.0
  flowId: Out_of_Stock(Error_code)
transaction_data:
  transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
  latest_timestamp: '1970-01-01T00:00:00.000Z'
  bap_id: sample-bap-id
  bap_uri: https://bap.example.com
  bpp_id: sample-bpp-id
  bpp_uri: https://bpp.example.com
steps:
  - api: select
    action_id: select0
    owner: BAP
    responseFor: null
    unsolicited: false
    description: First Select where items are selected
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBpbnB1dHMgPSBzZXNzaW9uRGF0YS51c2VyX2lucHV0czsKICBpZiAoIWlucHV0cykgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwogIGlmIChpbnB1dHMucHJvdmlkZXIpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIuaWQgPSBpbnB1dHMucHJvdmlkZXI7CiAgfQogIGlmIChpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24gJiYgQXJyYXkuaXNBcnJheShpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24pKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmxvY2F0aW9ucyA9CiAgICAgIGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbi5tYXAoKGxvY2F0aW9uKSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBsb2NhdGlvbiwKICAgICAgICB9OwogICAgICB9KTsKICB9IGVsc2UgaWYgKAogICAgaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uICYmCiAgICB0eXBlb2YgaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uID09PSAic3RyaW5nIgogICkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlci5sb2NhdGlvbnMgPSBbCiAgICAgIHsKICAgICAgICBpZDogaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uLAogICAgICB9LAogICAgXTsKICB9CiAgaWYgKGlucHV0cy5sb2NhdGlvbl9ncHMpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmVuZC5sb2NhdGlvbi5ncHMgPQogICAgICBpbnB1dHMubG9jYXRpb25fZ3BzOwogIH0KICBpZiAoaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5lbmQubG9jYXRpb24uYWRkcmVzcy5hcmVhX2NvZGUgPQogICAgICBpbnB1dHMubG9jYXRpb25fcGluX2NvZGU7CiAgICBkZWZhdWx0UGF5bG9hZC5jb250ZXh0LmNpdHkgPSBzZXNzaW9uRGF0YS51c2VyX2lucHV0cz8uY2l0eV9jb2RlID8/ICJzdGQ6MDgwIjsKICB9CgogIGZ1bmN0aW9uIGJ1aWxkQ3VzdG9taXNhdGlvblRvR3JvdXBNYXAoZGVmYXVsdFBheWxvYWQpIHsKICAgIGNvbnN0IG1hcCA9IHt9OwogICAgY29uc3QgaXRlbXMgPSBkZWZhdWx0UGF5bG9hZD8ubWVzc2FnZT8ub3JkZXI/Lml0ZW1zIHx8IFtdOwoKICAgIGNvbnNvbGUubG9nKCJbTUFQXSBUb3RhbCBvcmRlciBpdGVtczoiLCBpdGVtcy5sZW5ndGgpOwogICAgY29uc29sZS5sb2coIltNQVBdIEFsbCBpdGVtczoiLCBKU09OLnN0cmluZ2lmeShpdGVtcywgbnVsbCwgMikpOwoKICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgY29uc29sZS5sb2coIlxuW01BUF0gSW5zcGVjdGluZyBpdGVtOiIsIGl0ZW0uaWQpOwoKICAgICAgY29uc3QgdHlwZVRhZyA9IGl0ZW0/LnRhZ3M/LmZpbmQoKHQpID0+IHQuY29kZSA9PT0gInR5cGUiKTsKICAgICAgY29uc3QgdHlwZVZhbHVlID0gdHlwZVRhZz8ubGlzdD8uZmluZCgKICAgICAgICAobCkgPT4gbC5jb2RlID09PSAidHlwZSIKICAgICAgKT8udmFsdWU7CgogICAgICBjb25zb2xlLmxvZygiW01BUF0gSXRlbSB0eXBlOiIsIHR5cGVWYWx1ZSk7CgogICAgICBpZiAodHlwZVZhbHVlICE9PSAiY3VzdG9taXphdGlvbiIpIHsKICAgICAgICBjb25zb2xlLmxvZygiW01BUF0gU2tpcHBlZCAobm90IGN1c3RvbWl6YXRpb24pIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBGaW5kIHRoZSBwYXJlbnQgdGFnIHRvIGdldCB0aGUgZ3JvdXAgSUQKICAgICAgY29uc3QgcGFyZW50VGFnID0gaXRlbT8udGFncz8uZmluZCgodCkgPT4gdC5jb2RlID09PSAicGFyZW50Iik7CiAgICAgIGNvbnN0IGdyb3VwSWQgPSBwYXJlbnRUYWc/Lmxpc3Q/LmZpbmQoKGwpID0+IGwuY29kZSA9PT0gImlkIik/LnZhbHVlOwoKICAgICAgaWYgKGdyb3VwSWQpIHsKICAgICAgICBtYXBbaXRlbS5pZF0gPSBncm91cElkOwogICAgICAgIGNvbnNvbGUubG9nKGBbTUFQXSBNYXBwZWQgY3VzdG9taXphdGlvbiAke2l0ZW0uaWR9IC0+IGdyb3VwICR7Z3JvdXBJZH1gKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZyhgW01BUF0gV2FybmluZzogTm8gZ3JvdXAgSUQgZm91bmQgZm9yIGN1c3RvbWl6YXRpb24gJHtpdGVtLmlkfWApOwogICAgICB9CiAgICB9KTsKCiAgICBjb25zb2xlLmxvZygiXG5bTUFQXSBGaW5hbCBjdXN0b21pemF0aW9uIHRvIGdyb3VwIG1hcDoiLCBKU09OLnN0cmluZ2lmeShtYXAsIG51bGwsIDIpKTsKICAgIHJldHVybiBtYXA7CiAgfQoKICBjb25zdCBjdXN0b21pc2F0aW9uR3JvdXBNYXAgPSBidWlsZEN1c3RvbWlzYXRpb25Ub0dyb3VwTWFwKGRlZmF1bHRQYXlsb2FkKTsKCgogIGlmIChpbnB1dHM/Lml0ZW1zKSB7CiAgICBsZXQgbmV3SXRlbXMgPSBbXTsKICAgIGxldCBhbGxJdGVtcyA9IGlucHV0cy5pdGVtczsKCiAgICBhbGxJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICBjb25zdCBwYXJlbnRJdGVtSWQgPSBgUCR7aW5kZXh9YDsKICAgICAgbmV3SXRlbXMucHVzaCh7CiAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgcGFyZW50X2l0ZW1faWQ6IHBhcmVudEl0ZW1JZCwKICAgICAgICBsb2NhdGlvbl9pZDogaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uLAogICAgICAgIHF1YW50aXR5OiB7IGNvdW50OiAxIH0sCiAgICAgICAgdGFnczogWwogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICB2YWx1ZTogIml0ZW0iLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH0pOwoKICAgICAgaXRlbT8uY3VzdG9taXNhdGlvbnM/LmZvckVhY2goKGN1c3RvbWlzYXRpb24pID0+IHsKCiAgICAgICAgbGV0IGdyb3VwSWQ7CgogICAgICAgIGlmIChpdGVtLnJlbGF0aW9uICYmIGl0ZW0ucmVsYXRpb25bY3VzdG9taXNhdGlvbl0pIHsKICAgICAgICAgIGdyb3VwSWQgPSBpdGVtLnJlbGF0aW9uW2N1c3RvbWlzYXRpb25dOwogICAgICAgICAgbmV3SXRlbXMucHVzaCh7CiAgICAgICAgICAgIGlkOiBjdXN0b21pc2F0aW9uLAogICAgICAgICAgICBwYXJlbnRfaXRlbV9pZDogcGFyZW50SXRlbUlkLAogICAgICAgICAgICBsb2NhdGlvbl9pZDogaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uLAogICAgICAgICAgICBxdWFudGl0eTogeyBjb3VudDogMSB9LAogICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiY3VzdG9taXphdGlvbiIsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29kZTogInBhcmVudCIsCiAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb2RlOiAiaWQiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBncm91cElkLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdLAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGN1c3RvbWlzYXRpb25JZCA9IGN1c3RvbWlzYXRpb24uY3VzdG9taXNhdGlvbklkOwogICAgICAgICAgZ3JvdXBJZCA9IGN1c3RvbWlzYXRpb25Hcm91cE1hcFtjdXN0b21pc2F0aW9uSWRdOwogICAgICAgICAgbmV3SXRlbXMucHVzaCh7CiAgICAgICAgICAgIGlkOiBjdXN0b21pc2F0aW9uSWQsCiAgICAgICAgICAgIHBhcmVudF9pdGVtX2lkOiBwYXJlbnRJdGVtSWQsCiAgICAgICAgICAgIGxvY2F0aW9uX2lkOiBpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24sCiAgICAgICAgICAgIHF1YW50aXR5OiB7IGNvdW50OiAxIH0sCiAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb2RlOiAicGFyZW50IiwKICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGNvZGU6ICJpZCIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGdyb3VwSWQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICB9KTsKICAgICAgICB9CgoKICAgICAgfSk7CiAgICB9KTsKCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gbmV3SXRlbXM7CiAgfQoKICBjb25zdCBpbnB1dEtleXMgPSBPYmplY3Qua2V5cyhpbnB1dHMpOwogIGNvbnN0IG9mZmVycyA9IGlucHV0S2V5cy5maWx0ZXIoKGspID0+IGsuc3RhcnRzV2l0aCgib2ZmZXJzXyIpKTsKICBpZiAob2ZmZXJzLmxlbmd0aCA+IDApIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIub2ZmZXJzID0gb2ZmZXJzCiAgICAgIC5maWx0ZXIoKG9mZmVyKSA9PiBpbnB1dHNbb2ZmZXJdICE9PSBmYWxzZSAmJiBpbnB1dHNbb2ZmZXJdICE9PSBudWxsKQogICAgICAubWFwKChvZmZlcikgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZDogb2ZmZXIucmVwbGFjZSgib2ZmZXJzXyIsICIiKSwKICAgICAgICAgIC8vIHRhZ3M6IFsKICAgICAgICAgIC8vIAl7CiAgICAgICAgICAvLyAJCWNvZGU6ICJzZWxlY3Rpb24iLAogICAgICAgICAgLy8gCQlsaXN0OiBbCiAgICAgICAgICAvLyAJCQl7CiAgICAgICAgICAvLyAJCQkJY29kZTogImFwcGx5IiwKICAgICAgICAgIC8vIAkJCQl2YWx1ZTogInllcyIsCiAgICAgICAgICAvLyAJCQl9LAogICAgICAgICAgLy8gCQldLAogICAgICAgICAgLy8gCX0sCiAgICAgICAgICAvLyBdLAogICAgICAgIH07CiAgICAgIH0pOwogIH0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: select
          timestamp: '2025-12-29T06:22:03.809Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: befae42f-ac37-41e9-90ae-a33ec945bcf3
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                location_id: L1
            fulfillments:
              - end:
                  location:
                    gps: 19.131140,72.834091
                    address:
                      area_code: '400053'
      saveData:
        bapId: $.context.bap_id
        message_id: $.context.message_id
        selected_items: $.message.order.items[*]
        payload_city: $.context.city
        selected_fulfillments: $.message.order.fulfillments[*]
        selected_offers: $.message.order.offers[*]
        provider: $.message.order.provider
        RET11Catalog: >-
          EVAL#ZnVuY3Rpb24gZ2V0U2F2ZShlKXtyZXR1cm57Y2F0YWxvZzp7ImJwcC9mdWxmaWxsbWVudHMiOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSJ9LHtpZDoiRjIiLHR5cGU6IlNlbGYtUGlja3VwIn0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5In0sXSwiYnBwL2Rlc2NyaXB0b3IiOntuYW1lOiJNb2NrIFNlbGxlciBOUCIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIixzaG9ydF9kZXNjOiJTZWxsZXIgTWFya2V0cGxhY2UiLGxvbmdfZGVzYzoiU2VsbGVyIE1hcmtldHBsYWNlIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIl0sdGFnczpbe2NvZGU6ImJwcF90ZXJtcyIsbGlzdDpbe2NvZGU6Im5wX3R5cGUiLHZhbHVlOiJNU04ifSxdfSxdfSwiYnBwL3Byb3ZpZGVycyI6W3t0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiJ9LHJhdGluZzoiNCIsZGVzY3JpcHRvcjp7bmFtZToiU3RvcmUgMSIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyIsc2hvcnRfZGVzYzoiU3RvcmUgMSIsbG9uZ19kZXNjOiJTdG9yZSAxIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyJdfSx0dGw6IlAxRCIsbG9jYXRpb25zOlt7aWQ6IkwxIix0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiIsZGF5czoiMSwyLDMsNCw1LDYsNyIsc2NoZWR1bGU6e2hvbGlkYXlzOltdfSxyYW5nZTp7c3RhcnQ6IjAwMDAiLGVuZDoiMjM1OSJ9fSxncHM6IjE5LjEyOTA3Niw3Mi44MjU4MDMiLGFkZHJlc3M6e3N0cmVldDoiMSAmIDIsQU1BUiBKWU9USSBDSFMuQkxERy4sT1BQLk5BTkQgS1JJUEEgSEFMTCIsbG9jYWxpdHk6IkFOREhFUkkgRk9VUiBCVU5HTE9XIEFNQVIgSllPVEkgQ0hTIixjaXR5OiJtb2NrLXNlbGxlci1jaXR5IixzdGF0ZToibW9jay1zdGF0ZSIsYXJlYV9jb2RlOiI0MDAwNTMifSxjaXJjbGU6e2dwczoiMTkuMTI5MDc2LDcyLjgyNTgwMyIscmFkaXVzOnt1bml0OiJrbSIsdmFsdWU6IjMifX19LF0sZnVsZmlsbG1lbnRzOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM3MTAiLGVtYWlsOiJub2JvZHlAbm9tYWlsLmNvbSJ9fSx7aWQ6IkYyIix0eXBlOiJTZWxmLVBpY2t1cCIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM5OTkiLGVtYWlsOiJtb2NrQG5vbWFpbC5jb20ifX0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5Iixjb250YWN0OntwaG9uZToiOTU5NDY2Mzg4OCIsZW1haWw6Im1vY2syQG5vbWFpbC5jb20ifX0sXSxpdGVtczpbe2Rlc2NyaXB0b3I6e25hbWU6IlBsYWluIEF0dGEiLGNvZGU6IjE6OTc4MDIwMTM3OTYyIixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjQuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIyMDAuMDAiLG1heGltdW1fdmFsdWU6IjIwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiIzIn19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkxIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiUGxhaW4gQXR0YSIsY29kZToiMTo0NzQxMzE4MTkxODk0IixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjMuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIzMDAuMDAiLG1heGltdW1fdmFsdWU6IjMwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiI1In19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkyIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiQWxwaGFuc28gTWFuZ28iLGNvZGU6IjE6NzM5NjM3Mzk3NTk1NyIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIixzaG9ydF9kZXNjOiJBbHBoYW5zbyIsbG9uZ19kZXNjOiJBbHBoYW5zbyBNYW5nbyBmcmVzaGx5IGhhbmQgcGlja2VkIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIl19LHJhdGluZzoiMy4wIixwcmljZTp7Y3VycmVuY3k6IklOUiIsdmFsdWU6IjI1MC4wMCIsbWF4aW11bV92YWx1ZToiMjUwLjAwIn0scXVhbnRpdHk6e3VuaXRpemVkOnttZWFzdXJlOnt1bml0OiJraWxvZ3JhbSIsdmFsdWU6IjEifX0sYXZhaWxhYmxlOntjb3VudDoiOTkifSxtYXhpbXVtOntjb3VudDoiOTkifX0sY2F0ZWdvcnlfaWQ6IkZydWl0cyBhbmQgVmVnZXRhYmxlcyIsZnVsZmlsbG1lbnRfaWQ6IkYxIixsb2NhdGlvbl9pZDoiTDEiLCJAb25kYy9vcmcvcmV0dXJuYWJsZSI6ITEsIkBvbmRjL29yZy9jYW5jZWxsYWJsZSI6ITEsIkBvbmRjL29yZy9yZXR1cm5fd2luZG93IjoiUDFEIiwiQG9uZGMvb3JnL3NlbGxlcl9waWNrdXBfcmV0dXJuIjohMSwiQG9uZGMvb3JnL3RpbWVfdG9fc2hpcCI6IlBUNU0iLCJAb25kYy9vcmcvYXZhaWxhYmxlX29uX2NvZCI6ITAsIkBvbmRjL29yZy9jb250YWN0X2RldGFpbHNfY29uc3VtZXJfY2FyZSI6IlJhbWVzaCxyYW1lc2hAYWJjLmNvbSwxODAwNDI1NDQ0NCIsdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkzIn0sXSx0YWdzOlt7Y29kZToidGltaW5nIixsaXN0Olt7Y29kZToidHlwZSIsdmFsdWU6IkFsbCJ9LHtjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImRheV9mcm9tIix2YWx1ZToiMSJ9LHtjb2RlOiJkYXlfdG8iLHZhbHVlOiI3In0se2NvZGU6InRpbWVfZnJvbSIsdmFsdWU6IjAwMDAifSx7Y29kZToidGltZV90byIsdmFsdWU6IjIzNTkifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiQXR0YSwgRmxvdXJzIGFuZCBTb29qaSJ9LHtjb2RlOiJ0eXBlIix2YWx1ZToiMTEifSx7Y29kZToidW5pdCIsdmFsdWU6InBpbmNvZGUifSx7Y29kZToidmFsIix2YWx1ZToiNTYwMDAxLTU2MDA3Niw1NjAwODMifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiRnJ1aXRzIGFuZCBWZWdldGFibGVzIn0se2NvZGU6InR5cGUiLHZhbHVlOiIxMCJ9LHtjb2RlOiJ2YWwiLHZhbHVlOiIzIn0se2NvZGU6InVuaXQiLHZhbHVlOiJrbSJ9LF19LF0sY2F0ZWdvcmllczpbe2lkOiJWMSIsdGFnczpbe2NvZGU6InR5cGUiLGxpc3Q6W3tjb2RlOiJ0eXBlIix2YWx1ZToidmFyaWFudF9ncm91cCJ9LF19LHtjb2RlOiJhdHRyIixsaXN0Olt7Y29kZToibmFtZSIsdmFsdWU6Iml0ZW0ucXVhbnRpdHkudW5pdGl6ZWQubWVhc3VyZSJ9LHtjb2RlOiJzZXEiLHZhbHVlOiIxIn0sXX0sXSxkZXNjcmlwdG9yOntuYW1lOiJQbGFpbiBBdHRhIn19LF0saWQ6IlAxIixvZmZlcnM6W3tpZDoiRkxBVDUwIixkZXNjcmlwdG9yOntjb2RlOiJkaXNjb3VudCIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL29mZmVyMi1iYW5uZXIucG5nIl19LGxvY2F0aW9uX2lkczpbIkwxIl0saXRlbV9pZHM6WyJJMSIsIkkyIiwiSTMiXSx0aW1lOntsYWJlbDoidmFsaWQiLHJhbmdlOntzdGFydDoiMjAyNC0xMi0yM1QwNjo1NTo0NS4wMzVaIixlbmQ6IjIwMzAtMTItMjNUMDg6MTI6MTUuMDMzWiJ9fSx0YWdzOlt7Y29kZToicXVhbGlmaWVyIixsaXN0Olt7Y29kZToibWluX3ZhbHVlIix2YWx1ZToiMTAwLjAwIn0sXX0se2NvZGU6ImJlbmVmaXQiLGxpc3Q6W3tjb2RlOiJ2YWx1ZV90eXBlIix2YWx1ZToiYW1vdW50In0se2NvZGU6InZhbHVlIix2YWx1ZToiLTUwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LHtpZDoiYnV5MmdldDMiLGRlc2NyaXB0b3I6e2NvZGU6ImJ1eVhnZXRZIixpbWFnZXM6WyJodHRwczovL3NucC5jb20vaW1hZ2VzL29mZmVyMS1iYW5uZXIud2VicCJdfSxsb2NhdGlvbl9pZHM6WyJMMSJdLGNhdGVnb3J5X2lkczpbXSxpdGVtX2lkczpbIkkxIiwiSTIiLCJJMyJdLHRpbWU6e2xhYmVsOiJ2YWxpZCIscmFuZ2U6e3N0YXJ0OiIyMDI1LTAxLTAxVDE2OjAwOjAwLjAwMFoiLGVuZDoiMjAzMC0wMS0wMVQyMzowMDowMC4wMDBaIn19LHRhZ3M6W3tjb2RlOiJxdWFsaWZpZXIiLGxpc3Q6W3tjb2RlOiJpdGVtX2NvdW50Iix2YWx1ZToiMiJ9LF19LHtjb2RlOiJiZW5lZml0IixsaXN0Olt7Y29kZToiaXRlbV9jb3VudCIsdmFsdWU6IjEifSx7Y29kZToiaXRlbV9pZCIsdmFsdWU6IkkyIn0se2NvZGU6Iml0ZW1fdmFsdWUiLHZhbHVlOiIwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LF19LF19fX0=
      inputs:
        id: ret11_nestedSelect
        jsonSchema:
          $schema: http://json-schema.org/draft-07/schema#
          type: object
          properties:
            city_code:
              type: string
              default: std:011
            provider:
              type: string
              default: P1
            provider_location:
              type: string
              default: L1
            location_gps:
              type: string
              default: 19.129076,72.825803
            location_pin_code:
              type: string
              default: '400053'
            items:
              type: array
              default: []
              items:
                type: object
                properties:
                  id:
                    type: string
                    default: I1
                  quantity:
                    type: number
                    default: 1
                  location:
                    type: string
                    default: L1
                  customisations:
                    type: array
                    default:
                      - customisationId: C1
                      - customisationId: C7
                      - customisationId: C14
                    items:
                      type: object
                      properties:
                        customisationId:
                          type: string
                          default: C1
                      required:
                        - customisationId
                additionalProperties: true
                default: {}
          additionalProperties: true
          default: {}
  - api: on_select
    action_id: on_select_out_of_stock
    owner: BPP
    responseFor: select0
    unsolicited: false
    description: On-select response to select
    mock:
      generate: >-
        Cgpjb25zdCBicmVha3VwSXRlbSA9IHsKICAiQG9uZGMvb3JnL2l0ZW1faWQiOiAiSTEiLAogICJAb25kYy9vcmcvaXRlbV9xdWFudGl0eSI6IHsKICAgIGNvdW50OiAxLAogIH0sCiAgdGl0bGU6ICJQbGFpbiBBdHRhIiwKICAiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAiaXRlbSIsCiAgcHJpY2U6IHsKICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgIHZhbHVlOiAiMTAwLjAwIiwKICB9LAogIGl0ZW06IHsKICAgIHF1YW50aXR5OiB7CiAgICAgIGF2YWlsYWJsZTogewogICAgICAgIGNvdW50OiAiOTkiLAogICAgICB9LAogICAgICBtYXhpbXVtOiB7CiAgICAgICAgY291bnQ6ICI5OSIsCiAgICAgIH0sCiAgICB9LAogICAgcHJpY2U6IHsKICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICB2YWx1ZTogIjEwMC4wMCIsCiAgICB9LAogIH0sCn07Cgpjb25zdCBicmVha3VwID0gWwogIHsKICAgICJAb25kYy9vcmcvaXRlbV9pZCI6ICJGMSIsCiAgICB0aXRsZTogIkRlbGl2ZXJ5IGNoYXJnZXMiLAogICAgIkBvbmRjL29yZy90aXRsZV90eXBlIjogImRlbGl2ZXJ5IiwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6ICIwMC4wMCIsCiAgICB9LAogIH0sCiAgewogICAgIkBvbmRjL29yZy9pdGVtX2lkIjogIkYxIiwKICAgIHRpdGxlOiAiQ29udmVuaWVuY2UgRmVlIiwKICAgICJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJtaXNjIiwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6ICIwMC4wMCIsCiAgICB9LAogIH0sCl07CmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWNvbnN0IGlucHV0cyA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzOwoJaWYgKCFpbnB1dHMpIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKCWNvbnN0IHNlbGVjdGVkSXRlbXNPYmogPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtczsKCWNvbnNvbGUubG9nKCJzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtczoiLCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyk7CglpZiAoc2Vzc2lvbkRhdGE/LnByb3ZpZGVyKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwoJfQoJbGV0IG9vc0l0bVBhcmVudEl0ZW1JZCA9IHNlc3Npb25EYXRhPy5zZWxlY3RlZF9pdGVtcz8uZmluZCgKICAgIChpdGVtKSA9PiBpdGVtLmlkID09PSBpbnB1dHM/Lm9vc19pdGVtCiAgKS5wYXJlbnRfaXRlbV9pZDsKCWNvbnN0IHRlbXBJdGVtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMpKTsKCWlmIChzZXNzaW9uRGF0YT8uc2VsZWN0ZWRfaXRlbXMgJiYgc2Vzc2lvbkRhdGE/LnNlbGVjdGVkX2Z1bGZpbGxtZW50cz8ubGVuZ3RoKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHRlbXBJdGVtcy5tYXAoKGl0ZW0pID0+IHsKCQkJZGVsZXRlIGl0ZW0ucXVhbnRpdHk7CgkJCXJldHVybiB7CgkJCQkuLi5pdGVtLAoJCQkJZnVsZmlsbG1lbnRfaWQ6IGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzPy5maW5kKAoJCQkJCShmdWxmaWxsbWVudCkgPT4gZnVsZmlsbG1lbnQudHlwZSA9PT0gIkRlbGl2ZXJ5IgoJCQkJKT8uaWQsCgkJCX07CgkJfSk7Cgl9CgoJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IGJ1aWxkUmV0YWlsUXVvdGUoCgkJc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMsCgkJb25fc2VhcmNoX2l0ZW1zLAoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCgkpOwoJY29uc3QgYnJlYWt1cCA9IGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUuYnJlYWt1cCB8fCBbXTsKCWJyZWFrdXAuZm9yRWFjaCgoYikgPT4gewoJCWlmICghYi5pdGVtKSB7CgkJCWIuaXRlbSA9IHt9OwoJCX0KCgkJaWYgKCFiLml0ZW0ucXVhbnRpdHkpIHsKCQkJYi5pdGVtLnF1YW50aXR5ID0gewoJCQlhdmFpbGFibGU6IHsgY291bnQ6ICIwIiB9LAoJCQltYXhpbXVtOiB7IGNvdW50OiAiMCIgfQoJCQl9OwoJCX0KCgkJaWYgKCFiLml0ZW0ucHJpY2UpIHsKCQkJYi5pdGVtLnByaWNlID0gewoJCQljdXJyZW5jeTogKGIucHJpY2UgJiYgYi5wcmljZS5jdXJyZW5jeSkgfHwgIklOUiIsCgkJCXZhbHVlOiAoYi5wcmljZSAmJiBiLnByaWNlLnZhbHVlKSB8fCAiMC4wMCIKCQkJfTsKCQl9Cgl9KTsKCgljb25zdCBlcnJvck1zZyA9IFsKCQl7CgkJCWR5bmFtaWNfaXRlbV9pZDogb29zSXRtUGFyZW50SXRlbUlkLAoJCQlpdGVtX2lkOiBpbnB1dHM/Lm9vc19pdGVtLAoJCQllcnJvcjogIjQwMDAwMiIsCgkJfSwKCV07CglkZWZhdWx0UGF5bG9hZC5lcnJvciA9IHsKCQl0eXBlOiAiRE9NQUlOLUVSUk9SIiwKCQljb2RlOiAiNDAwMDIiLAoJCW1lc3NhZ2U6IEpTT04uc3RyaW5naWZ5KGVycm9yTXNnKSwKCX07CgoJcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9Cg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        ZnVuY3Rpb24gbWVldFJlcXVpcmVtZW50cyhzZXNzaW9uRGF0YSl7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZXMgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_select
          timestamp: '2025-12-29T06:44:41.277Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 001f9ecd-fbe0-43da-987e-6db9f5003db6
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - fulfillment_id: F1
                id: I1
            fulfillments:
              - id: F1
                type: Delivery
                '@ondc/org/provider_name': LSP or Provider Name
                tracking: false
                '@ondc/org/category': Immediate Delivery
                '@ondc/org/TAT': PT60M
                state:
                  descriptor:
                    code: Serviceable
            quote:
              price:
                currency: INR
                value: '0.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 0
                  title: Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    quantity:
                      available:
                        count: '0'
                      maximum:
                        count: '0'
                    price:
                      currency: INR
                      value: '170.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '0.00'
              ttl: P1D
        error:
          type: DOMAIN-ERROR
          code: '40002'
          message: Item out of stock
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        on_select_fulfillments: $.message.order.fulfillments[*]
        on_select_items: $.message.order.items[*]
        tat: $.message.order.fulfillments[0]["@ondc/org/TAT"]
        out_of_stock_item_ids: >-
          $.message.order.quote.breakup[?(@.item.quantity.available.count ==
          '0')]['@ondc/org/item_id']
      inputs:
        id: ExampleInputId
        jsonSchema:
          $schema: http://json-schema.org/draft-07/schema#
          type: object
          properties:
            oos_item:
              type: string
              default: I1
          additionalProperties: true
          default: {}
  - api: select
    action_id: select
    owner: BAP
    responseFor: null
    unsolicited: false
    description: First Select where items are selected
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKCWNvbnN0IGlucHV0cyA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzOwoJaWYgKCFpbnB1dHMpIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKCWlmIChpbnB1dHMucHJvdmlkZXIpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmlkID0gaW5wdXRzLnByb3ZpZGVyOwoJfQoJaWYgKGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbiAmJiBBcnJheS5pc0FycmF5KGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbikpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmxvY2F0aW9ucyA9CgkJCWlucHV0cy5wcm92aWRlcl9sb2NhdGlvbi5tYXAoKGxvY2F0aW9uKSA9PiB7CgkJCQlyZXR1cm4gewoJCQkJCWlkOiBsb2NhdGlvbiwKCQkJCX07CgkJCX0pOwoJfSBlbHNlIGlmICgKCQlpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24gJiYKCQl0eXBlb2YgaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uID09PSAic3RyaW5nIgoJKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlci5sb2NhdGlvbnMgPSBbCgkJCXsKCQkJCWlkOiBpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24sCgkJCX0sCgkJXTsKCX0KCWlmIChpbnB1dHMubG9jYXRpb25fZ3BzKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uZW5kLmxvY2F0aW9uLmdwcyA9CgkJCWlucHV0cy5sb2NhdGlvbl9ncHM7Cgl9CglpZiAoaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uZW5kLmxvY2F0aW9uLmFkZHJlc3MuYXJlYV9jb2RlID0KCQkJaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlOwoJCWRlZmF1bHRQYXlsb2FkLmNvbnRleHQuY2l0eSA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzPy5jaXR5X2NvZGUgPz8gInN0ZDowODAiOwoJfQoKCWZ1bmN0aW9uIGJ1aWxkQ3VzdG9taXNhdGlvblRvR3JvdXBNYXAoZGVmYXVsdFBheWxvYWQpIHsKCQljb25zdCBtYXAgPSB7fTsKCQljb25zdCBpdGVtcyA9IGRlZmF1bHRQYXlsb2FkPy5tZXNzYWdlPy5vcmRlcj8uaXRlbXMgfHwgW107CgoJCWNvbnNvbGUubG9nKCJbTUFQXSBUb3RhbCBvcmRlciBpdGVtczoiLCBpdGVtcy5sZW5ndGgpOwoJCWNvbnNvbGUubG9nKCJbTUFQXSBBbGwgaXRlbXM6IiwgSlNPTi5zdHJpbmdpZnkoaXRlbXMsIG51bGwsIDIpKTsKCgkJaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gewoJCQljb25zb2xlLmxvZygiXG5bTUFQXSBJbnNwZWN0aW5nIGl0ZW06IiwgaXRlbS5pZCk7CgoJCQljb25zdCB0eXBlVGFnID0gaXRlbT8udGFncz8uZmluZCgodCkgPT4gdC5jb2RlID09PSAidHlwZSIpOwoJCQljb25zdCB0eXBlVmFsdWUgPSB0eXBlVGFnPy5saXN0Py5maW5kKAoJCQkJKGwpID0+IGwuY29kZSA9PT0gInR5cGUiCgkJCSk/LnZhbHVlOwoKCQkJY29uc29sZS5sb2coIltNQVBdIEl0ZW0gdHlwZToiLCB0eXBlVmFsdWUpOwoKCQkJaWYgKHR5cGVWYWx1ZSAhPT0gImN1c3RvbWl6YXRpb24iKSB7CgkJCQljb25zb2xlLmxvZygiW01BUF0gU2tpcHBlZCAobm90IGN1c3RvbWl6YXRpb24pIik7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIEZpbmQgdGhlIHBhcmVudCB0YWcgdG8gZ2V0IHRoZSBncm91cCBJRAoJCQljb25zdCBwYXJlbnRUYWcgPSBpdGVtPy50YWdzPy5maW5kKCh0KSA9PiB0LmNvZGUgPT09ICJwYXJlbnQiKTsKCQkJY29uc3QgZ3JvdXBJZCA9IHBhcmVudFRhZz8ubGlzdD8uZmluZCgobCkgPT4gbC5jb2RlID09PSAiaWQiKT8udmFsdWU7CgoJCQlpZiAoZ3JvdXBJZCkgewoJCQkJbWFwW2l0ZW0uaWRdID0gZ3JvdXBJZDsKCQkJCWNvbnNvbGUubG9nKGBbTUFQXSBNYXBwZWQgY3VzdG9taXphdGlvbiAke2l0ZW0uaWR9IC0+IGdyb3VwICR7Z3JvdXBJZH1gKTsKCQkJfSBlbHNlIHsKCQkJCWNvbnNvbGUubG9nKGBbTUFQXSBXYXJuaW5nOiBObyBncm91cCBJRCBmb3VuZCBmb3IgY3VzdG9taXphdGlvbiAke2l0ZW0uaWR9YCk7CgkJCX0KCQl9KTsKCgkJY29uc29sZS5sb2coIlxuW01BUF0gRmluYWwgY3VzdG9taXphdGlvbiB0byBncm91cCBtYXA6IiwgSlNPTi5zdHJpbmdpZnkobWFwLCBudWxsLCAyKSk7CgkJcmV0dXJuIG1hcDsKCX0KCgljb25zdCBjdXN0b21pc2F0aW9uR3JvdXBNYXAgPSBidWlsZEN1c3RvbWlzYXRpb25Ub0dyb3VwTWFwKGRlZmF1bHRQYXlsb2FkKTsKCgoJaWYgKGlucHV0cz8uaXRlbXMpIHsKCQlsZXQgbmV3SXRlbXMgPSBbXTsKCQlsZXQgYWxsSXRlbXMgPSBpbnB1dHMuaXRlbXM7CgoJCWFsbEl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CgkJCWNvbnN0IHBhcmVudEl0ZW1JZCA9IGBQJHtpbmRleH1gOwoJCQluZXdJdGVtcy5wdXNoKHsKCQkJCWlkOiBpdGVtLmlkLAoJCQkJcGFyZW50X2l0ZW1faWQ6IHBhcmVudEl0ZW1JZCwKICAgICAgICAgICAgICAgIGxvY2F0aW9uX2lkOiBpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24sCgkJCQlxdWFudGl0eTogeyBjb3VudDogMSB9LAoJCQkJdGFnczogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQlsaXN0OiBbCgkJCQkJCQl7CgkJCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQkJCXZhbHVlOiAiaXRlbSIsCgkJCQkJCQl9LAoJCQkJCQldLAoJCQkJCX0sCgkJCQldLAoJCQl9KTsKCgkJCWl0ZW0/LmN1c3RvbWlzYXRpb25zPy5mb3JFYWNoKChjdXN0b21pc2F0aW9uKSA9PiB7CgoJCQkJbGV0IGdyb3VwSWQ7CgoJCQkJaWYgKGl0ZW0ucmVsYXRpb24gJiYgaXRlbS5yZWxhdGlvbltjdXN0b21pc2F0aW9uXSkgewoJCQkJCWdyb3VwSWQgPSBpdGVtLnJlbGF0aW9uW2N1c3RvbWlzYXRpb25dOwoJCQkJCW5ld0l0ZW1zLnB1c2goewoJCQkJCQlpZDogY3VzdG9taXNhdGlvbiwKCQkJCQkJcGFyZW50X2l0ZW1faWQ6IHBhcmVudEl0ZW1JZCwKCQkJCQkJbG9jYXRpb25faWQ6IGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbiwKCQkJCQkJcXVhbnRpdHk6IHsgY291bnQ6IDEgfSwKCQkJCQkJdGFnczogWwoJCQkJCQkJewoJCQkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJCQlsaXN0OiBbCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJCQkJCX0sCgkJCQkJCQkJXSwKCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJY29kZTogInBhcmVudCIsCgkJCQkJCQkJbGlzdDogWwoJCQkJCQkJCQl7CgkJCQkJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQkJCQkJdmFsdWU6IGdyb3VwSWQsCgkJCQkJCQkJCX0sCgkJCQkJCQkJXSwKCQkJCQkJCX0sCgkJCQkJCV0sCgkJCQkJfSk7CgkJCQl9IGVsc2UgewoJCQkJCWNvbnN0IGN1c3RvbWlzYXRpb25JZCA9IGN1c3RvbWlzYXRpb24uY3VzdG9taXNhdGlvbklkOwoJCQkJCWdyb3VwSWQgPSBjdXN0b21pc2F0aW9uR3JvdXBNYXBbY3VzdG9taXNhdGlvbklkXTsKCQkJCQluZXdJdGVtcy5wdXNoKHsKCQkJCQkJaWQ6IGN1c3RvbWlzYXRpb25JZCwKCQkJCQkJcGFyZW50X2l0ZW1faWQ6IHBhcmVudEl0ZW1JZCwKCQkJCQkJbG9jYXRpb25faWQ6IGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbiwKCQkJCQkJcXVhbnRpdHk6IHsgY291bnQ6IDEgfSwKCQkJCQkJdGFnczogWwoJCQkJCQkJewoJCQkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJCQlsaXN0OiBbCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJCQkJCX0sCgkJCQkJCQkJXSwKCQkJCQkJCX0sCgkJCQkJCQl7CgkJCQkJCQkJY29kZTogInBhcmVudCIsCgkJCQkJCQkJbGlzdDogWwoJCQkJCQkJCQl7CgkJCQkJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQkJCQkJdmFsdWU6IGdyb3VwSWQsCgkJCQkJCQkJCX0sCgkJCQkJCQkJXSwKCQkJCQkJCX0sCgkJCQkJCV0sCgkJCQkJfSk7CgkJCQl9CgoJCQkJCgkJCX0pOwoJCX0pOwoKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gbmV3SXRlbXM7Cgl9CgoJY29uc3QgaW5wdXRLZXlzID0gT2JqZWN0LmtleXMoaW5wdXRzKTsKCWNvbnN0IG9mZmVycyA9IGlucHV0S2V5cy5maWx0ZXIoKGspID0+IGsuc3RhcnRzV2l0aCgib2ZmZXJzXyIpKTsKCWlmIChvZmZlcnMubGVuZ3RoID4gMCkgewoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIub2ZmZXJzID0gb2ZmZXJzCgkJCS5maWx0ZXIoKG9mZmVyKSA9PiBpbnB1dHNbb2ZmZXJdICE9PSBmYWxzZSAmJiBpbnB1dHNbb2ZmZXJdICE9PSBudWxsKQoJCQkubWFwKChvZmZlcikgPT4gewoJCQkJcmV0dXJuIHsKCQkJCQlpZDogb2ZmZXIucmVwbGFjZSgib2ZmZXJzXyIsICIiKSwKCQkJCQkvLyB0YWdzOiBbCgkJCQkJLy8gCXsKCQkJCQkvLyAJCWNvZGU6ICJzZWxlY3Rpb24iLAoJCQkJCS8vIAkJbGlzdDogWwoJCQkJCS8vIAkJCXsKCQkJCQkvLyAJCQkJY29kZTogImFwcGx5IiwKCQkJCQkvLyAJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCS8vIAkJCX0sCgkJCQkJLy8gCQldLAoJCQkJCS8vIAl9LAoJCQkJCS8vIF0sCgkJCQl9OwoJCQl9KTsKCX0KCXJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: select
          timestamp: '2025-12-29T06:22:03.809Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: befae42f-ac37-41e9-90ae-a33ec945bcf3
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                parent_item_id: DI1
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                parent_item_id: DI1
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                parent_item_id: DI1
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                parent_item_id: DI1
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                parent_item_id: DI1
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I1
                parent_item_id: DI2
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                parent_item_id: DI2
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                parent_item_id: DI2
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                parent_item_id: DI2
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C15
                parent_item_id: DI2
                location_id: L1
                quantity:
                  count: 1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
            fulfillments:
              - end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      area_code: '560001'
      saveData:
        bapId: $.context.bap_id
        message_id: $.context.message_id
        selected_items: $.message.order.items[*]
        payload_city: $.context.city
        selected_fulfillments: $.message.order.fulfillments[*]
        selected_offers: $.message.order.offers[*]
        provider: $.message.order.provider
        RET11Catalog: >-
          EVAL#ZnVuY3Rpb24gZ2V0U2F2ZShlKXtyZXR1cm57Y2F0YWxvZzp7ImJwcC9mdWxmaWxsbWVudHMiOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSJ9LHtpZDoiRjIiLHR5cGU6IlNlbGYtUGlja3VwIn0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5In0sXSwiYnBwL2Rlc2NyaXB0b3IiOntuYW1lOiJNb2NrIFNlbGxlciBOUCIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIixzaG9ydF9kZXNjOiJTZWxsZXIgTWFya2V0cGxhY2UiLGxvbmdfZGVzYzoiU2VsbGVyIE1hcmtldHBsYWNlIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIl0sdGFnczpbe2NvZGU6ImJwcF90ZXJtcyIsbGlzdDpbe2NvZGU6Im5wX3R5cGUiLHZhbHVlOiJNU04ifSxdfSxdfSwiYnBwL3Byb3ZpZGVycyI6W3t0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiJ9LHJhdGluZzoiNCIsZGVzY3JpcHRvcjp7bmFtZToiU3RvcmUgMSIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyIsc2hvcnRfZGVzYzoiU3RvcmUgMSIsbG9uZ19kZXNjOiJTdG9yZSAxIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyJdfSx0dGw6IlAxRCIsbG9jYXRpb25zOlt7aWQ6IkwxIix0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiIsZGF5czoiMSwyLDMsNCw1LDYsNyIsc2NoZWR1bGU6e2hvbGlkYXlzOltdfSxyYW5nZTp7c3RhcnQ6IjAwMDAiLGVuZDoiMjM1OSJ9fSxncHM6IjE5LjEyOTA3Niw3Mi44MjU4MDMiLGFkZHJlc3M6e3N0cmVldDoiMSAmIDIsQU1BUiBKWU9USSBDSFMuQkxERy4sT1BQLk5BTkQgS1JJUEEgSEFMTCIsbG9jYWxpdHk6IkFOREhFUkkgRk9VUiBCVU5HTE9XIEFNQVIgSllPVEkgQ0hTIixjaXR5OiJtb2NrLXNlbGxlci1jaXR5IixzdGF0ZToibW9jay1zdGF0ZSIsYXJlYV9jb2RlOiI0MDAwNTMifSxjaXJjbGU6e2dwczoiMTkuMTI5MDc2LDcyLjgyNTgwMyIscmFkaXVzOnt1bml0OiJrbSIsdmFsdWU6IjMifX19LF0sZnVsZmlsbG1lbnRzOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM3MTAiLGVtYWlsOiJub2JvZHlAbm9tYWlsLmNvbSJ9fSx7aWQ6IkYyIix0eXBlOiJTZWxmLVBpY2t1cCIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM5OTkiLGVtYWlsOiJtb2NrQG5vbWFpbC5jb20ifX0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5Iixjb250YWN0OntwaG9uZToiOTU5NDY2Mzg4OCIsZW1haWw6Im1vY2syQG5vbWFpbC5jb20ifX0sXSxpdGVtczpbe2Rlc2NyaXB0b3I6e25hbWU6IlBsYWluIEF0dGEiLGNvZGU6IjE6OTc4MDIwMTM3OTYyIixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjQuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIyMDAuMDAiLG1heGltdW1fdmFsdWU6IjIwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiIzIn19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkxIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiUGxhaW4gQXR0YSIsY29kZToiMTo0NzQxMzE4MTkxODk0IixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjMuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIzMDAuMDAiLG1heGltdW1fdmFsdWU6IjMwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiI1In19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkyIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiQWxwaGFuc28gTWFuZ28iLGNvZGU6IjE6NzM5NjM3Mzk3NTk1NyIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIixzaG9ydF9kZXNjOiJBbHBoYW5zbyIsbG9uZ19kZXNjOiJBbHBoYW5zbyBNYW5nbyBmcmVzaGx5IGhhbmQgcGlja2VkIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIl19LHJhdGluZzoiMy4wIixwcmljZTp7Y3VycmVuY3k6IklOUiIsdmFsdWU6IjI1MC4wMCIsbWF4aW11bV92YWx1ZToiMjUwLjAwIn0scXVhbnRpdHk6e3VuaXRpemVkOnttZWFzdXJlOnt1bml0OiJraWxvZ3JhbSIsdmFsdWU6IjEifX0sYXZhaWxhYmxlOntjb3VudDoiOTkifSxtYXhpbXVtOntjb3VudDoiOTkifX0sY2F0ZWdvcnlfaWQ6IkZydWl0cyBhbmQgVmVnZXRhYmxlcyIsZnVsZmlsbG1lbnRfaWQ6IkYxIixsb2NhdGlvbl9pZDoiTDEiLCJAb25kYy9vcmcvcmV0dXJuYWJsZSI6ITEsIkBvbmRjL29yZy9jYW5jZWxsYWJsZSI6ITEsIkBvbmRjL29yZy9yZXR1cm5fd2luZG93IjoiUDFEIiwiQG9uZGMvb3JnL3NlbGxlcl9waWNrdXBfcmV0dXJuIjohMSwiQG9uZGMvb3JnL3RpbWVfdG9fc2hpcCI6IlBUNU0iLCJAb25kYy9vcmcvYXZhaWxhYmxlX29uX2NvZCI6ITAsIkBvbmRjL29yZy9jb250YWN0X2RldGFpbHNfY29uc3VtZXJfY2FyZSI6IlJhbWVzaCxyYW1lc2hAYWJjLmNvbSwxODAwNDI1NDQ0NCIsdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkzIn0sXSx0YWdzOlt7Y29kZToidGltaW5nIixsaXN0Olt7Y29kZToidHlwZSIsdmFsdWU6IkFsbCJ9LHtjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImRheV9mcm9tIix2YWx1ZToiMSJ9LHtjb2RlOiJkYXlfdG8iLHZhbHVlOiI3In0se2NvZGU6InRpbWVfZnJvbSIsdmFsdWU6IjAwMDAifSx7Y29kZToidGltZV90byIsdmFsdWU6IjIzNTkifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiQXR0YSwgRmxvdXJzIGFuZCBTb29qaSJ9LHtjb2RlOiJ0eXBlIix2YWx1ZToiMTEifSx7Y29kZToidW5pdCIsdmFsdWU6InBpbmNvZGUifSx7Y29kZToidmFsIix2YWx1ZToiNTYwMDAxLTU2MDA3Niw1NjAwODMifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiRnJ1aXRzIGFuZCBWZWdldGFibGVzIn0se2NvZGU6InR5cGUiLHZhbHVlOiIxMCJ9LHtjb2RlOiJ2YWwiLHZhbHVlOiIzIn0se2NvZGU6InVuaXQiLHZhbHVlOiJrbSJ9LF19LF0sY2F0ZWdvcmllczpbe2lkOiJWMSIsdGFnczpbe2NvZGU6InR5cGUiLGxpc3Q6W3tjb2RlOiJ0eXBlIix2YWx1ZToidmFyaWFudF9ncm91cCJ9LF19LHtjb2RlOiJhdHRyIixsaXN0Olt7Y29kZToibmFtZSIsdmFsdWU6Iml0ZW0ucXVhbnRpdHkudW5pdGl6ZWQubWVhc3VyZSJ9LHtjb2RlOiJzZXEiLHZhbHVlOiIxIn0sXX0sXSxkZXNjcmlwdG9yOntuYW1lOiJQbGFpbiBBdHRhIn19LF0saWQ6IlAxIixvZmZlcnM6W3tpZDoiRkxBVDUwIixkZXNjcmlwdG9yOntjb2RlOiJkaXNjb3VudCIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL29mZmVyMi1iYW5uZXIucG5nIl19LGxvY2F0aW9uX2lkczpbIkwxIl0saXRlbV9pZHM6WyJJMSIsIkkyIiwiSTMiXSx0aW1lOntsYWJlbDoidmFsaWQiLHJhbmdlOntzdGFydDoiMjAyNC0xMi0yM1QwNjo1NTo0NS4wMzVaIixlbmQ6IjIwMzAtMTItMjNUMDg6MTI6MTUuMDMzWiJ9fSx0YWdzOlt7Y29kZToicXVhbGlmaWVyIixsaXN0Olt7Y29kZToibWluX3ZhbHVlIix2YWx1ZToiMTAwLjAwIn0sXX0se2NvZGU6ImJlbmVmaXQiLGxpc3Q6W3tjb2RlOiJ2YWx1ZV90eXBlIix2YWx1ZToiYW1vdW50In0se2NvZGU6InZhbHVlIix2YWx1ZToiLTUwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LHtpZDoiYnV5MmdldDMiLGRlc2NyaXB0b3I6e2NvZGU6ImJ1eVhnZXRZIixpbWFnZXM6WyJodHRwczovL3NucC5jb20vaW1hZ2VzL29mZmVyMS1iYW5uZXIud2VicCJdfSxsb2NhdGlvbl9pZHM6WyJMMSJdLGNhdGVnb3J5X2lkczpbXSxpdGVtX2lkczpbIkkxIiwiSTIiLCJJMyJdLHRpbWU6e2xhYmVsOiJ2YWxpZCIscmFuZ2U6e3N0YXJ0OiIyMDI1LTAxLTAxVDE2OjAwOjAwLjAwMFoiLGVuZDoiMjAzMC0wMS0wMVQyMzowMDowMC4wMDBaIn19LHRhZ3M6W3tjb2RlOiJxdWFsaWZpZXIiLGxpc3Q6W3tjb2RlOiJpdGVtX2NvdW50Iix2YWx1ZToiMiJ9LF19LHtjb2RlOiJiZW5lZml0IixsaXN0Olt7Y29kZToiaXRlbV9jb3VudCIsdmFsdWU6IjEifSx7Y29kZToiaXRlbV9pZCIsdmFsdWU6IkkyIn0se2NvZGU6Iml0ZW1fdmFsdWUiLHZhbHVlOiIwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LF19LF19fX0=
      inputs:
        id: ret11_nestedSelect
        jsonSchema:
          $schema: http://json-schema.org/draft-07/schema#
          type: object
          properties:
            city_code:
              type: string
              default: std:011
            provider:
              type: string
              default: P1
            provider_location:
              type: string
              default: L1
            location_gps:
              type: string
              default: 19.129076,72.825803
            location_pin_code:
              type: string
              default: '400053'
            items:
              type: array
              default: []
              items:
                type: object
                properties:
                  id:
                    type: string
                    default: I1
                  quantity:
                    type: number
                    default: 1
                  location:
                    type: string
                    default: L1
                  customisations:
                    type: array
                    default:
                      - customisationId: C1
                      - customisationId: C7
                      - customisationId: C14
                    items:
                      type: object
                      properties:
                        customisationId:
                          type: string
                          default: C1
                      required:
                        - customisationId
                additionalProperties: true
                default: {}
          additionalProperties: true
          default: {}
  - api: on_select
    action_id: on_select
    owner: BPP
    responseFor: select
    unsolicited: false
    description: On-select response to select
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKICBkZWZhdWx0UGF5bG9hZCwKICBzZXNzaW9uRGF0YQopIHsKCWNvbnN0IHNlbGVjdGVkSXRlbXNPYmogPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtczsKCWNvbnNvbGUubG9nKCJzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtczoiLCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyk7CglpZiAoc2Vzc2lvbkRhdGE/LnByb3ZpZGVyKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwoJfQoJY29uc3QgdGVtcEl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcykpOwoJaWYgKHNlc3Npb25EYXRhPy5zZWxlY3RlZF9pdGVtcyAmJiBzZXNzaW9uRGF0YT8uc2VsZWN0ZWRfZnVsZmlsbG1lbnRzPy5sZW5ndGgpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gdGVtcEl0ZW1zLm1hcCgoaXRlbSkgPT4gewoJCQlkZWxldGUgaXRlbS5xdWFudGl0eTsKCQkJcmV0dXJuIHsKCQkJCS4uLml0ZW0sCgkJCQlmdWxmaWxsbWVudF9pZDogZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHM/LmZpbmQoCgkJCQkJKGZ1bGZpbGxtZW50KSA9PiBmdWxmaWxsbWVudC50eXBlID09PSAiRGVsaXZlcnkiCgkJCQkpPy5pZCwKCQkJfTsKCQl9KTsKCX0KCglkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gYnVpbGRSZXRhaWxRdW90ZSgKCQlzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcywKCQlvbl9zZWFyY2hfaXRlbXMsCgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMsCgkJewoJCQlvZmZlcnM6IHNlc3Npb25EYXRhPy5vZmZlcnMsCgkJCWluaXRhbE9mZmVyczogb25fc2VhcmNoX29mZmVycywKCQl9CgkpOwogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQo=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        ZnVuY3Rpb24gbWVldFJlcXVpcmVtZW50cyhzZXNzaW9uRGF0YSl7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZXMgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_select
          timestamp: '2025-12-29T06:44:41.277Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 001f9ecd-fbe0-43da-987e-6db9f5003db6
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - fulfillment_id: F1
                id: I1
            fulfillments:
              - id: F1
                type: Delivery
                '@ondc/org/provider_name': LSP or Provider Name
                tracking: false
                '@ondc/org/category': Immediate Delivery
                '@ondc/org/TAT': PT60M
                state:
                  descriptor:
                    code: Serviceable
            quote:
              price:
                currency: INR
                value: '0.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 0
                  title: Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    quantity:
                      available:
                        count: '0'
                      maximum:
                        count: '0'
                    price:
                      currency: INR
                      value: '170.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '0.00'
              ttl: P1D
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        on_select_fulfillments: $.message.order.fulfillments[*]
        on_select_items: $.message.order.items[*]
        tat: $.message.order.fulfillments[0]["@ondc/org/TAT"]
      inputs: {}
  - api: init
    action_id: init
    owner: BAP
    responseFor: null
    unsolicited: false
    description: 'Init '
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBpdGVtcyA9IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zOwoJY29uc3Qgb25TZWxlY3REYXRhID0gc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50czsKCWNvbnN0IGZJZCA9IG9uU2VsZWN0RGF0YS5maW5kKChmKSA9PiBmLnR5cGUgPT09ICJEZWxpdmVyeSIpPy5pZCB8fCAiRjEiOwoKICBpZiAoc2Vzc2lvbkRhdGE/LnByb3ZpZGVyKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyID0gc2Vzc2lvbkRhdGEucHJvdmlkZXJbMF07CiAgfQoKICBjb25zb2xlLmxvZygic2Vzc2lvbkRhdGE/Lm9uX3NlbGVjdF9mdWxmaWxsbWVudHMiLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uRGF0YT8ub25fc2VsZWN0X2Z1bGZpbGxtZW50cykpCgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZy5hZGRyZXNzID0gewogICAgbmFtZTogIm15IGhvdXNlIG9yIGRvb3Igb3IgZmxvb3IgIyIsCiAgICBidWlsZGluZzogIm15IGJ1aWxkaW5nIG5hbWUgb3IgaG91c2UgIyIsCiAgICBsb2NhbGl0eTogIm15IHN0cmVldCBuYW1lIiwKICAgIGNpdHk6ICJteSBjaXR5IiwKICAgIHN0YXRlOiAibXkgc3RhdGUiLAogICAgY291bnRyeTogIklORCIsCiAgICBhcmVhX2NvZGU6CiAgICAgIHNlc3Npb25EYXRhPy5zZWxlY3RlZF9mdWxmaWxsbWVudHM/LlswXT8uZW5kPy5sb2NhdGlvbj8uYWRkcmVzcz8uYXJlYV9jb2RlID8/CiAgICAgICIxMTAxMjUiLAogIH07CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZy5jcmVhdGVkX2F0ID0KICAgIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZy51cGRhdGVkX2F0ID0KICAgIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwoKICBjb25zdCBzZWxlY3RlZEZ1bGZpbGxtZW50ID0KICBvblNlbGVjdERhdGEuZmluZCgoZikgPT4gZi50eXBlID09PSAiRGVsaXZlcnkiKSB8fCB7CiAgICBpZDogIkYxIiwKICAgIHR5cGU6ICJEZWxpdmVyeSIsCiAgfTsKCgogIGlmIChzZXNzaW9uRGF0YT8uc2VsZWN0ZWRfaXRlbXMpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5tYXAoKGl0ZW0pID0+IHsKICAgICAgaXRlbS5mdWxmaWxsbWVudF9pZCA9IHNlbGVjdGVkRnVsZmlsbG1lbnQuaWQ7CiAgICAgIHJldHVybiBpdGVtOwogICAgfSk7CiAgfQoKICBpZiAoc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBbCiAgICAgIHsKICAgICAgICBpZDogc2VsZWN0ZWRGdWxmaWxsbWVudD8uaWQsCiAgICAgICAgdHlwZTogc2VsZWN0ZWRGdWxmaWxsbWVudD8udHlwZSwKICAgICAgICBlbmQ6IHsKICAgICAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgICAgIGdwczogc2Vzc2lvbkRhdGE/LnNlbGVjdGVkX2Z1bGZpbGxtZW50c1swXT8uZW5kPy5sb2NhdGlvbj8uZ3BzLAogICAgICAgICAgICAuLi4oc2VsZWN0ZWRGdWxmaWxsbWVudC50eXBlID09PSAiU2VsZi1QaWNrdXAiCiAgICAgICAgICAgICAgPyB7fQogICAgICAgICAgICAgIDogewogICAgICAgICAgICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgYXJlYV9jb2RlOgogICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGE/LnNlbGVjdGVkX2Z1bGZpbGxtZW50c1swXT8uZW5kPy5sb2NhdGlvbj8uYWRkcmVzcwogICAgICAgICAgICAgICAgICAgICAgICAuYXJlYV9jb2RlLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICB9LAogICAgICAgICAgY29udGFjdDogewogICAgICAgICAgICBwaG9uZTogIjk4ODYwOTg4NjAiLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIC4uLihzZWxlY3RlZEZ1bGZpbGxtZW50Py50YWdzCiAgICAgICAgICA/IHsgdGFnczogc2VsZWN0ZWRGdWxmaWxsbWVudC50YWdzIH0KICAgICAgICAgIDoge30pLAogICAgICB9LAogICAgXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YT8ub2ZmZXJzPy5sZW5ndGgpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIub2ZmZXJzID0gc2Vzc2lvbkRhdGE/Lm9mZmVyczsKICB9CgogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpewogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9pdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMgfHwgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcGF5bG9hZF9jaXR5CiAgaWYgKCFzZXNzaW9uRGF0YS5wYXlsb2FkX2NpdHkpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwYXlsb2FkX2NpdHkgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWUxPQURfQ0lUWSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHByb3ZpZGVyCiAgaWYgKCFzZXNzaW9uRGF0YS5wcm92aWRlcikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHByb3ZpZGVyIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QUk9WSURFUiIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHF1b3RlCiAgaWYgKCFzZXNzaW9uRGF0YS5xdW90ZSB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEucXVvdGUgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcXVvdGUgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1FVT1RFIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfaXRlbXMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciB0YXQKICBpZiAoIXNlc3Npb25EYXRhLnRhdCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHRhdCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfVEFUIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: init
          timestamp: '2025-12-29T07:50:43.211Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: c8681924-f1de-4e37-9456-cb43743ce863
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C15
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
            billing:
              name: ONDC buyer
              address:
                name: 'my house or door or floor #'
                building: 'my building name or house #'
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                type: Delivery
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: 'my house or door or floor #'
                      building: 'my building name or house #'
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  contact:
                    phone: '9886098860'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        items: $.message.order.items[*]
        provider: $.message.order.provider
        billing: $.message.order.billing
        fulfillments: $.message.order.fulfillments[*]
        selected_np_fees: >-
          $.message.order.items[*].tags[?(@.code=="np_fees")].list[?(@.code=="id")].value
      inputs: {}
  - api: on_init
    action_id: on_init
    owner: BPP
    responseFor: init
    unsolicited: false
    description: Response to Init call
    mock:
      generate: >-
        YXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJaWYgKHNlc3Npb25EYXRhPy5wcm92aWRlcikgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwogIH0KCiAgbGV0IGlzQnV5ZXJEZWxpdmVyeSA9IGZhbHNlOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cz8ubWFwKAogICAgKGZ1bGZpbGxtZW50KSA9PiB7CiAgICAgIGlmIChmdWxmaWxsbWVudC50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgaXNCdXllckRlbGl2ZXJ5ID0gdHJ1ZTsKICAgICAgICBmdWxmaWxsbWVudC50YWdzLnB1c2goewogICAgICAgICAgY29kZTogInJ0b19hY3Rpb24iLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInJldHVybl90b19vcmlnaW4iLAogICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChmdWxmaWxsbWVudC50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgZnVsZmlsbG1lbnQudHJhY2tpbmcgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGZ1bGZpbGxtZW50LnRyYWNraW5nID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiBmdWxmaWxsbWVudDsKICAgIH0KICApOwoKICBpZiAoc2Vzc2lvbkRhdGE/Lml0ZW1zKSB7CiAgICBpZiAoIWlzQnV5ZXJEZWxpdmVyeSkgewogICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgaXRlbS50YWdzLnB1c2goewogICAgICAgICAgY29kZTogInJ0b19hY3Rpb24iLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInJldHVybl90b19vcmlnaW4iLAogICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtczsKICAgIH0KICB9CgogIGlmIChzZXNzaW9uRGF0YT8uYmlsbGluZykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gc2Vzc2lvbkRhdGEuYmlsbGluZ1swXTsKICB9CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBidWlsZFJldGFpbFF1b3RlKAogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcywKICAgIG9uX3NlYXJjaF9pdGVtcywKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzLAogICAgewogICAgICBvZmZlcnM6IHNlc3Npb25EYXRhPy5vZmZlcnMsCiAgICAgIGluaXRhbE9mZmVyczogb25fc2VhcmNoX29mZmVycywKICAgIH0KICApOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3MgPSBbCiAgICB7CiAgICAgIGNvZGU6ICJicHBfdGVybXMiLAogICAgICBsaXN0OiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInRheF9udW1iZXIiLAogICAgICAgICAgdmFsdWU6ICIxMkFCQ0RFMzQ1NkZHWkgiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY29kZTogInByb3ZpZGVyX3RheF9udW1iZXIiLAogICAgICAgICAgdmFsdWU6ICJKU1VGSzIyMzFIIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJucF90eXBlIiwKICAgICAgICAgIHZhbHVlOiAiTVNOIiwKICAgICAgICB9LAogICAgICBdLAogICAgfSwKICBdOwoKCXJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQo=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzIChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_init
          timestamp: '2025-12-29T08:10:19.239Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: c2d4ecdb-b863-4eb0-ab35-8851e9c789be
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C15
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
            billing:
              name: ONDC buyer
              address:
                name: my house or door or floor
                building: my building name or house
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              tax_number: XXXXXXXXXXXXXXX
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                type: Delivery
                tracking: false
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: my house or door or floor
                      building: my building name or house
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  contact:
                    phone: '9886098860'
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    quantity:
                      available:
                        count: '99'
                      maximum:
                        count: '99'
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    quantity:
                      available:
                        count: '99'
                      maximum:
                        count: '99'
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    quantity:
                      available:
                        count: '99'
                      maximum:
                        count: '99'
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
              ttl: PT1H
            payment:
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.54'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: xxxx
                  branch_name: xxxx
            cancellation_terms:
              - fulfillment_state:
                  descriptor:
                    code: Pending
                    short_desc: '002'
                cancellation_fee:
                  percentage: '0.00'
              - fulfillment_state:
                  descriptor:
                    code: Packed
                    short_desc: 002,051
                cancellation_fee:
                  percentage: '100.00'
              - fulfillment_state:
                  descriptor:
                    code: Order-picked-up
                    short_desc: 001,003
                cancellation_fee:
                  percentage: '100.00'
              - fulfillment_state:
                  descriptor:
                    code: At-pickup
                    short_desc: '051'
                cancellation_fee:
                  percentage: '100.00'
              - fulfillment_state:
                  descriptor:
                    code: At-delivery
                    short_desc: 010,011,013,014
                cancellation_fee:
                  percentage: '100.00'
            tags:
              - code: bpp_terms
                list:
                  - code: tax_number
                    value: 12ABCDE3456FGZH
                  - code: provider_tax_number
                    value: JSUFK2231H
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        bpp_terms: $.message.order.tags[?(@.code == 'bpp_terms')]
        tags: $.message.order.tags[*]
        fulfillments: $.message.order.fulfillments[*]
        payment: $.message.order.payment
      inputs: {}
  - api: confirm
    action_id: confirm
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Confirming the Order after Init
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewoJaWYgKGluaXRpYWxpemUpIHsKCQljb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwoJCXNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwoJCXNhdmVkQmlsbGluZy51cGRhdGVkX2F0ID0gbmV3SXNvOwoJfQoJcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCglzZXNzaW9uRGF0YSwKCWRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CglpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CgkJdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKCX0KCWNvbnN0IG9uU2VsZWN0RnVsZmlsbG1lbnRzID0KCQlzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwoJCWNvbnN0IGZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCQlyZXR1cm4gZnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewoJCQljb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50ID0gb25TZWxlY3RGdWxmaWxsbWVudHMuZmluZCgKCQkJCShvZikgPT4gb2YuaWQgPT09IGYuaWQKCQkJKTsKCQkJcmV0dXJuIHsKCQkJCWlkOiBmLmlkLAoJCQkJdHlwZTogZi50eXBlLAoJCQkJZW5kOiB7CgkJCQkJY29udGFjdDogZi5lbmQ/LmNvbnRhY3QsCgkJCQkJcGVyc29uOiB7CgkJCQkJCW5hbWU6ICJtb2NrLXBlcnNvbiIsCgkJCQkJfSwKCQkJCQlsb2NhdGlvbjogZi5lbmQ/LmxvY2F0aW9uLAoJCQkJfSwKCQkJCXRyYWNraW5nOiBmLnRyYWNraW5nLAoJCQkJIkBvbmRjL29yZy9jYXRlZ29yeSI6IG9uU2VsZWN0RnVsZmlsbG1lbnQ/LlsiQG9uZGMvb3JnL2NhdGVnb3J5Il0sCgkJCQkiQG9uZGMvb3JnL1RBVCI6IG9uU2VsZWN0RnVsZmlsbG1lbnQ/LlsiQG9uZGMvb3JnL1RBVCJdLAoJCQl9OwoJCX0pOwoJcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJY29uc3QgdGltZUlzbyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gZ2VuZXJhdGVTaXhEaWdpdENvZGUoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSB0aW1lSXNvOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJc287CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHNlc3Npb25EYXRhLnF1b3RlWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKAoJCXNlc3Npb25EYXRhLmJpbGxpbmdbMF0KCSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQucGFyYW1zLmFtb3VudCA9CgkJc2Vzc2lvbkRhdGEucXVvdGVbMF0/LnByaWNlPy52YWx1ZTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQucGFyYW1zLnRyYW5zYWN0aW9uX2lkID0KCSAgIm1vY2tfcGF5bWVudF9pZF8xMjMiOwoJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gewoJCXBhcmFtczogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXRyYW5zYWN0aW9uX2lkOiAiMzkzNyIsCgkJCWFtb3VudDogc2Vzc2lvbkRhdGEucXVvdGVbMF0/LnByaWNlPy52YWx1ZSwKCQl9LAoJCXN0YXR1czogIlBBSUQiLAoJCXR5cGU6ICJPTi1PUkRFUiIsCgkJY29sbGVjdGVkX2J5OiAiQkFQIiwKCQkiQG9uZGMvb3JnL3NldHRsZW1lbnRfYmFzaXMiOiAiZGVsaXZlcnkiLAoJCSJAb25kYy9vcmcvc2V0dGxlbWVudF93aW5kb3ciOiAiUDFEIiwKCQkiQG9uZGMvb3JnL3dpdGhob2xkaW5nX2Ftb3VudCI6ICIwLjAwIiwKCQkuLi5zZXNzaW9uRGF0YS5wYXltZW50WzBdLAoJfTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IGNyZWF0ZUZ1bGZpbGxtZW50cygKCQlzZXNzaW9uRGF0YSwKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCiAgKTsKCWlmIChzZXNzaW9uRGF0YT8udGFncykgewoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFncyA9IFsKCQkJLi4uc2Vzc2lvbkRhdGEudGFncywKCQkJewoJCQkJY29kZTogImJhcF90ZXJtcyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiYWNjZXB0X2JwcF90ZXJtcyIsCgkJCQkJCXZhbHVlOiAiWSIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJzdGF0aWNfdGVybXMiLAoJCQkJCQl2YWx1ZToKCQkJCQkJCSJodHRwczovL2dpdGh1Yi5jb20vT05EQy1PZmZpY2lhbC9OUC1TdGF0aWMtVGVybXMvYnV5ZXJOUF9CTlAvMS4wL3RjLnBkZiIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0YXhfbnVtYmVyIiwKCQkJCQkJdmFsdWU6ICIxMkFCQ0RFMzQ1NkZHWkoiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV07Cgl9CgovLyAgIGNvbnN0IGV4aXN0aW5nVGFncyA9IGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFnczsKLy8gCWNvbnN0IGJwcFRlcm1zID0gZXhpc3RpbmdUYWdzLmZpbmQoKGYpID0+IGYuY29kZSA9PT0gImJwcF90ZXJtcyIpOwovLyAJaWYgKGJwcFRlcm1zKSB7Ci8vIAkJYnBwVGVybXMubGlzdCA9IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5saXN0OwovLyAJfQoJcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9CgpmdW5jdGlvbiBnZW5lcmF0ZVNpeERpZ2l0Q29kZSgpIHsKCXJldHVybiBNYXRoLmZsb29yKDEwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDApLnRvU3RyaW5nKCk7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: confirm
          timestamp: '2025-12-29T08:39:38.573Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 60f5adb8-cc0b-4954-8742-265b5e03593b
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Created
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
            billing:
              name: ONDC buyer
              address:
                name: my house or door or floor
                building: my building name or house
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              phone: '9886098860'
              email: nobody@nomail.com
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                type: Delivery
                '@ondc/org/TAT': PT60M
                tracking: false
                end:
                  person:
                    name: ONDC buyer
                  contact:
                    email: nobody@nomail.com
                    phone: '9886098860'
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: my house or door or floor
                      building: my building name or house
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
              ttl: PT1H
            payment:
              params:
                currency: INR
                transaction_id: '3937'
                amount: '1955.65'
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '10.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  beneficiary_name: xxxxx
                  bank_name: xxxx
                  branch_name: xxxx
            tags:
              - code: bpp_terms
                list:
                  - code: tax_number
                    value: 12ABCDE3456FGZH
                  - code: np_type
                    value: BAP
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: 'Y'
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                  - code: tax_number
                    value: 12ABCDE3456FGZJ
            created_at: '2025-01-08T09:30:00.000Z'
            updated_at: '2025-01-08T09:30:00.000Z'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        payment: $.message.order.payment
        order_state: $.message.order.state
        order_created_at: $.message.order.created_at
        bap_terms: $.message.order.tags[?(@.code == 'bap_terms')]
        fulfillments: $.message.order.fulfillments[*]
        order_id: $.message.order.id
      inputs: {}
  - api: on_confirm
    action_id: on_confirm
    owner: BPP
    responseFor: confirm
    unsolicited: false
    description: On-confirm Response to the confirm call
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewogIGlmIChpbml0aWFsaXplKSB7CiAgICBjb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwogICAgc2F2ZWRCaWxsaW5nLmNyZWF0ZWRfYXQgPSBuZXdJc287CiAgICBzYXZlZEJpbGxpbmcudXBkYXRlZF9hdCA9IG5ld0lzbzsKICB9CiAgcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgc2Vzc2lvbkRhdGEsCiAgZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKICBpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KICBjb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50cyA9CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwoKICBjb25zdCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgcmV0dXJuIGZ1bGZpbGxtZW50cwogICAgLmZpbHRlcigoZikgPT4gb25TZWxlY3RGdWxmaWxsbWVudHMuc29tZSgoc2YpID0+IHNmLmlkID09PSBmLmlkKSkKICAgIC5tYXAoKGYsIGluZGV4KSA9PiB7CiAgICAgIGNvbnN0IHNlbGVjdGVkID0KICAgICAgICBvblNlbGVjdEZ1bGZpbGxtZW50cy5maW5kKChzZikgPT4gc2YuaWQgPT09IGYuaWQpIHx8IHt9OwoKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogZi5pZCwKICAgICAgICB0eXBlOiBmLnR5cGUsCiAgICAgICAgdHJhY2tpbmc6IGYudHJhY2tpbmcsCiAgICAgICAgc3RhdGU6IHsKICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgY29kZTogIlBlbmRpbmciLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgICJAb25kYy9vcmcvVEFUIjogc2VsZWN0ZWRbIkBvbmRjL29yZy9UQVQiXSwKICAgICAgICAiQG9uZGMvb3JnL3Byb3ZpZGVyX25hbWUiOiAiU3RvcmUgMSIsCiAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgICAgIGlkOiAiTDEiLAogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgbmFtZTogIlN0b3JlIDEiLAogICAgICAgICAgICB9LAogICAgICAgICAgICBncHM6ICIxOS4xMjkwNzYsNzIuODI1ODAzIiwKICAgICAgICAgICAgYWRkcmVzczogewogICAgICAgICAgICAgIHN0cmVldDogIjEgJiAyLEFNQVIgSllPVEkgQ0hTLkJMREcuLE9QUC5OQU5EIEtSSVBBIEhBTEwiLAogICAgICAgICAgICAgIGxvY2FsaXR5OiAiQU5ESEVSSSBGT1VSIEJVTkdMT1cgQU1BUiBKWU9USSBDSFMiLAogICAgICAgICAgICAgIGNpdHk6ICJtb2NrLXNlbGxlci1jaXR5IiwKICAgICAgICAgICAgICBzdGF0ZTogIm1vY2stc3RhdGUiLAogICAgICAgICAgICAgIGFyZWFfY29kZTogIjQwMDA1MyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgY29udGFjdDogewogICAgICAgICAgICBwaG9uZTogIjk1OTQ2NjM3MTAiLAogICAgICAgICAgICBlbWFpbDogIm5vYm9keUBub21haWwuY29tIiwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBlbmQ6IGYuZW5kLAogICAgICB9OwogICAgfSk7Cgp9Cgphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKICBkZWZhdWx0UGF5bG9hZCwKICBzZXNzaW9uRGF0YQopIHsKICBjb25zdCB0aW1lSXNvID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJc287CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCiAgICBzZXNzaW9uRGF0YS5iaWxsaW5nWzBdCiAgKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAogICAgc2Vzc2lvbkRhdGEsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwogICk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHNlc3Npb25EYXRhLnF1b3RlWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnRbMF07CiAgY29uc3QgZXhpc3RpbmdUYWdzID0gZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci50YWdzCiAgY29uc3QgYmFwVGVybXMgPSBleGlzdGluZ1RhZ3MuZmluZCgoZikgPT4gZi5jb2RlID09PSAiYmFwX3Rlcm1zIik7CiAgaWYgKGJhcFRlcm1zKSB7CiAgICBiYXBUZXJtcy5saXN0ID0gc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zWzBdLmxpc3QKICAgICAgLmZpbHRlcigoaSkgPT4gaS5jb2RlICE9PSAiYWNjZXB0X2JwcF90ZXJtcyIpCiAgICAgIC5tYXAoKGkpID0+CiAgICAgICAgaS5jb2RlID09PSAic3RhdGljX3Rlcm1zIgogICAgICAgICAgPyB7IC4uLmksIHZhbHVlOiAiaHR0cHM6Ly9naXRodWIuY29tL09OREMtT2ZmaWNpYWwvcHJvdG9jb2wtbmV0d29yay1leHRlbnNpb24vZGlzY3Vzc2lvbnMvNzkiIH0KICAgICAgICAgIDogaQogICAgICApOwogIH0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0K
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvcmRlcl9pZCAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiYXBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJhcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5iYXBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYmFwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CQVBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzdGF0ZSAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc3RhdGUpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzdGF0ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU1RBVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXltZW50IChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_confirm
          timestamp: '2025-12-29T08:51:49.239Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 2280275d-5d9a-413c-8c83-6ddc1db4e761
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Created
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
            billing:
              name: ONDC buyer
              address:
                name: 'my house or door or floor #'
                building: 'my building name or house #'
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': LSP or Provider Name
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 12.9563,77.6368
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: '560076'
                      state: KA
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: 'my house or door or floor #'
                      building: 'my building name or house #'
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  person:
                    name: name_of_person
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Pepper Barbeque Chicken
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '95.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '95.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  '@ondc/org/item_quantity':
                    count: 1
                  title: 100% Wheat Thin Crust
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Fresh Tomato
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.75'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': F1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - '@ondc/org/item_id': F1
                  title: Packing charges
                  '@ondc/org/title_type': packing
                  price:
                    currency: INR
                    value: '25.00'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '10.00'
              ttl: PT1H
            payment:
              uri: https://ondc.transaction.com/payment
              tl_method: http/get
              params:
                currency: INR
                transaction_id: '3937'
                amount: '1955.65'
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.54'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '10.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  beneficiary_name: xxxxx
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: xxxx
                  branch_name: xxxx
            cancellation_terms:
              - fulfillment_state:
                  descriptor:
                    code: Pending
                    short_desc: '002'
                cancellation_fee:
                  percentage: '0.00'
              - fulfillment_state:
                  descriptor:
                    code: Packed
                    short_desc: 001,003
                cancellation_fee:
                  percentage: '100.00'
              - fulfillment_state:
                  descriptor:
                    code: Order-picked-up
                    short_desc: 001,003
                cancellation_fee:
                  percentage: '100.00'
              - fulfillment_state:
                  descriptor:
                    code: At-pickup
                    short_desc: '009'
                cancellation_fee:
                  percentage: '100.00'
              - fulfillment_state:
                  descriptor:
                    code: At-delivery
                    short_desc: 010,011,012,013,014,015
                cancellation_fee:
                  percentage: '100.00'
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: 12ABCDE3456FGZH
                  - code: provider_tax_number
                    value: JSUFK2231H
                  - code: accept_bap_terms
                    value: 'Y'
              - code: bap_terms
                list:
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                  - code: tax_number
                    value: 12ABCDE3456FGZJ
                  - code: accept_bpp_terms
                    value: 'Y'
            created_at: '2025-01-08T09:30:00.000Z'
            updated_at: '2025-01-08T09:31:30.000Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: on_status
    action_id: on_status_pending
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which accepts the order
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtczsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBnZXRVcGRhdGVkQmlsbGluZygKCQlzZXNzaW9uRGF0YS5iaWxsaW5nWzBdCgkpOwoJLy8gZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKCWNvbnN0IHRpbWVJU08gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gdGltZUlTTzsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSBzZXNzaW9uRGF0YS5vcmRlcl9jcmVhdGVkX2F0WzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnRbMF07CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9CmZ1bmN0aW9uIGNyZWF0ZUZ1bGZpbGxtZW50cygKICBhY3Rpb24sCiAgYWN0aW9uSWQsCiAgc2Vzc2lvbkRhdGEsCiAgZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKICBpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KICBpZiAoYWN0aW9uID09PSAib25fc3RhdHVzIikgewogICAgbGV0IGZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKICAgIGNvbnN0IHRhZ3MgPSB7CiAgICAgIHRhZ3M6IFsKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgdmFsdWU6ICJQMkgyUCIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY29kZTogInRyYWNraW5nIiwKICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvZGU6ICJncHNfZW5hYmxlZCIsCiAgICAgICAgICAgICAgdmFsdWU6ICJubyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvZGU6ICJ1cmwiLAogICAgICAgICAgICAgIHZhbHVlOiAiaHR0cHM6Ly9zZWxsZXJOUC5jb20vb25kYy90cmFja2luZ191cmwiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICAgIGxldCBmaW5hbEZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHM7CiAgICBpZiAoIXNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMpIHsKICAgICAgY29uc3QgdGltZSA9IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgMTAgKiAxMDAwICogNjApOwogICAgICBjb25zdCBzdGFydF9lbmQgPSBuZXcgRGF0ZSh0aW1lLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKS50b0lTT1N0cmluZygpOwogICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cwogICAgICAgIC8vIC5maWx0ZXIoKGYpID0+IGYudHlwZSA9PSAiRGVsaXZlcnkiKQogICAgICAgIC5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIHJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHRpbWUudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBlbmQ6IHN0YXJ0X2VuZCwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgICAgZW5kOiBuZXcgRGF0ZSgKICAgICAgICAgICAgICAgICAgICAgIHRpbWUuZ2V0VGltZSgpICsKICAgICAgICAgICAgICAgICAgICAgIDEwMDAgKiBpc29EdXJUb1NlYyhmWyJAb25kYy9vcmcvVEFUIl0gfHwgIlBUMEgiKQogICAgICAgICAgICAgICAgICAgICkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB0YWdzOiB0YWdzLnRhZ3MsCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsKICAgICAgICB9KTsKICAgICAgLy8gZnVsZmlsbG1lbnRzID0gZnVsZmlsbG1lbnRzLmZpbHRlcigoZikgPT4gZi50eXBlICE9ICJEZWxpdmVyeSIpOwogICAgICAvLyBmaW5hbEZ1bGZpbGxtZW50cyA9IHsgLi4uZmluYWxGdWxmaWxsbWVudHMsIC4uLmZ1bGZpbGxtZW50cyB9OwogICAgfQogICAgbGV0IHN0YXRlID0gIlBlbmRpbmciOwogICAgc3dpdGNoIChhY3Rpb25JZCkgewogICAgICBjYXNlICJvbl9zdGF0dXNfcGFja2VkIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfYWdlbnRfYXNzaWduZWQiOgogICAgICAgIHN0YXRlID0gIkFnZW50LWFzc2lnbmVkIjsKCiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGFnZW50OiB7CiAgICAgICAgICAgICAgICBuYW1lOiAibW9jay1hZ2VudCIsCiAgICAgICAgICAgICAgICBwaG9uZTogIjk4ODYwOTg4NjAiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdmVoaWNsZTogewogICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uOiAiM0xWSjk0NSIsCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcGlja2VkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1waWNrZWQtdXAiOwogICAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLnN0YXRlLmRlc2NyaXB0b3IuY29kZSA9CiAgICAgICAgICBzdGF0ZTsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZG9jdW1lbnRzID0gWwogICAgICAgICAgewogICAgICAgICAgICB1cmw6ICJodHRwczovL2ludm9pY2VfdXJsIiwKICAgICAgICAgICAgbGFiZWw6ICJJbnZvaWNlIiwKICAgICAgICAgIH0sCiAgICAgICAgXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2F0X3BpY2t1cCI6CiAgICAgICAgc3RhdGUgPSAiQXQtcGlja3VwIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfYXRfZGVsaXZlcnkiOgogICAgICAgIHN0YXRlID0gIkF0LWRlbGl2ZXJ5IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX291dF9mb3JfZGVsaXZlcnkiOgogICAgICAgIHN0YXRlID0gIk91dC1mb3ItZGVsaXZlcnkiOwogICAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLnN0YXRlLmRlc2NyaXB0b3IuY29kZSA9CiAgICAgICAgICBzdGF0ZTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItZGVsaXZlcmVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfcnRvX2RlbGl2ZXJlZCI6CiAgICAgICAgc3RhdGUgPSAiQ2FuY2VsbGVkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIlJUTyIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiUlRPLURlbGl2ZXJlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKCiAgICAgIGNhc2UgIm9uX3N0YXR1c19yZWFkeV90b19zaGlwIjoKICAgICAgICBzdGF0ZSA9ICJQYWNrZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiQnV5ZXItRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIGNvbnN0IHRhZ3MgPSBmLnRhZ3MgfHwgW107CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICB0YWdzOiBbCiAgICAgICAgICAgICAgICAuLi50YWdzLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAic3RhdGUiLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInJlYWR5X3RvX3NoaXAiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb2RlOiAicm91dGluZyIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIlAyUCIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmYsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogc3RhdGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGY7CiAgICB9KTsKICAgIHJldHVybiBmaW5hbEZ1bGZpbGxtZW50czsKICB9CiAgcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAogIGRlZmF1bHRQYXlsb2FkLAogIHNlc3Npb25EYXRhCikgewogIGNvbnN0IGdlbmVyYWxQYXlsb2FkID0gY3JlYXRlR2VuZXJpY09uU3RhdHVzKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CiAgZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCiAgICAib25fc3RhdHVzIiwKICAgICJvbl9zdGF0dXNfYWNjZXB0ZWQiLAogICAgc2Vzc2lvbkRhdGEsCiAgICBnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwogICk7CiAgcmV0dXJuIGdlbmVyYWxQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2025-12-29T09:59:28.640Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 4d630042-11e4-4944-b545-13f43c81f8f1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Accepted
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
            billing:
              name: ONDC buyer
              address:
                name: 'my house or door or floor #'
                building: 'my building name or house #'
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': LSP or Provider Name
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 12.9563,77.6368
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: '560076'
                      state: KA
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: 'my house or door or floor #'
                      building: 'my building name or house #'
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  person:
                    name: name_of_person
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Pepper Barbeque Chicken
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '95.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '95.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  '@ondc/org/item_quantity':
                    count: 1
                  title: 100% Wheat Thin Crust
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Fresh Tomato
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.75'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': F1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - '@ondc/org/item_id': F1
                  title: Packing charges
                  '@ondc/org/title_type': packing
                  price:
                    currency: INR
                    value: '25.00'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '10.00'
              ttl: PT1H
            payment:
              uri: https://ondc.transaction.com/payment
              tl_method: http/get
              params:
                currency: INR
                transaction_id: '3937'
                amount: '1955.65'
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.54'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '10.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  beneficiary_name: xxxxx
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:35.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_packed
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which is sent when the order is packed
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZlaGljbGU6IHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbjogIjNMVko5NDUiLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX3BpY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPQogICAgICAgICAgc3RhdGU7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0Py50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmRvY3VtZW50cyA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9pbnZvaWNlX3VybCIsCiAgICAgICAgICAgIGxhYmVsOiAiSW52b2ljZSIsCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19hdF9waWNrdXAiOgogICAgICAgIHN0YXRlID0gIkF0LXBpY2t1cCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0Py50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2F0X2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJBdC1kZWxpdmVyeSI7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPQogICAgICAgICAgc3RhdGU7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vcmRlcl9kZWxpdmVyZWQiOgogICAgICAgIHN0YXRlID0gIk9yZGVyLWRlbGl2ZXJlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX3J0b19kZWxpdmVyZWQiOgogICAgICAgIHN0YXRlID0gIkNhbmNlbGxlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJSVE8iKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLmVuZD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgY29kZTogIlJUTy1EZWxpdmVyZWQiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgY29kZTogIkNhbmNlbGxlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CgogICAgICBjYXNlICJvbl9zdGF0dXNfcmVhZHlfdG9fc2hpcCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkJ1eWVyLURlbGl2ZXJ5IikgewogICAgICAgICAgICBjb25zdCB0YWdzID0gZi50YWdzIHx8IFtdOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgLi4udGFncywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29kZTogInN0YXRlIiwKICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJyZWFkeV90b19zaGlwIiwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJQMlAiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5mLAogICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgIGNvZGU6IHN0YXRlLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiBmOwogICAgfSk7CiAgICByZXR1cm4gZmluYWxGdWxmaWxsbWVudHM7CiAgfQogIHJldHVybiBkZWZhdWx0RnVsZmlsbG1lbnRzOwp9Cgphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKCWRlZmF1bHRQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7Cgljb25zdCBnZW5lcmFsUGF5bG9hZCA9IGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpOwoJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCgkJIm9uX3N0YXR1cyIsCgkJIm9uX3N0YXR1c19wYWNrZWQiLAoJCXNlc3Npb25EYXRhLAoJCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCiAgKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlID0gIkluLXByb2dyZXNzIjsKCXJldHVybiBnZW5lcmFsUGF5bG9hZDsKfQoK
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3N0YXR1c19mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc3RhdHVzX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU1RBVFVTX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2025-12-29T09:59:28.640Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 4d630042-11e4-4944-b545-13f43c81f8f1
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
            billing:
              name: ONDC buyer
              address:
                name: 'my house or door or floor #'
                building: 'my building name or house #'
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': LSP or Provider Name
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 12.9563,77.6368
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: '560076'
                      state: KA
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: 'my house or door or floor #'
                      building: 'my building name or house #'
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  person:
                    name: name_of_person
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Pepper Barbeque Chicken
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '95.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '95.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  '@ondc/org/item_quantity':
                    count: 1
                  title: 100% Wheat Thin Crust
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Fresh Tomato
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.75'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': F1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - '@ondc/org/item_id': F1
                  title: Packing charges
                  '@ondc/org/title_type': packing
                  price:
                    currency: INR
                    value: '25.00'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '10.00'
              ttl: PT1H
            payment:
              uri: https://ondc.transaction.com/payment
              tl_method: http/get
              params:
                currency: INR
                transaction_id: '3937'
                amount: '1955.65'
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.54'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '10.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  beneficiary_name: xxxxx
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:35.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_agent_assigned
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call which is sent when an agent is assigned
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZlaGljbGU6IHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbjogIjNMVko5NDUiLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX3BpY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPQogICAgICAgICAgc3RhdGU7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0Py50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmRvY3VtZW50cyA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9pbnZvaWNlX3VybCIsCiAgICAgICAgICAgIGxhYmVsOiAiSW52b2ljZSIsCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19hdF9waWNrdXAiOgogICAgICAgIHN0YXRlID0gIkF0LXBpY2t1cCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0Py50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2F0X2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJBdC1kZWxpdmVyeSI7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPQogICAgICAgICAgc3RhdGU7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vcmRlcl9kZWxpdmVyZWQiOgogICAgICAgIHN0YXRlID0gIk9yZGVyLWRlbGl2ZXJlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX3J0b19kZWxpdmVyZWQiOgogICAgICAgIHN0YXRlID0gIkNhbmNlbGxlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJSVE8iKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLmVuZD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgY29kZTogIlJUTy1EZWxpdmVyZWQiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgY29kZTogIkNhbmNlbGxlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CgogICAgICBjYXNlICJvbl9zdGF0dXNfcmVhZHlfdG9fc2hpcCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkJ1eWVyLURlbGl2ZXJ5IikgewogICAgICAgICAgICBjb25zdCB0YWdzID0gZi50YWdzIHx8IFtdOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgLi4udGFncywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29kZTogInN0YXRlIiwKICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJyZWFkeV90b19zaGlwIiwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJQMlAiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5mLAogICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgIGNvZGU6IHN0YXRlLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiBmOwogICAgfSk7CiAgICByZXR1cm4gZmluYWxGdWxmaWxsbWVudHM7CiAgfQogIHJldHVybiBkZWZhdWx0RnVsZmlsbG1lbnRzOwp9Cgphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKCWRlZmF1bHRQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7Cgljb25zdCBnZW5lcmFsUGF5bG9hZCA9IGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpOwoJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCgkJIm9uX3N0YXR1cyIsCgkJIm9uX3N0YXR1c19hZ2VudF9hc3NpZ25lZCIsCgkJc2Vzc2lvbkRhdGEsCgkJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKCSk7CglyZXR1cm4gZ2VuZXJhbFBheWxvYWQ7Cn0KCg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2025-12-29T10:56:14.199Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: af2a3c40-b7cf-42d7-a761-b782fece87cd
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
            billing:
              name: ONDC buyer
              address:
                name: 'my house or door or floor #'
                building: 'my building name or house #'
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': LSP or Provider Name
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 12.9563,77.6368
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: '560076'
                      state: KA
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: 'my house or door or floor #'
                      building: 'my building name or house #'
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  person:
                    name: name_of_person
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Pepper Barbeque Chicken
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '95.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '95.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  '@ondc/org/item_quantity':
                    count: 1
                  title: 100% Wheat Thin Crust
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Fresh Tomato
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.75'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': F1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - '@ondc/org/item_id': F1
                  title: Packing charges
                  '@ondc/org/title_type': packing
                  price:
                    currency: INR
                    value: '25.00'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '10.00'
              ttl: PT1H
            payment:
              uri: https://ondc.transaction.com/payment
              tl_method: http/get
              params:
                currency: INR
                transaction_id: '3937'
                amount: '1955.65'
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.54'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '10.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  beneficiary_name: xxxxx
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:35.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_at_pickup
    owner: BPP
    responseFor: null
    unsolicited: true
    description: Status updates - order picked up
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZlaGljbGU6IHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbjogIjNMVko5NDUiLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX3BpY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPQogICAgICAgICAgc3RhdGU7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0Py50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmRvY3VtZW50cyA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9pbnZvaWNlX3VybCIsCiAgICAgICAgICAgIGxhYmVsOiAiSW52b2ljZSIsCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19hdF9waWNrdXAiOgogICAgICAgIHN0YXRlID0gIkF0LXBpY2t1cCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0Py50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2F0X2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJBdC1kZWxpdmVyeSI7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vdXRfZm9yX2RlbGl2ZXJ5IjoKICAgICAgICBzdGF0ZSA9ICJPdXQtZm9yLWRlbGl2ZXJ5IjsKICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXS5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPQogICAgICAgICAgc3RhdGU7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19vcmRlcl9kZWxpdmVyZWQiOgogICAgICAgIHN0YXRlID0gIk9yZGVyLWRlbGl2ZXJlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgICAgLi4uZi5lbmQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuZW5kPy50aW1lLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX3J0b19kZWxpdmVyZWQiOgogICAgICAgIHN0YXRlID0gIkNhbmNlbGxlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJSVE8iKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLmVuZD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgY29kZTogIlJUTy1EZWxpdmVyZWQiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICAgICAgY29kZTogIkNhbmNlbGxlZCIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CgogICAgICBjYXNlICJvbl9zdGF0dXNfcmVhZHlfdG9fc2hpcCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkJ1eWVyLURlbGl2ZXJ5IikgewogICAgICAgICAgICBjb25zdCB0YWdzID0gZi50YWdzIHx8IFtdOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgdGFnczogWwogICAgICAgICAgICAgICAgLi4udGFncywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29kZTogInN0YXRlIiwKICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJyZWFkeV90b19zaGlwIiwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJQMlAiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5mLAogICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgIGNvZGU6IHN0YXRlLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiBmOwogICAgfSk7CiAgICByZXR1cm4gZmluYWxGdWxmaWxsbWVudHM7CiAgfQogIHJldHVybiBkZWZhdWx0RnVsZmlsbG1lbnRzOwp9Cgphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKCWRlZmF1bHRQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7Cgljb25zdCBnZW5lcmFsUGF5bG9hZCA9IGNyZWF0ZUdlbmVyaWNPblN0YXR1cyhkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpOwoJZ2VuZXJhbFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCgkJIm9uX3N0YXR1cyIsCgkJIm9uX3N0YXR1c19hdF9waWNrdXAiLAoJCXNlc3Npb25EYXRhLAoJCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCgkpOwoJcmV0dXJuIGdlbmVyYWxQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2026-02-02T10:33:47.037Z'
          transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
          message_id: 198a78e0-4eae-451a-b75d-1b6d935a6ddb
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C1
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
              - id: C14
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: C16
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI1
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG3
              - id: I2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: item
              - id: C2
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG1
              - id: C7
                fulfillment_id: F1
                quantity:
                  count: 1
                parent_item_id: DI2
                tags:
                  - code: type
                    list:
                      - code: type
                        value: customization
                  - code: parent
                    list:
                      - code: id
                        value: CG2
            billing:
              name: ONDC buyer
              address:
                name: 'my house or door or floor #'
                building: 'my building name or house #'
                locality: my street name
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560037'
              email: nobody@nomail.com
              phone: '9886098860'
              created_at: '2025-01-08T09:00:00.000Z'
              updated_at: '2025-01-08T09:00:00.000Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': LSP or Provider Name
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 12.9563,77.6368
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: '560076'
                      state: KA
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
                end:
                  location:
                    gps: 12.4535,77.9283
                    address:
                      name: 'my house or door or floor #'
                      building: 'my building name or house #'
                      locality: my street name
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560037'
                  person:
                    name: name_of_person
                  contact:
                    phone: '9886098860'
                    email: nobody@nomail.com
            quote:
              price:
                currency: INR
                value: '1955.65'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: New Hand Tossed
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Pepper Barbeque Chicken
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '95.00'
                  item:
                    parent_item_id: DI1
                    price:
                      currency: INR
                      value: '95.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Farm House Pizza
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '269.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '269.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  '@ondc/org/item_quantity':
                    count: 1
                  title: 100% Wheat Thin Crust
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '0.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Large
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '450.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '450.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Grilled Mushrooms
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Fresh Tomato
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '80.00'
                  item:
                    parent_item_id: DI2
                    price:
                      currency: INR
                      value: '80.00'
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '0.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C16
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.75'
                  item:
                    parent_item_id: DI1
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': I1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.45'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: item
                - '@ondc/org/item_id': C2
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG1
                - '@ondc/org/item_id': C7
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '22.50'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG2
                - '@ondc/org/item_id': C14
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': C15
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '4.00'
                  item:
                    parent_item_id: DI2
                    tags:
                      - code: type
                        list:
                          - code: type
                            value: customization
                      - code: parent
                        list:
                          - code: id
                            value: CG3
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': F1
                  title: Tax
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
                  item:
                    tags:
                      - code: quote
                        list:
                          - code: type
                            value: fulfillment
                - '@ondc/org/item_id': F1
                  title: Packing charges
                  '@ondc/org/title_type': packing
                  price:
                    currency: INR
                    value: '25.00'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '10.00'
              ttl: PT1H
            payment:
              uri: https://ondc.transaction.com/payment
              tl_method: http/get
              params:
                currency: INR
                transaction_id: '3937'
                amount: '1955.65'
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.54'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '10.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  beneficiary_name: xxxxx
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
                  bank_name: xxxx
                  branch_name: xxxx
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:35.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        on_status_fulfillments: $.message.order.fulfillments[*]
        order_state: $.message.order.state
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_order_picked
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status call when the rider picks up the order
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZlaGljbGU6IHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbjogIjNMVko5NDUiLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX3BpY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfYXRfcGlja3VwIjoKICAgICAgICBzdGF0ZSA9ICJBdC1waWNrdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19hdF9kZWxpdmVyeSI6CiAgICAgICAgc3RhdGUgPSAiQXQtZGVsaXZlcnkiOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfb3V0X2Zvcl9kZWxpdmVyeSI6CiAgICAgICAgc3RhdGUgPSAiT3V0LWZvci1kZWxpdmVyeSI7CiAgICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uc3RhdGUuZGVzY3JpcHRvci5jb2RlID0KICAgICAgICAgIHN0YXRlOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfb3JkZXJfZGVsaXZlcmVkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1kZWxpdmVyZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLmVuZD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19ydG9fZGVsaXZlcmVkIjoKICAgICAgICBzdGF0ZSA9ICJDYW5jZWxsZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiUlRPIikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJSVE8tRGVsaXZlcmVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJDYW5jZWxsZWQiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwoKICAgICAgY2FzZSAib25fc3RhdHVzX3JlYWR5X3RvX3NoaXAiOgogICAgICAgIHN0YXRlID0gIlBhY2tlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJCdXllci1EZWxpdmVyeSIpIHsKICAgICAgICAgICAgY29uc3QgdGFncyA9IGYudGFncyB8fCBbXTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICAgIC4uLnRhZ3MsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJzdGF0ZSIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAicmVhZHlfdG9fc2hpcCIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJyb3V0aW5nIiwKICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ0eXBlIiwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiUDJQIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uZiwKICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICBjb2RlOiBzdGF0ZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gZjsKICAgIH0pOwogICAgcmV0dXJuIGZpbmFsRnVsZmlsbG1lbnRzOwogIH0KICByZXR1cm4gZGVmYXVsdEZ1bGZpbGxtZW50czsKfQoKYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJY29uc3QgZ2VuZXJhbFBheWxvYWQgPSBjcmVhdGVHZW5lcmljT25TdGF0dXMoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKTsKCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAoJCSJvbl9zdGF0dXMiLAoJCSJvbl9zdGF0dXNfb3JkZXJfcGlja2VkIiwKCQlzZXNzaW9uRGF0YSwKCQlnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwoJKTsKCXJldHVybiBnZW5lcmFsUGF5bG9hZDsKfQoK
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2025-12-29T11:01:59.338Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 4435a799-145f-4b9e-888c-0d4743f308cf
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Order-picked-up
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:03:32.230Z'
                      end: '2024-12-23T07:08:32.230Z'
                    timestamp: '2024-12-23T07:25:32.230Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:33:32.230Z'
                      end: '2024-12-23T07:04:32.230Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: 'no'
                      - code: url_enabled
                        value: 'yes'
                      - code: url
                        value: https://MockNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:25:32.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
      inputs: {}
  - api: track
    action_id: track
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Track sent to track the order
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyX2lkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CglyZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: track
          timestamp: '2025-12-29T11:04:37.868Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 5308242a-a069-44da-b746-07847d3c62bc
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order_id: O1
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_track
    action_id: on_track
    owner: BPP
    responseFor: track
    unsolicited: false
    description: On-track sent by the Seller Np in response to the track
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_track
          timestamp: '2025-12-29T11:06:29.036Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: fb346f40-c28b-4cb8-a0db-7a8d00a7041d
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          tracking:
            id: F1
            location:
              gps: 12.9740,77.6134
              time:
                timestamp: '2025-01-08T06:20:00.000Z'
              updated_at: '2025-01-08T06:30:00.000Z'
            url: https://MockNP.com/ondc/tracking_url
            status: active
            tags:
              - code: order
                list:
                  - code: id
                    value: O1
              - code: config
                list:
                  - code: attr
                    value: tracking.location.gps
                  - code: type
                    value: live_poll
              - code: path
                list:
                  - code: lat_lng
                    value: 12.9740,77.6134
                  - code: sequence
                    value: '1'
              - code: path
                list:
                  - code: lat_lng
                    value: 12.9740,77.6136
                  - code: sequence
                    value: '2'
              - code: path
                list:
                  - code: lat_lng
                    value: 12.9740,77.6136
                  - code: sequence
                    value: '3'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_status
    action_id: on_status_at_delivery
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status which marks that the order is out for delivery
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZlaGljbGU6IHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbjogIjNMVko5NDUiLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX3BpY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfYXRfcGlja3VwIjoKICAgICAgICBzdGF0ZSA9ICJBdC1waWNrdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19hdF9kZWxpdmVyeSI6CiAgICAgICAgc3RhdGUgPSAiQXQtZGVsaXZlcnkiOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfb3V0X2Zvcl9kZWxpdmVyeSI6CiAgICAgICAgc3RhdGUgPSAiT3V0LWZvci1kZWxpdmVyeSI7CiAgICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uc3RhdGUuZGVzY3JpcHRvci5jb2RlID0KICAgICAgICAgIHN0YXRlOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfb3JkZXJfZGVsaXZlcmVkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1kZWxpdmVyZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLmVuZD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19ydG9fZGVsaXZlcmVkIjoKICAgICAgICBzdGF0ZSA9ICJDYW5jZWxsZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiUlRPIikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJSVE8tRGVsaXZlcmVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJDYW5jZWxsZWQiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwoKICAgICAgY2FzZSAib25fc3RhdHVzX3JlYWR5X3RvX3NoaXAiOgogICAgICAgIHN0YXRlID0gIlBhY2tlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJCdXllci1EZWxpdmVyeSIpIHsKICAgICAgICAgICAgY29uc3QgdGFncyA9IGYudGFncyB8fCBbXTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICAgIC4uLnRhZ3MsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJzdGF0ZSIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAicmVhZHlfdG9fc2hpcCIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJyb3V0aW5nIiwKICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ0eXBlIiwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiUDJQIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uZiwKICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICBjb2RlOiBzdGF0ZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gZjsKICAgIH0pOwogICAgcmV0dXJuIGZpbmFsRnVsZmlsbG1lbnRzOwogIH0KICByZXR1cm4gZGVmYXVsdEZ1bGZpbGxtZW50czsKfQoKYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJY29uc3QgZ2VuZXJhbFBheWxvYWQgPSBjcmVhdGVHZW5lcmljT25TdGF0dXMoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKTsKCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAoJCSJvbl9zdGF0dXMiLAoJCSJvbl9zdGF0dXNfYXRfZGVsaXZlcnkiLAoJCXNlc3Npb25EYXRhLAoJCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCgkpOwoJcmV0dXJuIGdlbmVyYWxQYXlsb2FkOwp9Cg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2025-12-29T11:08:18.485Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 7a8023f6-489f-4c4f-8ab9-7b528789446d
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: In-progress
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Out-for-delivery
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:03:32.230Z'
                      end: '2024-12-23T07:08:32.230Z'
                    timestamp: '2024-12-23T07:25:32.230Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:33:32.230Z'
                      end: '2024-12-23T07:04:32.230Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: 'yes'
                      - code: url_enabled
                        value: 'no'
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:35:32.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
  - api: on_status
    action_id: on_status_order_delivered
    owner: BPP
    responseFor: null
    unsolicited: true
    description: On-status which marks the order as delivered
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0KICAgIC9QKChcZCspWSk/KChcZCspTSk/KChcZCspVyk/KChcZCspRCk/VD8oKFxkKylIKT8oKFxkKylNKT8oKFxkKylTKT8vOwoKICBjb25zdCBzcGxpdFRpbWUgPSBkdXJSRS5leGVjKGR1cmF0aW9uKTsKICBpZiAoIXNwbGl0VGltZSkgewogICAgcmV0dXJuIDA7CiAgfQoKICBjb25zdCB5ZWFycyA9IE51bWJlcihzcGxpdFRpbWU/LlsyXSkgfHwgMDsKICBjb25zdCBtb250aHMgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNF0pIHx8IDA7CiAgY29uc3Qgd2Vla3MgPSBOdW1iZXIoc3BsaXRUaW1lPy5bNl0pIHx8IDA7CiAgY29uc3QgZGF5cyA9IE51bWJlcihzcGxpdFRpbWU/Lls4XSkgfHwgMDsKICBjb25zdCBob3VycyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMF0pIHx8IDA7CiAgY29uc3QgbWludXRlcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxMl0pIHx8IDA7CiAgY29uc3Qgc2Vjb25kcyA9IE51bWJlcihzcGxpdFRpbWU/LlsxNF0pIHx8IDA7CgogIGNvbnN0IHJlc3VsdCA9CiAgICB5ZWFycyAqIDMxNTM2MDAwICsKICAgIG1vbnRocyAqIDI2MjgyODggKwogICAgd2Vla3MgKiA2MDQ4MDAgKwogICAgZGF5cyAqIDg2NDAwICsKICAgIGhvdXJzICogMzYwMCArCiAgICBtaW51dGVzICogNjAgKwogICAgc2Vjb25kczsKCiAgcmV0dXJuIHJlc3VsdDsKfTsKZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKICBpZiAoaW5pdGlhbGl6ZSkgewogICAgY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKICAgIHNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwogICAgc2F2ZWRCaWxsaW5nLnVwZGF0ZWRfYXQgPSBuZXdJc287CiAgfQogIHJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlR2VuZXJpY09uU3RhdHVzKAoJZXhpc3RpbmdQYXlsb2FkLAoJc2Vzc2lvbkRhdGEKKSB7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5pZCA9IHNlc3Npb25EYXRhLm9yZGVyX2lkWzBdOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXM7CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCS8vIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07Cgljb25zdCB0aW1lSVNPID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwoJZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJU087CglleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKCWV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwoJcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgYWN0aW9uLAogIGFjdGlvbklkLAogIHNlc3Npb25EYXRhLAogIGRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CiAgaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKICB9CiAgaWYgKGFjdGlvbiA9PT0gIm9uX3N0YXR1cyIpIHsKICAgIGxldCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zdCB0YWdzID0gewogICAgICB0YWdzOiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogInJvdXRpbmciLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInR5cGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiUDJIMlAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJ0cmFja2luZyIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiZ3BzX2VuYWJsZWQiLAogICAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVybF9lbmFibGVkIiwKICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICB2YWx1ZTogImh0dHBzOi8vc2VsbGVyTlAuY29tL29uZGMvdHJhY2tpbmdfdXJsIiwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgXSwKICAgIH07CiAgICBsZXQgZmluYWxGdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzOwogICAgaWYgKCFzZXNzaW9uRGF0YS5vbl9zdGF0dXNfZnVsZmlsbG1lbnRzKSB7CiAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDEwICogMTAwMCAqIDYwKTsKICAgICAgY29uc3Qgc3RhcnRfZW5kID0gbmV3IERhdGUodGltZS5nZXRUaW1lKCkgKyAxMCAqIDEwMDAgKiA2MCkudG9JU09TdHJpbmcoKTsKICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMKICAgICAgICAvLyAuZmlsdGVyKChmKSA9PiBmLnR5cGUgPT0gIkRlbGl2ZXJ5IikKICAgICAgICAubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgICAuLi5mLnN0YXJ0LAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBzdGFydF9lbmQsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRfZW5kLAogICAgICAgICAgICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLmdldFRpbWUoKSArCiAgICAgICAgICAgICAgICAgICAgICAxMDAwICogaXNvRHVyVG9TZWMoZlsiQG9uZGMvb3JnL1RBVCJdIHx8ICJQVDBIIikKICAgICAgICAgICAgICAgICAgICApLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdGFnczogdGFncy50YWdzLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgfSk7CiAgICAgIC8vIGZ1bGZpbGxtZW50cyA9IGZ1bGZpbGxtZW50cy5maWx0ZXIoKGYpID0+IGYudHlwZSAhPSAiRGVsaXZlcnkiKTsKICAgICAgLy8gZmluYWxGdWxmaWxsbWVudHMgPSB7IC4uLmZpbmFsRnVsZmlsbG1lbnRzLCAuLi5mdWxmaWxsbWVudHMgfTsKICAgIH0KICAgIGxldCBzdGF0ZSA9ICJQZW5kaW5nIjsKICAgIHN3aXRjaCAoYWN0aW9uSWQpIHsKICAgICAgY2FzZSAib25fc3RhdHVzX3BhY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiUGFja2VkIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX2FnZW50X2Fzc2lnbmVkIjoKICAgICAgICBzdGF0ZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICAgICAgbmFtZTogIm1vY2stYWdlbnQiLAogICAgICAgICAgICAgICAgcGhvbmU6ICI5ODg2MDk4ODYwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHZlaGljbGU6IHsKICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbjogIjNMVko5NDUiLAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmOyAvLyBsZWF2ZSBvdGhlciB0eXBlcyB1bmNoYW5nZWQKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAib25fc3RhdHVzX29yZGVyX3BpY2tlZCI6CiAgICAgICAgc3RhdGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICBmaW5hbEZ1bGZpbGxtZW50cyA9IGZpbmFsRnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewogICAgICAgICAgaWYgKGYudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgc3RhcnQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQsCiAgICAgICAgICAgICAgICB0aW1lOiB7CiAgICAgICAgICAgICAgICAgIC4uLmYuc3RhcnQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfYXRfcGlja3VwIjoKICAgICAgICBzdGF0ZSA9ICJBdC1waWNrdXAiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgICAgLi4uZi5zdGFydCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5zdGFydD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19hdF9kZWxpdmVyeSI6CiAgICAgICAgc3RhdGUgPSAiQXQtZGVsaXZlcnkiOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfb3V0X2Zvcl9kZWxpdmVyeSI6CiAgICAgICAgc3RhdGUgPSAiT3V0LWZvci1kZWxpdmVyeSI7CiAgICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uc3RhdGUuZGVzY3JpcHRvci5jb2RlID0KICAgICAgICAgIHN0YXRlOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJvbl9zdGF0dXNfb3JkZXJfZGVsaXZlcmVkIjoKICAgICAgICBzdGF0ZSA9ICJPcmRlci1kZWxpdmVyZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgLi4uZiwKICAgICAgICAgICAgICBlbmQ6IHsKICAgICAgICAgICAgICAgIC4uLmYuZW5kLAogICAgICAgICAgICAgICAgdGltZTogewogICAgICAgICAgICAgICAgICAuLi5mLmVuZD8udGltZSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZjsgLy8gbGVhdmUgb3RoZXIgdHlwZXMgdW5jaGFuZ2VkCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm9uX3N0YXR1c19ydG9fZGVsaXZlcmVkIjoKICAgICAgICBzdGF0ZSA9ICJDYW5jZWxsZWQiOwogICAgICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgICAgICBpZiAoZi50eXBlID09PSAiUlRPIikgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIC4uLmYsCiAgICAgICAgICAgICAgZW5kOiB7CiAgICAgICAgICAgICAgICAuLi5mLmVuZCwKICAgICAgICAgICAgICAgIHRpbWU6IHsKICAgICAgICAgICAgICAgICAgLi4uZi5lbmQ/LnRpbWUsCiAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJSVE8tRGVsaXZlcmVkIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJDYW5jZWxsZWQiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwoKICAgICAgY2FzZSAib25fc3RhdHVzX3JlYWR5X3RvX3NoaXAiOgogICAgICAgIHN0YXRlID0gIlBhY2tlZCI7CiAgICAgICAgZmluYWxGdWxmaWxsbWVudHMgPSBmaW5hbEZ1bGZpbGxtZW50cy5tYXAoKGYpID0+IHsKICAgICAgICAgIGlmIChmLnR5cGUgPT09ICJCdXllci1EZWxpdmVyeSIpIHsKICAgICAgICAgICAgY29uc3QgdGFncyA9IGYudGFncyB8fCBbXTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi5mLAogICAgICAgICAgICAgIHRhZ3M6IFsKICAgICAgICAgICAgICAgIC4uLnRhZ3MsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJzdGF0ZSIsCiAgICAgICAgICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAicmVhZHlfdG9fc2hpcCIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJyb3V0aW5nIiwKICAgICAgICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICJ0eXBlIiwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiUDJQIiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGY7IC8vIGxlYXZlIG90aGVyIHR5cGVzIHVuY2hhbmdlZAogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgICAgICBicmVhazsKICAgIH0KICAgIGZpbmFsRnVsZmlsbG1lbnRzID0gZmluYWxGdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICAgIGlmIChmLnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uZiwKICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICAgICAgICBjb2RlOiBzdGF0ZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gZjsKICAgIH0pOwogICAgcmV0dXJuIGZpbmFsRnVsZmlsbG1lbnRzOwogIH0KICByZXR1cm4gZGVmYXVsdEZ1bGZpbGxtZW50czsKfQoKYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJY29uc3QgZ2VuZXJhbFBheWxvYWQgPSBjcmVhdGVHZW5lcmljT25TdGF0dXMoZGVmYXVsdFBheWxvYWQsIHNlc3Npb25EYXRhKTsKCWdlbmVyYWxQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAoJCSJvbl9zdGF0dXMiLAoJCSJvbl9zdGF0dXNfb3JkZXJfZGVsaXZlcmVkIiwKCQlzZXNzaW9uRGF0YSwKCQlnZW5lcmFsUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwoJKTsKCXJldHVybiBnZW5lcmFsUGF5bG9hZDsKfQoK
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpIHsKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfaXRlbXMKICBpZiAoIXNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zIHx8IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheWxvYWRfY2l0eQogIGlmICghc2Vzc2lvbkRhdGEucGF5bG9hZF9jaXR5KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bG9hZF9jaXR5IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QQVlMT0FEX0NJVFkiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TRUxFQ1RFRF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwcm92aWRlcgogIGlmICghc2Vzc2lvbkRhdGEucHJvdmlkZXIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwcm92aWRlciBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUFJPVklERVIiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBxdW90ZQogIGlmICghc2Vzc2lvbkRhdGEucXVvdGUgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnF1b3RlICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHF1b3RlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19RVU9URSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2l0ZW1zCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcyB8fAogICAgc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgdGF0CiAgaWYgKCFzZXNzaW9uRGF0YS50YXQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyB0YXQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1RBVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGl0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5pdGVtcyB8fCBzZXNzaW9uRGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBpdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiaWxsaW5nCiAgaWYgKCFzZXNzaW9uRGF0YS5iaWxsaW5nIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5iaWxsaW5nICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGJpbGxpbmcgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JJTExJTkciLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBmdWxmaWxsbWVudHMKICBpZiAoIXNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cyB8fCBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9ucF9mZWVzCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9ucF9mZWVzKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfbnBfZmVlcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfTlBfRkVFUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJwcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYnBwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJwcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBicHBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JQUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIGJhcF90ZXJtcwogIGlmICghc2Vzc2lvbkRhdGEuYmFwX3Rlcm1zIHx8IHNlc3Npb25EYXRhLmJhcF90ZXJtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiYXBfdGVybXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0JBUF9URVJNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHN0YXRlCiAgaWYgKCFzZXNzaW9uRGF0YS5zdGF0ZSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHN0YXRlIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19TVEFURSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHBheW1lbnQKICBpZiAoIXNlc3Npb25EYXRhLnBheW1lbnQgfHwgdHlwZW9mIHNlc3Npb25EYXRhLnBheW1lbnQgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcGF5bWVudCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTUVOVCIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3N0YXR1c19mdWxmaWxsbWVudHMgKE5FVykKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEub25fc3RhdHVzX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zdGF0dXNfZnVsZmlsbG1lbnRzIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TVEFUVVNfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET11
          action: on_status
          timestamp: '2025-12-29T11:15:59.263Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 1e4c08e3-28c0-48b8-8e7a-736fc58752e2
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Completed
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': 24x7 Wellness Forever - ANDHERI FOUR BUNGLOW
                state:
                  descriptor:
                    code: Order-delivered
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:03:32.230Z'
                      end: '2024-12-23T07:08:32.230Z'
                    timestamp: '2024-12-23T07:25:32.230Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:33:32.230Z'
                      end: '2024-12-23T07:04:32.230Z'
                    timestamp: '2024-12-23T07:45:32.230Z'
                tags:
                  - code: routing
                    list:
                      - code: type
                        value: P2P
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: 'yes'
                      - code: url_enabled
                        value: 'no'
                      - code: url
                        value: https://sellerNP.com/ondc/tracking_url
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            documents:
              - url: https://invoice_url
                label: Invoice
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:45:32.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        on_status_fulfillments: $.message.order.fulfillments[*]
        last_updated_at: $.message.order.updated_at
      inputs: {}
transaction_history:
  - action_id: select0
    payload:
      context:
        domain: ONDC:RET11
        action: select
        timestamp: '2026-02-13T11:21:37.435Z'
        transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
        message_id: 75ae1777-435a-4c0b-89df-51af58643bab
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: std:011
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
            - id: C1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
            - id: C7
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
            - id: C14
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
            - id: C1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
            - id: I1
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
            - id: C1
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
            - id: C7
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
            - id: C14
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
          fulfillments:
            - end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    area_code: '400053'
    action: select
    saved_info: {}
  - action_id: on_select_out_of_stock
    payload:
      context:
        domain: ONDC:RET11
        action: on_select
        timestamp: '2026-02-13T11:21:38.604Z'
        transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
        message_id: 75ae1777-435a-4c0b-89df-51af58643bab
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
              fulfillment_id: F1
            - id: C1
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
            - id: C7
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
            - id: C14
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
            - id: C1
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
            - id: I1
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
              fulfillment_id: F1
            - id: C1
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
            - id: C7
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
            - id: C14
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
              fulfillment_id: F1
          fulfillments:
            - id: F1
              type: Delivery
              '@ondc/org/provider_name': LSP or Provider Name
              tracking: false
              '@ondc/org/category': Immediate Delivery
              '@ondc/org/TAT': PT60M
              state:
                descriptor:
                  code: Serviceable
          quote:
            price:
              currency: INR
              value: '1385.40'
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Farm House Pizza
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '269'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '269.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
              - '@ondc/org/item_id': I1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.45'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '13.45'
              - '@ondc/org/item_id': C1
                '@ondc/org/item_quantity':
                  count: 1
                title: New Hand Tossed
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '0'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '0.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '0.00'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '0.00'
              - '@ondc/org/item_id': C7
                '@ondc/org/item_quantity':
                  count: 1
                title: Medium
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '275'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '275.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C7
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.75'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '13.75'
              - '@ondc/org/item_id': C14
                '@ondc/org/item_quantity':
                  count: 1
                title: Grilled Mushrooms
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '80'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '80.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C14
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '4.00'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '4.00'
              - '@ondc/org/item_id': C1
                '@ondc/org/item_quantity':
                  count: 1
                title: New Hand Tossed
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '0'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '0.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '0.00'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '0.00'
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Farm House Pizza
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '269'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '269.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
              - '@ondc/org/item_id': I1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.45'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '13.45'
              - '@ondc/org/item_id': C1
                '@ondc/org/item_quantity':
                  count: 1
                title: New Hand Tossed
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '0'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '0.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '0.00'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '0.00'
              - '@ondc/org/item_id': C7
                '@ondc/org/item_quantity':
                  count: 1
                title: Medium
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '275'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '275.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C7
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.75'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '13.75'
              - '@ondc/org/item_id': C14
                '@ondc/org/item_quantity':
                  count: 1
                title: Grilled Mushrooms
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '80'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '80.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
              - '@ondc/org/item_id': C14
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '4.00'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '4.00'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '50.00'
                item:
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '50.00'
              - '@ondc/org/item_id': F1
                title: Packing charges
                '@ondc/org/title_type': packing
                price:
                  currency: INR
                  value: '25.00'
                item:
                  quantity:
                    available:
                      count: '0'
                    maximum:
                      count: '0'
                  price:
                    currency: INR
                    value: '25.00'
            ttl: P1D
      error:
        type: DOMAIN-ERROR
        code: '40002'
        message: '[{"dynamic_item_id":"P0","item_id":"I1","error":"400002"}]'
    action: on_select
    saved_info: {}
  - action_id: select
    payload:
      context:
        domain: ONDC:RET11
        action: select
        timestamp: '2026-02-13T11:21:41.779Z'
        transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
        message_id: 73c9c6fc-cf46-4ab6-9edb-cea2a12653e4
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: std:011
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
            - id: C1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG1
            - id: C7
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG2
            - id: C14
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG3
            - id: I1
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
            - id: C1
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG1
            - id: C7
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG2
            - id: C14
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG3
          fulfillments:
            - end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    area_code: '400053'
    action: select
    saved_info: {}
  - action_id: on_select
    payload:
      context:
        domain: ONDC:RET11
        action: on_select
        timestamp: '2026-02-13T11:21:41.821Z'
        transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
        message_id: 73c9c6fc-cf46-4ab6-9edb-cea2a12653e4
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
              fulfillment_id: F1
            - id: C1
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG1
              fulfillment_id: F1
            - id: C7
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG2
              fulfillment_id: F1
            - id: C14
              parent_item_id: P0
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG3
              fulfillment_id: F1
            - id: I1
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
              fulfillment_id: F1
            - id: C1
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG1
              fulfillment_id: F1
            - id: C7
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG2
              fulfillment_id: F1
            - id: C14
              parent_item_id: P1
              location_id: L1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG3
              fulfillment_id: F1
          fulfillments:
            - id: F1
              type: Delivery
              '@ondc/org/provider_name': LSP or Provider Name
              tracking: false
              '@ondc/org/category': Immediate Delivery
              '@ondc/org/TAT': PT60M
              state:
                descriptor:
                  code: Serviceable
          quote:
            price:
              currency: INR
              value: '1385.40'
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Farm House Pizza
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '269'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '269.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
              - '@ondc/org/item_id': I1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.45'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
              - '@ondc/org/item_id': C1
                '@ondc/org/item_quantity':
                  count: 1
                title: New Hand Tossed
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '0'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '0.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG1
              - '@ondc/org/item_id': C1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '0.00'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG1
              - '@ondc/org/item_id': C7
                '@ondc/org/item_quantity':
                  count: 1
                title: Medium
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '275'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '275.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG2
              - '@ondc/org/item_id': C7
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.75'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG2
              - '@ondc/org/item_id': C14
                '@ondc/org/item_quantity':
                  count: 1
                title: Grilled Mushrooms
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '80'
                item:
                  parent_item_id: P0
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '80.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG3
              - '@ondc/org/item_id': C14
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '4.00'
                item:
                  parent_item_id: P0
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG3
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Farm House Pizza
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '269'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '269.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
              - '@ondc/org/item_id': I1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.45'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: item
              - '@ondc/org/item_id': C1
                '@ondc/org/item_quantity':
                  count: 1
                title: New Hand Tossed
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '0'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '0.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG1
              - '@ondc/org/item_id': C1
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '0.00'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG1
              - '@ondc/org/item_id': C7
                '@ondc/org/item_quantity':
                  count: 1
                title: Medium
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '275'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '275.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG2
              - '@ondc/org/item_id': C7
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '13.75'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG2
              - '@ondc/org/item_id': C14
                '@ondc/org/item_quantity':
                  count: 1
                title: Grilled Mushrooms
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '80'
                item:
                  parent_item_id: P1
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '80.00'
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG3
              - '@ondc/org/item_id': C14
                title: Tax
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '4.00'
                item:
                  parent_item_id: P1
                  tags:
                    - code: type
                      list:
                        - code: type
                          value: customization
                    - code: parent
                      list:
                        - code: id
                          value: CG3
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '50.00'
              - '@ondc/org/item_id': F1
                title: Packing charges
                '@ondc/org/title_type': packing
                price:
                  currency: INR
                  value: '25.00'
            ttl: P1D
    action: on_select
    saved_info: {}
  - action_id: init
    payload:
      context:
        domain: ONDC:RET11
        action: init
        timestamp: '2026-02-13T11:21:41.862Z'
        transaction_id: 70023cc5-3fe9-4b68-9205-aa2ae40f7d96
        message_id: 44e32df8-3485-40b3-86ff-2da0227052d0
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
              fulfillment_id: F1
            - id: C1
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG1
              fulfillment_id: F1
            - id: C7
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG2
              fulfillment_id: F1
            - id: C14
              parent_item_id: P0
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG3
              fulfillment_id: F1
            - id: I1
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: item
              fulfillment_id: F1
            - id: C1
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG1
              fulfillment_id: F1
            - id: C7
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG2
              fulfillment_id: F1
            - id: C14
              parent_item_id: P1
              location_id: L1
              quantity:
                count: 1
              tags:
                - code: type
                  list:
                    - code: type
                      value: customization
                - code: parent
                  list:
                    - code: id
                      value: CG3
              fulfillment_id: F1
          billing:
            name: ONDC buyer
            address:
              name: 'my house or door or floor #'
              building: 'my building name or house #'
              locality: my street name
              city: my city
              state: my state
              country: IND
              area_code: '400053'
            email: nobody@nomail.com
            phone: '9886098860'
            created_at: '2026-02-13T11:21:41.862Z'
            updated_at: '2026-02-13T11:21:41.862Z'
          fulfillments:
            - id: F1
              type: Delivery
              end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    name: 'my house or door or floor #'
                    building: 'my building name or house #'
                    locality: my street name
                    city: my city
                    state: my state
                    country: IND
                    area_code: '400053'
                contact:
                  phone: '9886098860'
    action: init
    saved_info: {}
validationLib: ''
helperLib: >-
  Y29uc3QgZ2VuZXJhdGVRdW90ZVRyYWlsID0gKAoJYnJlYWt1cCwKCWl0ZW1zLAoJb3B0aW9ucywKCXBhcmVudEl0ZW1JZAopID0+IHsKCWNvbnN0IHsKCQlmdWxmaWxsbWVudFN0YXRlID0gIlBSRSIsCgkJaXNSVE8gPSBmYWxzZSwKCQlwYXJ0Q2FuY2VsID0gZmFsc2UsCgl9ID0gb3B0aW9uczsKCWNvbnN0IHF1b3RlVHJhaWxUYWdzID0gW107CgoJZnVuY3Rpb24gZXh0cmFjdFR5cGUodGFncykgewoJCWNvbnN0IHR5cGVUYWcgPSB0YWdzLmZpbmQoKHRhZykgPT4gdGFnLmNvZGUgPT09ICJ0eXBlIik7CgkJaWYgKCF0eXBlVGFnIHx8ICF0eXBlVGFnLmxpc3QpIHJldHVybiBudWxsOwoKCQljb25zdCB0eXBlSXRlbSA9IHR5cGVUYWcubGlzdC5maW5kKChpdGVtKSA9PiBpdGVtLmNvZGUgPT09ICJ0eXBlIik7CgkJcmV0dXJuIHR5cGVJdGVtID8gdHlwZUl0ZW0udmFsdWUgOiBudWxsOwoJfQoKCWJyZWFrdXAuZm9yRWFjaCgoaXRlbSkgPT4gewoJCWlmICgKCQkJaXRlbVsiQG9uZGMvb3JnL3RpdGxlX3R5cGUiXSA9PT0gImRlbGl2ZXJ5IiB8fAoJCQlpdGVtWyJAb25kYy9vcmcvdGl0bGVfdHlwZSJdID09PSAicGFja2luZyIKCQkpIHsKCQkJaWYgKGZ1bGZpbGxtZW50U3RhdGUgPT09ICJQUkUiICYmICFwYXJ0Q2FuY2VsKSB7CgkJCQlxdW90ZVRyYWlsVGFncy5wdXNoKHsKCQkJCQljb2RlOiAicXVvdGVfdHJhaWwiLAoJCQkJCWxpc3Q6IFsKCQkJCQkJeyBjb2RlOiAidHlwZSIsIHZhbHVlOiBpdGVtWyJAb25kYy9vcmcvdGl0bGVfdHlwZSJdIH0sCgkJCQkJCXsgY29kZTogImlkIiwgdmFsdWU6IGl0ZW1bIkBvbmRjL29yZy9pdGVtX2lkIl0gfSwKCQkJCQkJeyBjb2RlOiAiY3VycmVuY3kiLCB2YWx1ZTogIklOUiIgfSwKCQkJCQkJeyBjb2RlOiAidmFsdWUiLCB2YWx1ZTogYC0ke2l0ZW0ucHJpY2UudmFsdWV9YCB9LAoJCQkJCV0sCgkJCQl9KTsKCQkJfQoJCX0gZWxzZSBpZiAoaXRlbVsiQG9uZGMvb3JnL3RpdGxlX3R5cGUiXSA9PT0gIm9mZmVyIikgewoJCQlxdW90ZVRyYWlsVGFncy5wdXNoKHsKCQkJCWNvZGU6ICJxdW90ZV90cmFpbCIsCgkJCQlsaXN0OiBbCgkJCQkJeyBjb2RlOiAidHlwZSIsIHZhbHVlOiBpdGVtWyJAb25kYy9vcmcvdGl0bGVfdHlwZSJdIH0sCgkJCQkJeyBjb2RlOiAiaWQiLCB2YWx1ZTogaXRlbVsiQG9uZGMvb3JnL2l0ZW1faWQiXSB9LAoJCQkJCXsgY29kZTogImN1cnJlbmN5IiwgdmFsdWU6ICJJTlIiIH0sCgkJCQkJewoJCQkJCQljb2RlOiAidmFsdWUiLAoJCQkJCQl2YWx1ZTogYCR7TWF0aC5hYnMocGFyc2VJbnQoaXRlbS5wcmljZS52YWx1ZSkpfWAsCgkJCQkJfSwKCQkJCV0sCgkJCX0pOwoJCX0gZWxzZSBpZiAoCgkJCXBhcnNlSW50KGl0ZW0ucHJpY2UudmFsdWUpICE9PSAwICYmCgkJCSghcGFyZW50SXRlbUlkIHx8IGl0ZW0/Lml0ZW0/LnBhcmVudF9pdGVtX2lkID09PSBwYXJlbnRJdGVtSWQpCgkJKSB7CgkJCWNvbnNvbGUubG9nKCJpdGVtczoiLCBpdGVtcyk7CgkJCWNvbnNvbGUubG9nKCJpdGVte2FzZGFzIiwgaXRlbVsiQG9uZGMvb3JnL2l0ZW1faWQiXSk7CgoJCQljb25zdCB0YWdzID0gaXRlbXMuZmluZCgKCQkJCShhbGxJdGVtKSA9PiBhbGxJdGVtLmlkID09PSBpdGVtWyJAb25kYy9vcmcvaXRlbV9pZCJdCgkJCSkudGFnczsKCgkJCWNvbnN0IHN1YlR5cGUgPSBleHRyYWN0VHlwZSh0YWdzKTsKCgkJCXF1b3RlVHJhaWxUYWdzLnB1c2goewoJCQkJY29kZTogInF1b3RlX3RyYWlsIiwKCQkJCWxpc3Q6IFsKCQkJCQl7IGNvZGU6ICJ0eXBlIiwgdmFsdWU6IGl0ZW1bIkBvbmRjL29yZy90aXRsZV90eXBlIl0gfSwKCQkJCQkuLi4oc3ViVHlwZSA/IFt7IGNvZGU6ICJzdWJ0eXBlIiwgdmFsdWU6IHN1YlR5cGUgfV0gOiBbXSksCgkJCQkJewoJCQkJCQljb2RlOiAicGFyZW50X2l0ZW1faWQiLAoJCQkJCQl2YWx1ZTogaXRlbS5pdGVtLnBhcmVudF9pdGVtX2lkLAoJCQkJCX0sCgkJCQkJeyBjb2RlOiAiaWQiLCB2YWx1ZTogaXRlbVsiQG9uZGMvb3JnL2l0ZW1faWQiXSB9LAoJCQkJCXsgY29kZTogImN1cnJlbmN5IiwgdmFsdWU6ICJJTlIiIH0sCgkJCQkJeyBjb2RlOiAidmFsdWUiLCB2YWx1ZTogYC0ke2l0ZW0ucHJpY2UudmFsdWV9YCB9LAoJCQkJXSwKCQkJfSk7CgkJfQoJfSk7CgoJcmV0dXJuIHF1b3RlVHJhaWxUYWdzOwp9OwoKY29uc3QgYnVpbGRSZXRhaWxRdW90ZSA9ICgKCWl0ZW1zLAoJaW5pdGFsSXRlbXMsCglmdWxmaWxsbWVudHMsCglvcHRpb25zCikgPT4gewoJY29uc3QgcXVvdGUgPSB7fTsKCWxldCBicmVha3VwID0gW107CglsZXQgdG90YWxQcmljZSA9IDAuMDsKCglmdW5jdGlvbiByZW1vdmVUYWdzQnlDb2Rlcyh0YWdzLCBjb2Rlc1RvUmVtb3ZlKXsKCQlyZXR1cm4gdGFncy5maWx0ZXIoKHRhZykgPT4gIWNvZGVzVG9SZW1vdmUuaW5jbHVkZXModGFnLmNvZGUpKTsKCX0KCglmdW5jdGlvbiBleHRyYWN0VGFncyh0YWdzKSB7CgkJY29uc3QgcmVzdWx0ID0ge307CgoJCXRhZ3MuZm9yRWFjaCgodGFnKSA9PiB7CgkJCWNvbnN0IHNlY3Rpb24gPSB0YWcuY29kZTsKCQkJaWYgKHNlY3Rpb24gPT09ICJxdWFsaWZpZXIiIHx8IHNlY3Rpb24gPT09ICJiZW5lZml0IikgewoJCQkJcmVzdWx0W3NlY3Rpb25dID0ge307CgkJCQl0YWcubGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CgkJCQkJcmVzdWx0W3NlY3Rpb25dW2l0ZW0uY29kZV0gPSBpdGVtLnZhbHVlOwoJCQkJfSk7CgkJCX0KCQl9KTsKCgkJcmV0dXJuIHJlc3VsdDsKCX0KCglsZXQgaXNDYW5jZWxGdWxmaWxsbWVudCA9IGZhbHNlOwoJbGV0IGlzUlRPID0gZmFsc2U7CglsZXQgaXNSZXR1cm4gPSBmYWxzZTsKCglpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7CgkJY29uc29sZS5sb2coIml0ZW1zOiAiLCBpdGVtKTsKCQlpZiAoaXRlbS5xdWFudGl0eS5jb3VudCA9PT0gMCkgcmV0dXJuOwoKCQljb25zdCBpbml0aWFsSXRlbXNEYXRhID0gaW5pdGFsSXRlbXM/LmZpbmQoCgkJCShvbl9zZWFyY2hfaXRlbSkgPT4gb25fc2VhcmNoX2l0ZW0uaWQgPT09IGl0ZW0uaWQKCQkpOwoKCQlmdWxmaWxsbWVudHMuZm9yRWFjaCgoZnVsZmlsbG1lbnQpID0+IHsKCQkJaWYgKAoJCQkJZnVsZmlsbG1lbnQuaWQgPT09IGl0ZW0/LmZ1bGZpbGxtZW50X2lkICYmCgkJCQlmdWxmaWxsbWVudC50eXBlID09PSAiQ2FuY2VsIgoJCQkpIHsKCQkJCWlzQ2FuY2VsRnVsZmlsbG1lbnQgPSB0cnVlOwoJCQl9IGVsc2UgaWYgKGZ1bGZpbGxtZW50LnR5cGUgPT09ICJSVE8iKSB7CgkJCQlpc1JUTyA9IHRydWU7CgkJCX0gZWxzZSBpZiAoZnVsZmlsbG1lbnQudHlwZSA9PT0gIlJldHVybiIpIHsKCQkJCWlzUmV0dXJuID0gdHJ1ZTsKCQkJfQoJCX0pOwoKCQljb25zdCBpdGVtUHJpY2UgPQoJCQlwYXJzZUludChpbml0aWFsSXRlbXNEYXRhLnByaWNlLnZhbHVlKSAqCgkJCShpc0NhbmNlbEZ1bGZpbGxtZW50IHx8CgkJCQlpc1JUTyB8fAoJCQkJKG9wdGlvbnM/LnJldHVyblBhcmVudEl0ZW1JZCAmJgoJCQkJCWl0ZW0ucGFyZW50X2l0ZW1faWQgPT09IG9wdGlvbnMucmV0dXJuUGFyZW50SXRlbUlkKQoJCQkJPyAwCgkJCQk6IGl0ZW0ucXVhbnRpdHkuY291bnQpOwoKCQlpZiAoIWlzQ2FuY2VsRnVsZmlsbG1lbnQpIHsKCQkJdG90YWxQcmljZSArPSBpdGVtUHJpY2U7CgkJfQoJCWNvbnNvbGUubG9nKCJpbml0aWFsSXRlbXNEYXRhLnByaWNlLnZhbHVlIixKU09OLnN0cmluZ2lmeShpbml0aWFsSXRlbXNEYXRhKSkKCgoJCWJyZWFrdXAucHVzaCh7CgkJCSJAb25kYy9vcmcvaXRlbV9pZCI6IGl0ZW0uaWQsCgkJCSJAb25kYy9vcmcvaXRlbV9xdWFudGl0eSI6IHsKCQkJCWNvdW50OgoJCQkJCWlzQ2FuY2VsRnVsZmlsbG1lbnQgfHwKCQkJCQkJaXNSVE8gfHwKCQkJCQkJKG9wdGlvbnM/LnJldHVyblBhcmVudEl0ZW1JZCAmJgoJCQkJCQkJaXRlbS5wYXJlbnRfaXRlbV9pZCA9PT0gb3B0aW9ucy5yZXR1cm5QYXJlbnRJdGVtSWQpCgkJCQkJCT8gMAoJCQkJCQk6IGl0ZW0ucXVhbnRpdHkuY291bnQsCgkJCX0sCgkJCXRpdGxlOiBpbml0aWFsSXRlbXNEYXRhLmRlc2NyaXB0b3IubmFtZSwKCQkJIkBvbmRjL29yZy90aXRsZV90eXBlIjogIml0ZW0iLAoJCQlwcmljZTogeyBjdXJyZW5jeTogIklOUiIsIHZhbHVlOiBpdGVtUHJpY2UudG9TdHJpbmcoKSB9LAoJCQlpdGVtOiB7CgkJCQlwYXJlbnRfaXRlbV9pZDogaXRlbS5wYXJlbnRfaXRlbV9pZCwKCQkJCXF1YW50aXR5OiB7CgkJCQkJYXZhaWxhYmxlOiB7CgkJCQkJCWNvdW50OiBpbml0aWFsSXRlbXNEYXRhLnF1YW50aXR5LmF2YWlsYWJsZS5jb3VudCwKCQkJCQl9LAoJCQkJCW1heGltdW06IHsKCQkJCQkJY291bnQ6IGluaXRpYWxJdGVtc0RhdGEucXVhbnRpdHkubWF4aW11bS5jb3VudCwKCQkJCQl9LAoJCQkJfSwKCQkJCXByaWNlOiB7CgkJCQkJY3VycmVuY3k6ICJJTlIiLAoJCQkJCXZhbHVlOiBpbml0aWFsSXRlbXNEYXRhLnByaWNlLnZhbHVlLAoJCQkJfSwKCQkJCXRhZ3M6IHJlbW92ZVRhZ3NCeUNvZGVzKGl0ZW0udGFncywgWyJydG9fYWN0aW9uIl0pLAoJCQl9LAoJCX0pOwoKCQljb25zdCB0YXhQcmljZSA9IChpdGVtUHJpY2UgKiAwLjA1KS50b0ZpeGVkKDIpLnRvU3RyaW5nKCk7CgkJdG90YWxQcmljZSArPSBwYXJzZUZsb2F0KHRheFByaWNlKTsKCgkJYnJlYWt1cC5wdXNoKHsKCQkJIkBvbmRjL29yZy9pdGVtX2lkIjogaXRlbS5pZCwKCQkJdGl0bGU6ICJUYXgiLAoJCQkiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAidGF4IiwKCQkJcHJpY2U6IHsgY3VycmVuY3k6ICJJTlIiLCB2YWx1ZTogdGF4UHJpY2UgfSwKCQkJaXRlbTogewoJCQkJcGFyZW50X2l0ZW1faWQ6IGl0ZW0ucGFyZW50X2l0ZW1faWQsCgkJCQl0YWdzOiByZW1vdmVUYWdzQnlDb2RlcyhpdGVtLnRhZ3MsIFsicnRvX2FjdGlvbiJdKSwKCQkJfSwKCQl9KTsKCX0pOwoKCWxldCBkZWxpdmVyeUJyZWFrdXAgPSBbXTsKCglpZiAoIWlzQ2FuY2VsRnVsZmlsbG1lbnQgJiYgb3B0aW9ucz8uZnVsZmlsbG1lbnRTdGF0ZSAhPT0gIlBSRSIpIHsKCQlmdWxmaWxsbWVudHMuZm9yRWFjaCgoZnVsZmlsbG1lbnQpID0+IHsKCQkJaWYgKGZ1bGZpbGxtZW50LnR5cGUgPT09ICJEZWxpdmVyeSIpIHsKCQkJCWlmIChmdWxmaWxsbWVudFsiQG9uZGMvb3JnL1RBVCJdID09PSAiUFQ2ME0iKSB7CgkJCQkJdG90YWxQcmljZSArPSA3NTsKCQkJCQlkZWxpdmVyeUJyZWFrdXAgPSBbCgkJCQkJCS4uLmRlbGl2ZXJ5QnJlYWt1cCwKCQkJCQkJewoJCQkJCQkJIkBvbmRjL29yZy9pdGVtX2lkIjogZnVsZmlsbG1lbnQuaWQsCgkJCQkJCQl0aXRsZTogIkRlbGl2ZXJ5IGNoYXJnZXMiLAoJCQkJCQkJIkBvbmRjL29yZy90aXRsZV90eXBlIjogImRlbGl2ZXJ5IiwKCQkJCQkJCXByaWNlOiB7CgkJCQkJCQkJY3VycmVuY3k6ICJJTlIiLAoJCQkJCQkJCXZhbHVlOiAiNTAuMDAiLAoJCQkJCQkJfSwKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIkBvbmRjL29yZy9pdGVtX2lkIjogZnVsZmlsbG1lbnQuaWQsCgkJCQkJCQl0aXRsZTogIlBhY2tpbmcgY2hhcmdlcyIsCgkJCQkJCQkiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAicGFja2luZyIsCgkJCQkJCQlwcmljZTogewoJCQkJCQkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJCQkJCQl2YWx1ZTogIjI1LjAwIiwKCQkJCQkJCX0sCgkJCQkJCX0sCgkJCQkJXTsKCQkJCX0gZWxzZSBpZiAoZnVsZmlsbG1lbnRbIkBvbmRjL29yZy9UQVQiXSA9PT0gIlBUMzBNIikgewoJCQkJCXRvdGFsUHJpY2UgKz0gODU7CgkJCQkJZGVsaXZlcnlCcmVha3VwID0gWwoJCQkJCQkuLi5kZWxpdmVyeUJyZWFrdXAsCgkJCQkJCXsKCQkJCQkJCSJAb25kYy9vcmcvaXRlbV9pZCI6IGZ1bGZpbGxtZW50LmlkLAoJCQkJCQkJdGl0bGU6ICJEZWxpdmVyeSBjaGFyZ2VzIiwKCQkJCQkJCSJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJkZWxpdmVyeSIsCgkJCQkJCQlwcmljZTogewoJCQkJCQkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJCQkJCQl2YWx1ZTogIjYwLjAwIiwKCQkJCQkJCX0sCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJAb25kYy9vcmcvaXRlbV9pZCI6IGZ1bGZpbGxtZW50LmlkLAoJCQkJCQkJdGl0bGU6ICJQYWNraW5nIGNoYXJnZXMiLAoJCQkJCQkJIkBvbmRjL29yZy90aXRsZV90eXBlIjogInBhY2tpbmciLAoJCQkJCQkJcHJpY2U6IHsKCQkJCQkJCQljdXJyZW5jeTogIklOUiIsCgkJCQkJCQkJdmFsdWU6ICIyNS4wMCIsCgkJCQkJCQl9LAoJCQkJCQl9LAoJCQkJCV07CgkJCQl9IGVsc2UgewoJCQkJCXRvdGFsUHJpY2UgKz0gNzU7CgkJCQkJZGVsaXZlcnlCcmVha3VwID0gWwoJCQkJCQkuLi5kZWxpdmVyeUJyZWFrdXAsCgkJCQkJCXsKCQkJCQkJCSJAb25kYy9vcmcvaXRlbV9pZCI6IGZ1bGZpbGxtZW50LmlkLAoJCQkJCQkJdGl0bGU6ICJEZWxpdmVyeSBjaGFyZ2VzIiwKCQkJCQkJCSJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJkZWxpdmVyeSIsCgkJCQkJCQlwcmljZTogewoJCQkJCQkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJCQkJCQl2YWx1ZTogIjUwLjAwIiwKCQkJCQkJCX0sCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJAb25kYy9vcmcvaXRlbV9pZCI6IGZ1bGZpbGxtZW50LmlkLAoJCQkJCQkJdGl0bGU6ICJQYWNraW5nIGNoYXJnZXMiLAoJCQkJCQkJIkBvbmRjL29yZy90aXRsZV90eXBlIjogInBhY2tpbmciLAoJCQkJCQkJcHJpY2U6IHsKCQkJCQkJCQljdXJyZW5jeTogIklOUiIsCgkJCQkJCQkJdmFsdWU6ICIyNS4wMCIsCgkJCQkJCQl9LAoJCQkJCQl9LAoJCQkJCV07CgkJCQl9CgkJCX0gZWxzZSBpZiAoZnVsZmlsbG1lbnQudHlwZSA9PT0gIkJ1eWVyLURlbGl2ZXJ5IikgewoJCQkJdG90YWxQcmljZSArPSAyNTsKCQkJCWRlbGl2ZXJ5QnJlYWt1cCA9IFsKCQkJCQkuLi5kZWxpdmVyeUJyZWFrdXAsCgkJCQkJewoJCQkJCQkiQG9uZGMvb3JnL2l0ZW1faWQiOiBmdWxmaWxsbWVudC5pZCwKCQkJCQkJdGl0bGU6ICJEZWxpdmVyeSBjaGFyZ2VzIiwKCQkJCQkJIkBvbmRjL29yZy90aXRsZV90eXBlIjogImRlbGl2ZXJ5IiwKCQkJCQkJcHJpY2U6IHsKCQkJCQkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJCQkJCXZhbHVlOiAiMC4wMCIsCgkJCQkJCX0sCgkJCQkJfSwKCQkJCQl7CgkJCQkJCSJAb25kYy9vcmcvaXRlbV9pZCI6IGZ1bGZpbGxtZW50LmlkLAoJCQkJCQl0aXRsZTogIlBhY2tpbmcgY2hhcmdlcyIsCgkJCQkJCSJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJwYWNraW5nIiwKCQkJCQkJcHJpY2U6IHsKCQkJCQkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJCQkJCXZhbHVlOiAiMjUuMDAiLAoJCQkJCQl9LAoJCQkJCX0sCgkJCQldOwoJCQl9IGVsc2UgaWYgKGZ1bGZpbGxtZW50LnR5cGUgPT09ICJTZWxmLVBpY2t1cCIpIHsKCQkJCXRvdGFsUHJpY2UgKz0gMjU7CgkJCQlkZWxpdmVyeUJyZWFrdXAgPSBbCgkJCQkJLi4uZGVsaXZlcnlCcmVha3VwLAoJCQkJCXsKCQkJCQkJIkBvbmRjL29yZy9pdGVtX2lkIjogZnVsZmlsbG1lbnQuaWQsCgkJCQkJCXRpdGxlOiAiRGVsaXZlcnkgY2hhcmdlcyIsCgkJCQkJCSJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJkZWxpdmVyeSIsCgkJCQkJCXByaWNlOiB7CgkJCQkJCQljdXJyZW5jeTogIklOUiIsCgkJCQkJCQl2YWx1ZTogIjAuMDAiLAoJCQkJCQl9LAoJCQkJCX0sCgkJCQkJewoJCQkJCQkiQG9uZGMvb3JnL2l0ZW1faWQiOiBmdWxmaWxsbWVudC5pZCwKCQkJCQkJdGl0bGU6ICJQYWNraW5nIGNoYXJnZXMiLAoJCQkJCQkiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAicGFja2luZyIsCgkJCQkJCXByaWNlOiB7CgkJCQkJCQljdXJyZW5jeTogIklOUiIsCgkJCQkJCQl2YWx1ZTogIjI1LjAwIiwKCQkJCQkJfSwKCQkJCQl9LAoJCQkJXTsKCQkJfSBlbHNlIGlmIChmdWxmaWxsbWVudC50eXBlID09PSAiUlRPIikgewoJCQkJdG90YWxQcmljZSArPSA1NTsKCQkJCWRlbGl2ZXJ5QnJlYWt1cCA9IFsKCQkJCQkuLi5kZWxpdmVyeUJyZWFrdXAsCgkJCQkJewoJCQkJCQkiQG9uZGMvb3JnL2l0ZW1faWQiOiBmdWxmaWxsbWVudC5pZCwKCQkJCQkJdGl0bGU6ICJEZWxpdmVyeSBjaGFyZ2VzIiwKCQkJCQkJIkBvbmRjL29yZy90aXRsZV90eXBlIjogImRlbGl2ZXJ5IiwKCQkJCQkJcHJpY2U6IHsKCQkJCQkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJCQkJCXZhbHVlOiAiNTUuMDAiLAoJCQkJCQl9LAoJCQkJCX0sCgkJCQldOwoJCQl9CgkJfSk7Cgl9CglicmVha3VwID0gWy4uLmJyZWFrdXAsIC4uLmRlbGl2ZXJ5QnJlYWt1cF07CgoKCXF1b3RlLnByaWNlID0gewoJCWN1cnJlbmN5OiAiSU5SIiwKCQl2YWx1ZTogdG90YWxQcmljZS50b0ZpeGVkKDIpLnRvU3RyaW5nKCksCgl9OwoKCXF1b3RlLmJyZWFrdXAgPSBicmVha3VwOwoJcXVvdGUudHRsID0gIlAxRCI7CgoJcmV0dXJuIHF1b3RlOwp9OwoKY29uc3Qgb25fc2VhcmNoX2l0ZW1zID0gWwoJewoJCWlkOiAiSTEiLAoJCXRpbWU6IHsKCQkJbGFiZWw6ICJlbmFibGUiLAoJCQl0aW1lc3RhbXA6ICIyMDI1LTAxLTA4VDA3OjMwOjAwLjAwMFoiLAoJCX0sCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiRmFybSBIb3VzZSBQaXp6YSIsCgkJCXN5bWJvbDogImh0dHBzOi8vc25wLmNvbS9pbWFnZXMvaTEucG5nIiwKCQkJc2hvcnRfZGVzYzogIkZhcm0gSG91c2UgUGl6emEiLAoJCQlsb25nX2Rlc2M6ICJGYXJtIEhvdXNlIFBpenphIiwKCQkJaW1hZ2VzOiBbImh0dHBzOi8vc25wLmNvbS9pbWFnZXMvaTEucG5nIl0sCgkJfSwKCQlxdWFudGl0eTogewoJCQl1bml0aXplZDogewoJCQkJbWVhc3VyZTogewoJCQkJCXVuaXQ6ICJ1bml0IiwKCQkJCQl2YWx1ZTogIjEiLAoJCQkJfSwKCQkJfSwKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMjY5LjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjI2OS4wMCIsCgkJCXRhZ3M6IFsKCQkJCXsKCQkJCQljb2RlOiAicmFuZ2UiLAoJCQkJCWxpc3Q6IFsKCQkJCQkJewoJCQkJCQkJY29kZTogImxvd2VyIiwKCQkJCQkJCXZhbHVlOiAiMjY5LjAwIiwKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJY29kZTogInVwcGVyIiwKCQkJCQkJCXZhbHVlOiAiODk0LjAwIiwKCQkJCQkJfSwKCQkJCQldLAoJCQkJfSwKCQkJXSwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQljYXRlZ29yeV9pZHM6IFsiNToxIl0sCgkJZnVsZmlsbG1lbnRfaWQ6ICJGMSIsCgkJbG9jYXRpb25faWQ6ICJMMSIsCgkJcmVsYXRlZDogZmFsc2UsCgkJcmVjb21tZW5kZWQ6IHRydWUsCgkJIkBvbmRjL29yZy9yZXR1cm5hYmxlIjogZmFsc2UsCgkJIkBvbmRjL29yZy9jYW5jZWxsYWJsZSI6IGZhbHNlLAoJCSJAb25kYy9vcmcvcmV0dXJuX3dpbmRvdyI6ICJQVDFIIiwKCQkiQG9uZGMvb3JnL3NlbGxlcl9waWNrdXBfcmV0dXJuIjogZmFsc2UsCgkJIkBvbmRjL29yZy90aW1lX3RvX3NoaXAiOiAiUFQ0NU0iLAoJCSJAb25kYy9vcmcvYXZhaWxhYmxlX29uX2NvZCI6IGZhbHNlLAoJCSJAb25kYy9vcmcvY29udGFjdF9kZXRhaWxzX2NvbnN1bWVyX2NhcmUiOgoJCQkiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJpdGVtIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogImN1c3RvbV9ncm91cCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMSIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJ0aW1pbmciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImRheV9mcm9tIiwKCQkJCQkJdmFsdWU6ICIxIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRheV90byIsCgkJCQkJCXZhbHVlOiAiNSIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0aW1lX2Zyb20iLAoJCQkJCQl2YWx1ZTogIjE4MDAiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAidGltZV90byIsCgkJCQkJCXZhbHVlOiAiMjIwMCIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJ2ZWdfbm9udmVnIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ2ZWciLAoJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJXSwKCX0sCgl7CgkJaWQ6ICJDMSIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiTmV3IEhhbmQgVG9zc2VkIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCXVuaXRpemVkOiB7CgkJCQltZWFzdXJlOiB7CgkJCQkJdW5pdDogInVuaXQiLAoJCQkJCXZhbHVlOiAiMSIsCgkJCQl9LAoJCQl9LAoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICIwLjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjAuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzEiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogImNoaWxkIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0cyIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMyIiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICIxMDAlIFdoZWF0IFRoaW4gQ3J1c3QiLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICIwLjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0cxIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogImNoaWxkIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0czIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMzIiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJSZWd1bGFyIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjAuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMiIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAiY2hpbGQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzQiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzQiLAoJCWRlc2NyaXB0b3I6IHsKCQkJbmFtZTogIkxhcmdlIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjQ1MC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICI0NTAuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzIiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAiY2hpbGQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzUiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzUiLAoJCWRlc2NyaXB0b3I6IHsKCQkJbmFtZTogIk1lZGl1bSIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICIyMTAuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMjEwLjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0cyIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogImNoaWxkIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0c2IiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkM2IiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJSZWd1bGFyIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjQ1LjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjQ1LjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0czIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogImNoaWxkIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0c0IiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkM3IiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJNZWRpdW0iLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMjc1LjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjI3NS4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMyIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJubyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJjaGlsZCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHNiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJ2ZWdfbm9udmVnIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ2ZWciLAoJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJXSwKCX0sCgl7CgkJaWQ6ICJDOCIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiR3JpbGxlZCBNdXNocm9vbXMiLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMzUuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMzUuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzQiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkM5IiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJGcmVzaCBUb21hdG8iLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMzUuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMzUuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzQiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzEwIiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJQZXBwZXIgQmFyYmVxdWUgQ2hpY2tlbiIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICI1MC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICI1MC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHNCIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJubyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJ2ZWdfbm9udmVnIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJub25fdmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzExIiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJHcmlsbGVkIE11c2hyb29tcyIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICI4MC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICI4MC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHNSIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJubyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJ2ZWdfbm9udmVnIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ2ZWciLAoJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJXSwKCX0sCgl7CgkJaWQ6ICJDMTIiLAoJCWRlc2NyaXB0b3I6IHsKCQkJbmFtZTogIkZyZXNoIFRvbWF0byIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICI4MC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICI4MC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHNSIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJubyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJ2ZWdfbm9udmVnIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ2ZWciLAoJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJXSwKCX0sCgl7CgkJaWQ6ICJDMTMiLAoJCWRlc2NyaXB0b3I6IHsKCQkJbmFtZTogIlBlcHBlciBCYXJiZXF1ZSBDaGlja2VuIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjk1LjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjk1LjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0c1IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogIm5vbl92ZWciLAoJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJXSwKCX0sCgl7CgkJaWQ6ICJDMTQiLAoJCWRlc2NyaXB0b3I6IHsKCQkJbmFtZTogIkdyaWxsZWQgTXVzaHJvb21zIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjgwLjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjgwLjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0c2IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMxNSIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiRnJlc2ggVG9tYXRvIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjgwLjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjgwLjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0c2IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMxNiIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiUGVwcGVyIEJhcmJlcXVlIENoaWNrZW4iLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiOTUuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiOTUuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzYiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAibm9uX3ZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkkyIiwKCQl0aW1lOiB7CgkJCWxhYmVsOiAiZW5hYmxlIiwKCQkJdGltZXN0YW1wOiAiMjAyNS0wMS0wOFQwNzozMDowMC4wMDBaIiwKCQl9LAoJCWRlc2NyaXB0b3I6IHsKCQkJbmFtZTogIk1leGljYW4gUGF0dHkgU2FuZHdpY2giLAoJCQlzeW1ib2w6ICJodHRwczovL3NucC5jb20vaW1hZ2VzL2kxLnBuZyIsCgkJCXNob3J0X2Rlc2M6ICJNZXhpY2FuIFBhdHR5IFNhbmR3aWNoIiwKCQkJbG9uZ19kZXNjOiAiTWV4aWNhbiBQYXR0eSBTYW5kd2ljaCIsCgkJCWltYWdlczogWyJodHRwczovL3NucC5jb20vaW1hZ2VzL2kxLnBuZyJdLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJdW5pdGl6ZWQ6IHsKCQkJCW1lYXN1cmU6IHsKCQkJCQl1bml0OiAidW5pdCIsCgkJCQkJdmFsdWU6ICIxIiwKCQkJCX0sCgkJCX0sCgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjIyOS4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICIyMjkuMDAiLAoJCQl0YWdzOiBbCgkJCQl7CgkJCQkJY29kZTogInJhbmdlIiwKCQkJCQlsaXN0OiBbCgkJCQkJCXsKCQkJCQkJCWNvZGU6ICJsb3dlciIsCgkJCQkJCQl2YWx1ZTogIjIyOS4wMCIsCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCWNvZGU6ICJ1cHBlciIsCgkJCQkJCQl2YWx1ZTogIjcxOC4wMCIsCgkJCQkJCX0sCgkJCQkJXSwKCQkJCX0sCgkJCV0sCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJY2F0ZWdvcnlfaWRzOiBbIjU6MSJdLAoJCWZ1bGZpbGxtZW50X2lkOiAiRjEiLAoJCWxvY2F0aW9uX2lkOiAiTDEiLAoJCXJlbGF0ZWQ6IGZhbHNlLAoJCXJlY29tbWVuZGVkOiB0cnVlLAoJCSJAb25kYy9vcmcvcmV0dXJuYWJsZSI6IGZhbHNlLAoJCSJAb25kYy9vcmcvY2FuY2VsbGFibGUiOiBmYWxzZSwKCQkiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiAiUFQxSCIsCgkJIkBvbmRjL29yZy9zZWxsZXJfcGlja3VwX3JldHVybiI6IGZhbHNlLAoJCSJAb25kYy9vcmcvdGltZV90b19zaGlwIjogIlBUNDVNIiwKCQkiQG9uZGMvb3JnL2F2YWlsYWJsZV9vbl9jb2QiOiBmYWxzZSwKCQkiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoKCQkJIlJhbWVzaCxyYW1lc2hAYWJjLmNvbSwxODAwNDI1NDQ0NCIsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiaXRlbSIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJjdXN0b21fZ3JvdXAiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzExIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMxNyIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiTWV4aWNhbiBCZWFuIFBhdHR5IDE1Y20gWzYgaW5jaGVzXSIsCgkJfSwKCQlxdWFudGl0eTogewoJCQl1bml0aXplZDogewoJCQkJbWVhc3VyZTogewoJCQkJCXVuaXQ6ICJ1bml0IiwKCQkJCQl2YWx1ZTogIjEiLAoJCQkJfSwKCQkJfSwKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICIwLjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0cxMSIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAiY2hpbGQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzEyIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzEzIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE0IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE2IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE3IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE4IiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMxOCIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiTWFrZSBDaGVlc2UgUHVsbCBNZXhpY2FuIFBhdHR5IDMwY20iLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMjcwLjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjI3MC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMTEiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAiY2hpbGQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzEyIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE1IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE3IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE4IiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMxOSIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiTXVsdGlncmFpbiBIb25leSBPYXRzIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjAuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMTIiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMyMCIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiUGFybWVzYW4gT3JlZ2FubyIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICIwLjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjAuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzEyIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMyMSIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiUGxhaW4gYnJlYWQiLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICIwLjAwIiwKCQl9LAoJCWNhdGVnb3J5X2lkOiAiRiZCIiwKCQlyZWxhdGVkOiB0cnVlLAoJCXRhZ3M6IFsKCQkJewoJCQkJY29kZTogInR5cGUiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInR5cGUiLAoJCQkJCQl2YWx1ZTogImN1c3RvbWl6YXRpb24iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAicGFyZW50IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJpZCIsCgkJCQkJCXZhbHVlOiAiQ0cxMyIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJkZWZhdWx0IiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzIyIiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJUb2FzdGVkIGJyZWFkIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjAuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMTMiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzIzIiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJFeHRyYSBDaGVlc2UgU2xpY2UiLAoJCX0sCgkJcXVhbnRpdHk6IHsKCQkJYXZhaWxhYmxlOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQkJbWF4aW11bTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJfSwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiAiMzAuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMzAuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE0IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMyNCIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiRXh0cmEgTWV4aWNhbiBCZWFuIFBhdHR5IEZvb3Rsb25nIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjEyMC4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICIxMjAuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE1IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMyNSIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiTGV0dHVjZSIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICIwLjAwIiwKCQkJbWF4aW11bV92YWx1ZTogIjAuMDAiLAoJCX0sCgkJY2F0ZWdvcnlfaWQ6ICJGJkIiLAoJCXJlbGF0ZWQ6IHRydWUsCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAidHlwZSIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidHlwZSIsCgkJCQkJCXZhbHVlOiAiY3VzdG9taXphdGlvbiIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJwYXJlbnQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImlkIiwKCQkJCQkJdmFsdWU6ICJDRzE2IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImRlZmF1bHQiLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInZlZ19ub252ZWciLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZlZyIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKCXsKCQlpZDogIkMyNiIsCgkJZGVzY3JpcHRvcjogewoJCQluYW1lOiAiRWdnbGVzcyBNYXlvIiwKCQl9LAoJCXF1YW50aXR5OiB7CgkJCWF2YWlsYWJsZTogewoJCQkJY291bnQ6ICI5OSIsCgkJCX0sCgkJCW1heGltdW06IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCX0sCgkJcHJpY2U6IHsKCQkJY3VycmVuY3k6ICJJTlIiLAoJCQl2YWx1ZTogIjAuMDAiLAoJCQltYXhpbXVtX3ZhbHVlOiAiMC4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMTciLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiQzI3IiwKCQlkZXNjcmlwdG9yOiB7CgkJCW5hbWU6ICJEYXJrIENodW5rIENob2MgQ29va2llcyIsCgkJfSwKCQlxdWFudGl0eTogewoJCQlhdmFpbGFibGU6IHsKCQkJCWNvdW50OiAiOTkiLAoJCQl9LAoJCQltYXhpbXVtOiB7CgkJCQljb3VudDogIjk5IiwKCQkJfSwKCQl9LAoJCXByaWNlOiB7CgkJCWN1cnJlbmN5OiAiSU5SIiwKCQkJdmFsdWU6ICI5OS4wMCIsCgkJCW1heGltdW1fdmFsdWU6ICI5OS4wMCIsCgkJfSwKCQljYXRlZ29yeV9pZDogIkYmQiIsCgkJcmVsYXRlZDogdHJ1ZSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ0eXBlIiwKCQkJCQkJdmFsdWU6ICJjdXN0b21pemF0aW9uIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogInBhcmVudCIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAiaWQiLAoJCQkJCQl2YWx1ZTogIkNHMTgiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiZGVmYXVsdCIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCQl7CgkJCQljb2RlOiAidmVnX25vbnZlZyIsCgkJCQlsaXN0OiBbCgkJCQkJewoJCQkJCQljb2RlOiAidmVnIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LApdOwoKY29uc3Qgb25fc2VhcmNoX29mZmVycyA9IFsKCXsKCQlpZDogImRpc2NwNjAiLAoJCWRlc2NyaXB0b3I6IHsKCQkJY29kZTogImRpc2NvdW50IiwKCQkJaW1hZ2VzOiBbImh0dHBzOi8vc25wLmNvbS9pbWFnZXMvb2ZmZXIxLWJhbm5lci53ZWJwIl0sCgkJfSwKCQlsb2NhdGlvbl9pZHM6IFsiTDEiXSwKCQljYXRlZ29yeV9pZHM6IFsiQzEiXSwKCQlpdGVtX2lkczogWyJJMSJdLAoJCXRpbWU6IHsKCQkJbGFiZWw6ICJ2YWxpZCIsCgkJCXJhbmdlOiB7CgkJCQlzdGFydDogIjIwMjUtMDEtMDFUMTY6MDA6MDAuMDAwWiIsCgkJCQllbmQ6ICIyMDI1LTAxLTAxVDIzOjAwOjAwLjAwMFoiLAoJCQl9LAoJCX0sCgkJdGFnczogWwoJCQl7CgkJCQljb2RlOiAicXVhbGlmaWVyIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJtaW5fdmFsdWUiLAoJCQkJCQl2YWx1ZTogIjE1OS4wMCIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJiZW5lZml0IiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJ2YWx1ZV90eXBlIiwKCQkJCQkJdmFsdWU6ICJwZXJjZW50IiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogInZhbHVlIiwKCQkJCQkJdmFsdWU6ICItNjAuMDAiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAidmFsdWVfY2FwIiwKCQkJCQkJdmFsdWU6ICItMTIwLjAwIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogIm1ldGEiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogImFkZGl0aXZlIiwKCQkJCQkJdmFsdWU6ICJ5ZXMiLAoJCQkJCX0sCgkJCQkJewoJCQkJCQljb2RlOiAiYXV0byIsCgkJCQkJCXZhbHVlOiAibm8iLAoJCQkJCX0sCgkJCQldLAoJCQl9LAoJCV0sCgl9LAoJewoJCWlkOiAiZmxhdDE1MCIsCgkJZGVzY3JpcHRvcjogewoJCQljb2RlOiAiZGlzY291bnQiLAoJCQlpbWFnZXM6IFsiaHR0cHM6Ly9zbnAuY29tL2ltYWdlcy9vZmZlcjItYmFubmVyLndlYnAiXSwKCQl9LAoJCWxvY2F0aW9uX2lkczogWyJMMSJdLAoJCWNhdGVnb3J5X2lkczogWyJDMSIsICJDMiJdLAoJCWl0ZW1faWRzOiBbIkkxIl0sCgkJdGltZTogewoJCQlsYWJlbDogInZhbGlkIiwKCQkJcmFuZ2U6IHsKCQkJCXN0YXJ0OiAiMjAyNS0wMS0wMVQxNjowMDowMC4wMDBaIiwKCQkJCWVuZDogIjIwMjUtMDEtMDFUMjM6MDA6MDAuMDAwWiIsCgkJCX0sCgkJfSwKCQl0YWdzOiBbCgkJCXsKCQkJCWNvZGU6ICJxdWFsaWZpZXIiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogIm1pbl92YWx1ZSIsCgkJCQkJCXZhbHVlOiAiNDk5LjAwIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQkJewoJCQkJY29kZTogImJlbmVmaXQiLAoJCQkJbGlzdDogWwoJCQkJCXsKCQkJCQkJY29kZTogInZhbHVlX3R5cGUiLAoJCQkJCQl2YWx1ZTogImFtb3VudCIsCgkJCQkJfSwKCQkJCQl7CgkJCQkJCWNvZGU6ICJ2YWx1ZSIsCgkJCQkJCXZhbHVlOiAiLTE1MC4wMCIsCgkJCQkJfSwKCQkJCV0sCgkJCX0sCgkJCXsKCQkJCWNvZGU6ICJtZXRhIiwKCQkJCWxpc3Q6IFsKCQkJCQl7CgkJCQkJCWNvZGU6ICJhZGRpdGl2ZSIsCgkJCQkJCXZhbHVlOiAieWVzIiwKCQkJCQl9LAoJCQkJCXsKCQkJCQkJY29kZTogImF1dG8iLAoJCQkJCQl2YWx1ZTogIm5vIiwKCQkJCQl9LAoJCQkJXSwKCQkJfSwKCQldLAoJfSwKXTs=
