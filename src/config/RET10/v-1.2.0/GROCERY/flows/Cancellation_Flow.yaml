meta:
  domain: ONDC:RET10
  version: 1.2.0
  flowId: Cancellation_Flow
transaction_data:
  transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
  latest_timestamp: '1970-01-01T00:00:00.000Z'
  bap_id: sample-bap-id
  bap_uri: https://bap.example.com
  bpp_id: sample-bpp-id
  bpp_uri: https://bpp.example.com
steps:
  - api: select
    action_id: select
    owner: BAP
    responseFor: null
    unsolicited: false
    description: First Select where items are selected
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKCWNvbnN0IGlucHV0cyA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzOwoJaWYgKCFpbnB1dHMpIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKCWlmIChpbnB1dHMucHJvdmlkZXIpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmlkID0gaW5wdXRzLnByb3ZpZGVyOwoJfQoJaWYgKGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbiAmJiBBcnJheS5pc0FycmF5KGlucHV0cy5wcm92aWRlcl9sb2NhdGlvbikpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmxvY2F0aW9ucyA9CgkJCWlucHV0cy5wcm92aWRlcl9sb2NhdGlvbi5tYXAoKGxvY2F0aW9uKSA9PiB7CgkJCQlyZXR1cm4gewoJCQkJCWlkOiBsb2NhdGlvbiwKCQkJCX07CgkJCX0pOwoJfSBlbHNlIGlmICgKCQlpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24gJiYKCQl0eXBlb2YgaW5wdXRzLnByb3ZpZGVyX2xvY2F0aW9uID09PSAic3RyaW5nIgoJKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlci5sb2NhdGlvbnMgPSBbCgkJCXsKCQkJCWlkOiBpbnB1dHMucHJvdmlkZXJfbG9jYXRpb24sCgkJCX0sCgkJXTsKCX0KCWlmIChpbnB1dHMubG9jYXRpb25fZ3BzKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uZW5kLmxvY2F0aW9uLmdwcyA9CgkJCWlucHV0cy5sb2NhdGlvbl9ncHM7Cgl9CglpZiAoaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlKSB7CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uZW5kLmxvY2F0aW9uLmFkZHJlc3MuYXJlYV9jb2RlID0KCQkJaW5wdXRzLmxvY2F0aW9uX3Bpbl9jb2RlOwoJCWRlZmF1bHRQYXlsb2FkLmNvbnRleHQuY2l0eSA9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzLmNpdHlfY29kZTsKCX0KCWlmIChpbnB1dHMuaXRlbXMpIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gaW5wdXRzLml0ZW1zLm1hcCgoaXRlbSkgPT4gewoJCQlyZXR1cm4gewoJCQkJaWQ6IGl0ZW0uaXRlbUlkLAoJCQkJcXVhbnRpdHk6IHsKCQkJCQljb3VudDogaXRlbS5xdWFudGl0eSwKCQkJCX0sCgkJCQlsb2NhdGlvbjogaXRlbS5sb2NhdGlvbiwKCQkJfTsKCQl9KTsKCX0KCWNvbnN0IGlucHV0S2V5cyA9IE9iamVjdC5rZXlzKGlucHV0cyk7Cgljb25zdCBvZmZlcnMgPSBpbnB1dEtleXMuZmlsdGVyKChrKSA9PiBrLnN0YXJ0c1dpdGgoIm9mZmVyc18iKSk7CglpZiAob2ZmZXJzLmxlbmd0aCA+IDApIHsKCQlkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLm9mZmVycyA9IG9mZmVycwoJCQkuZmlsdGVyKChvZmZlcikgPT4gaW5wdXRzW29mZmVyXSAhPT0gZmFsc2UgJiYgaW5wdXRzW29mZmVyXSAhPT0gbnVsbCkKCQkJLm1hcCgob2ZmZXIpID0+IHsKCQkJCXJldHVybiB7CgkJCQkJaWQ6IG9mZmVyLnJlcGxhY2UoIm9mZmVyc18iLCAiIiksCgkJCQkJLy8gdGFnczogWwoJCQkJCS8vIAl7CgkJCQkJLy8gCQljb2RlOiAic2VsZWN0aW9uIiwKCQkJCQkvLyAJCWxpc3Q6IFsKCQkJCQkvLyAJCQl7CgkJCQkJLy8gCQkJCWNvZGU6ICJhcHBseSIsCgkJCQkJLy8gCQkJCXZhbHVlOiAieWVzIiwKCQkJCQkvLyAJCQl9LAoJCQkJCS8vIAkJXSwKCQkJCQkvLyAJfSwKCQkJCQkvLyBdLAoJCQkJfTsKCQkJfSk7Cgl9CglyZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: select
          timestamp: '2025-12-29T06:22:03.809Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: befae42f-ac37-41e9-90ae-a33ec945bcf3
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                location_id: L1
            fulfillments:
              - end:
                  location:
                    gps: 19.131140,72.834091
                    address:
                      area_code: '400053'
      saveData:
        bapId: $.context.bap_id
        message_id: $.context.message_id
        selected_items: $.message.order.items[*]
        payload_city: $.context.city
        selected_fulfillments: $.message.order.fulfillments[*]
        selected_offers: $.message.order.offers[*]
        provider: $.message.order.provider
        RET10Catalog: >-
          EVAL#ZnVuY3Rpb24gZ2V0U2F2ZShlKXtyZXR1cm57Y2F0YWxvZzp7ImJwcC9mdWxmaWxsbWVudHMiOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSJ9LHtpZDoiRjIiLHR5cGU6IlNlbGYtUGlja3VwIn0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5In0sXSwiYnBwL2Rlc2NyaXB0b3IiOntuYW1lOiJNb2NrIFNlbGxlciBOUCIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIixzaG9ydF9kZXNjOiJTZWxsZXIgTWFya2V0cGxhY2UiLGxvbmdfZGVzYzoiU2VsbGVyIE1hcmtldHBsYWNlIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvbnAucG5nIl0sdGFnczpbe2NvZGU6ImJwcF90ZXJtcyIsbGlzdDpbe2NvZGU6Im5wX3R5cGUiLHZhbHVlOiJNU04ifSxdfSxdfSwiYnBwL3Byb3ZpZGVycyI6W3t0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiJ9LHJhdGluZzoiNCIsZGVzY3JpcHRvcjp7bmFtZToiU3RvcmUgMSIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyIsc2hvcnRfZGVzYzoiU3RvcmUgMSIsbG9uZ19kZXNjOiJTdG9yZSAxIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvc3RvcmUxLnBuZyJdfSx0dGw6IlAxRCIsbG9jYXRpb25zOlt7aWQ6IkwxIix0aW1lOntsYWJlbDoiZW5hYmxlIix0aW1lc3RhbXA6IjIwMjQtMTItMjNUMDY6NTU6NDUuMDM1WiIsZGF5czoiMSwyLDMsNCw1LDYsNyIsc2NoZWR1bGU6e2hvbGlkYXlzOltdfSxyYW5nZTp7c3RhcnQ6IjAwMDAiLGVuZDoiMjM1OSJ9fSxncHM6IjE5LjEyOTA3Niw3Mi44MjU4MDMiLGFkZHJlc3M6e3N0cmVldDoiMSAmIDIsQU1BUiBKWU9USSBDSFMuQkxERy4sT1BQLk5BTkQgS1JJUEEgSEFMTCIsbG9jYWxpdHk6IkFOREhFUkkgRk9VUiBCVU5HTE9XIEFNQVIgSllPVEkgQ0hTIixjaXR5OiJtb2NrLXNlbGxlci1jaXR5IixzdGF0ZToibW9jay1zdGF0ZSIsYXJlYV9jb2RlOiI0MDAwNTMifSxjaXJjbGU6e2dwczoiMTkuMTI5MDc2LDcyLjgyNTgwMyIscmFkaXVzOnt1bml0OiJrbSIsdmFsdWU6IjMifX19LF0sZnVsZmlsbG1lbnRzOlt7aWQ6IkYxIix0eXBlOiJEZWxpdmVyeSIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM3MTAiLGVtYWlsOiJub2JvZHlAbm9tYWlsLmNvbSJ9fSx7aWQ6IkYyIix0eXBlOiJTZWxmLVBpY2t1cCIsY29udGFjdDp7cGhvbmU6Ijk1OTQ2NjM5OTkiLGVtYWlsOiJtb2NrQG5vbWFpbC5jb20ifX0se2lkOiJGMzI4MjIiLHR5cGU6IkJ1eWVyLURlbGl2ZXJ5Iixjb250YWN0OntwaG9uZToiOTU5NDY2Mzg4OCIsZW1haWw6Im1vY2syQG5vbWFpbC5jb20ifX0sXSxpdGVtczpbe2Rlc2NyaXB0b3I6e25hbWU6IlBsYWluIEF0dGEiLGNvZGU6IjE6OTc4MDIwMTM3OTYyIixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjQuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIyMDAuMDAiLG1heGltdW1fdmFsdWU6IjIwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiIzIn19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkxIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiUGxhaW4gQXR0YSIsY29kZToiMTo0NzQxMzE4MTkxODk0IixzeW1ib2w6Imh0dHBzOi8vc2VsbGVyTlAuY29tL2ltYWdlcy9pMS5wbmciLHNob3J0X2Rlc2M6IlBsYWluIEF0dGEiLGxvbmdfZGVzYzoiUGxhaW4gQXR0YSIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL2kxLnBuZyJdfSxyYXRpbmc6IjMuMCIscHJpY2U6e2N1cnJlbmN5OiJJTlIiLHZhbHVlOiIzMDAuMDAiLG1heGltdW1fdmFsdWU6IjMwMC4wMCJ9LHF1YW50aXR5Ont1bml0aXplZDp7bWVhc3VyZTp7dW5pdDoia2lsb2dyYW0iLHZhbHVlOiI1In19LGF2YWlsYWJsZTp7Y291bnQ6Ijk5In0sbWF4aW11bTp7Y291bnQ6Ijk5In19LGNhdGVnb3J5X2lkOiJBdHRhLCBGbG91cnMgYW5kIFNvb2ppIixmdWxmaWxsbWVudF9pZDoiRjEiLGxvY2F0aW9uX2lkOiJMMSIsIkBvbmRjL29yZy9yZXR1cm5hYmxlIjohMCwiQG9uZGMvb3JnL2NhbmNlbGxhYmxlIjohMCwiQG9uZGMvb3JnL3JldHVybl93aW5kb3ciOiJQN0QiLCJAb25kYy9vcmcvc2VsbGVyX3BpY2t1cF9yZXR1cm4iOiExLCJAb25kYy9vcmcvdGltZV90b19zaGlwIjoiUFQ1TSIsIkBvbmRjL29yZy9hdmFpbGFibGVfb25fY29kIjohMCwiQG9uZGMvb3JnL2NvbnRhY3RfZGV0YWlsc19jb25zdW1lcl9jYXJlIjoiUmFtZXNoLHJhbWVzaEBhYmMuY29tLDE4MDA0MjU0NDQ0IiwiQG9uZGMvb3JnL3N0YXR1dG9yeV9yZXFzX3BhY2thZ2VkX2NvbW1vZGl0aWVzIjp7bWFudWZhY3R1cmVyX29yX3BhY2tlcl9uYW1lOiJJVEMiLG1hbnVmYWN0dXJlcl9vcl9wYWNrZXJfYWRkcmVzczoiSVRDIFF1YWxpdHkgQ2FyZSBDZWxsLFAuTyBCb3ggTm8uNTkyLEJhbmdhbG9yZS01NjAwMDUiLGNvbW1vbl9vcl9nZW5lcmljX25hbWVfb2ZfY29tbW9kaXR5OiJBc2hpcndhZCBBdHRhIixtb250aF95ZWFyX29mX21hbnVmYWN0dXJlX3BhY2tpbmdfaW1wb3J0OiIwMS8yMDIzIn0sdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkyIixwYXJlbnRfaXRlbV9pZDoiVjEifSx7ZGVzY3JpcHRvcjp7bmFtZToiQWxwaGFuc28gTWFuZ28iLGNvZGU6IjE6NzM5NjM3Mzk3NTk1NyIsc3ltYm9sOiJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIixzaG9ydF9kZXNjOiJBbHBoYW5zbyIsbG9uZ19kZXNjOiJBbHBoYW5zbyBNYW5nbyBmcmVzaGx5IGhhbmQgcGlja2VkIixpbWFnZXM6WyJodHRwczovL3NlbGxlck5QLmNvbS9pbWFnZXMvaTEucG5nIl19LHJhdGluZzoiMy4wIixwcmljZTp7Y3VycmVuY3k6IklOUiIsdmFsdWU6IjI1MC4wMCIsbWF4aW11bV92YWx1ZToiMjUwLjAwIn0scXVhbnRpdHk6e3VuaXRpemVkOnttZWFzdXJlOnt1bml0OiJraWxvZ3JhbSIsdmFsdWU6IjEifX0sYXZhaWxhYmxlOntjb3VudDoiOTkifSxtYXhpbXVtOntjb3VudDoiOTkifX0sY2F0ZWdvcnlfaWQ6IkZydWl0cyBhbmQgVmVnZXRhYmxlcyIsZnVsZmlsbG1lbnRfaWQ6IkYxIixsb2NhdGlvbl9pZDoiTDEiLCJAb25kYy9vcmcvcmV0dXJuYWJsZSI6ITEsIkBvbmRjL29yZy9jYW5jZWxsYWJsZSI6ITEsIkBvbmRjL29yZy9yZXR1cm5fd2luZG93IjoiUDFEIiwiQG9uZGMvb3JnL3NlbGxlcl9waWNrdXBfcmV0dXJuIjohMSwiQG9uZGMvb3JnL3RpbWVfdG9fc2hpcCI6IlBUNU0iLCJAb25kYy9vcmcvYXZhaWxhYmxlX29uX2NvZCI6ITAsIkBvbmRjL29yZy9jb250YWN0X2RldGFpbHNfY29uc3VtZXJfY2FyZSI6IlJhbWVzaCxyYW1lc2hAYWJjLmNvbSwxODAwNDI1NDQ0NCIsdGltZTp7bGFiZWw6ImVuYWJsZSIsdGltZXN0YW1wOiIyMDI0LTEyLTIzVDA2OjU1OjQ1LjAzNVoifSx0YWdzOlt7Y29kZToib3JpZ2luIixsaXN0Olt7Y29kZToiY291bnRyeSIsdmFsdWU6IklORCJ9LF19LF0saWQ6IkkzIn0sXSx0YWdzOlt7Y29kZToidGltaW5nIixsaXN0Olt7Y29kZToidHlwZSIsdmFsdWU6IkFsbCJ9LHtjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImRheV9mcm9tIix2YWx1ZToiMSJ9LHtjb2RlOiJkYXlfdG8iLHZhbHVlOiI3In0se2NvZGU6InRpbWVfZnJvbSIsdmFsdWU6IjAwMDAifSx7Y29kZToidGltZV90byIsdmFsdWU6IjIzNTkifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiQXR0YSwgRmxvdXJzIGFuZCBTb29qaSJ9LHtjb2RlOiJ0eXBlIix2YWx1ZToiMTEifSx7Y29kZToidW5pdCIsdmFsdWU6InBpbmNvZGUifSx7Y29kZToidmFsIix2YWx1ZToiNTYwMDAxLTU2MDA3Niw1NjAwODMifSxdfSx7Y29kZToic2VydmljZWFiaWxpdHkiLGxpc3Q6W3tjb2RlOiJsb2NhdGlvbiIsdmFsdWU6IkwxIn0se2NvZGU6ImNhdGVnb3J5Iix2YWx1ZToiRnJ1aXRzIGFuZCBWZWdldGFibGVzIn0se2NvZGU6InR5cGUiLHZhbHVlOiIxMCJ9LHtjb2RlOiJ2YWwiLHZhbHVlOiIzIn0se2NvZGU6InVuaXQiLHZhbHVlOiJrbSJ9LF19LF0sY2F0ZWdvcmllczpbe2lkOiJWMSIsdGFnczpbe2NvZGU6InR5cGUiLGxpc3Q6W3tjb2RlOiJ0eXBlIix2YWx1ZToidmFyaWFudF9ncm91cCJ9LF19LHtjb2RlOiJhdHRyIixsaXN0Olt7Y29kZToibmFtZSIsdmFsdWU6Iml0ZW0ucXVhbnRpdHkudW5pdGl6ZWQubWVhc3VyZSJ9LHtjb2RlOiJzZXEiLHZhbHVlOiIxIn0sXX0sXSxkZXNjcmlwdG9yOntuYW1lOiJQbGFpbiBBdHRhIn19LF0saWQ6IlAxIixvZmZlcnM6W3tpZDoiRkxBVDUwIixkZXNjcmlwdG9yOntjb2RlOiJkaXNjb3VudCIsaW1hZ2VzOlsiaHR0cHM6Ly9zZWxsZXJOUC5jb20vaW1hZ2VzL29mZmVyMi1iYW5uZXIucG5nIl19LGxvY2F0aW9uX2lkczpbIkwxIl0saXRlbV9pZHM6WyJJMSIsIkkyIiwiSTMiXSx0aW1lOntsYWJlbDoidmFsaWQiLHJhbmdlOntzdGFydDoiMjAyNC0xMi0yM1QwNjo1NTo0NS4wMzVaIixlbmQ6IjIwMzAtMTItMjNUMDg6MTI6MTUuMDMzWiJ9fSx0YWdzOlt7Y29kZToicXVhbGlmaWVyIixsaXN0Olt7Y29kZToibWluX3ZhbHVlIix2YWx1ZToiMTAwLjAwIn0sXX0se2NvZGU6ImJlbmVmaXQiLGxpc3Q6W3tjb2RlOiJ2YWx1ZV90eXBlIix2YWx1ZToiYW1vdW50In0se2NvZGU6InZhbHVlIix2YWx1ZToiLTUwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LHtpZDoiYnV5MmdldDMiLGRlc2NyaXB0b3I6e2NvZGU6ImJ1eVhnZXRZIixpbWFnZXM6WyJodHRwczovL3NucC5jb20vaW1hZ2VzL29mZmVyMS1iYW5uZXIud2VicCJdfSxsb2NhdGlvbl9pZHM6WyJMMSJdLGNhdGVnb3J5X2lkczpbXSxpdGVtX2lkczpbIkkxIiwiSTIiLCJJMyJdLHRpbWU6e2xhYmVsOiJ2YWxpZCIscmFuZ2U6e3N0YXJ0OiIyMDI1LTAxLTAxVDE2OjAwOjAwLjAwMFoiLGVuZDoiMjAzMC0wMS0wMVQyMzowMDowMC4wMDBaIn19LHRhZ3M6W3tjb2RlOiJxdWFsaWZpZXIiLGxpc3Q6W3tjb2RlOiJpdGVtX2NvdW50Iix2YWx1ZToiMiJ9LF19LHtjb2RlOiJiZW5lZml0IixsaXN0Olt7Y29kZToiaXRlbV9jb3VudCIsdmFsdWU6IjEifSx7Y29kZToiaXRlbV9pZCIsdmFsdWU6IkkyIn0se2NvZGU6Iml0ZW1fdmFsdWUiLHZhbHVlOiIwLjAwIn0sXX0se2NvZGU6Im1ldGEiLGxpc3Q6W3tjb2RlOiJhZGRpdGl2ZSIsdmFsdWU6Im5vIn0se2NvZGU6ImF1dG8iLHZhbHVlOiJubyJ9LF19LF19LF19LF19fX0=
      inputs:
        id: ExampleInputId
        jsonSchema:
          $schema: http://json-schema.org/draft-07/schema#
          type: object
          properties:
            city_code:
              type: string
              default: std:011
            provider:
              type: string
              default: P1
            provider_location:
              type: string
              default: L1
            location_gps:
              type: string
              default: 19.129076,72.825803
            location_pin_code:
              type: string
              default: '400053'
            items:
              type: array
              default: []
              items:
                type: object
                properties:
                  itemId:
                    type: string
                    default: I1
                  quantity:
                    type: number
                    default: 1
                  location:
                    type: string
                    default: L1
                additionalProperties: true
                default: {}
          additionalProperties: true
          default: {}
  - api: on_select
    action_id: on_select
    owner: BPP
    responseFor: select
    unsolicited: false
    description: On-select response to select
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBjcmVhdGVRdW90ZSgKCXNlbGVjdGVkSXRlbXMsCglzZXNzaW9uRGF0YSwKCWRlZmF1bHRQYXlsb2FkLAoJZnVsZmlsbG1lbnRzLAoJY2FuY2VsbGVkID0gZmFsc2UKKSB7CgoJbGV0IHRvdGFsUHJpY2UgPSAwOwoJbGV0IHRvdGFsUXVhbnRpdHkgPSAwOwoJbGV0IGl0ZW1TZXQgPSBuZXcgU2V0KCk7CglsZXQgYnJlYWt1cE9iamVjdCA9IFtdOwoJY29uc3QgY2F0YWxvZ0l0ZW1zID0gc2Vzc2lvbkRhdGEuUkVUMTBDYXRhbG9nLmNhdGFsb2dbCgkJImJwcC9wcm92aWRlcnMiCgldWzBdLml0ZW1zLmZpbHRlcigoaSkgPT4gewoJCWNvbnN0IGlkTWFwID0gc2VsZWN0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0uaWQpOwoJCXJldHVybiBpZE1hcC5pbmNsdWRlcyhpLmlkKTsKCX0pOwoJCglmb3IgKGNvbnN0IHNlbGVjdGVkSXRlbSBvZiBzZWxlY3RlZEl0ZW1zID8/IFtdKSB7CgkJY29uc3QgZnVsZmlsbG1lbnQgPSBmdWxmaWxsbWVudHMuZmluZCgKCQkJKGYpID0+IGYuaWQgPT09IHNlbGVjdGVkSXRlbS5mdWxmaWxsbWVudF9pZAoJCSk7CgkJaWYgKAoJCQkhZnVsZmlsbG1lbnQgfHwKCQkJIVsiRGVsaXZlcnkiLCAiU2VsZi1QaWNrdXAiLCAiQnV5ZXItRGVsaXZlcnkiXS5pbmNsdWRlcygKCQkJCWZ1bGZpbGxtZW50LnR5cGUgPz8gIiIKCQkJKQoJCSkgewoJCQljb250aW51ZTsKCQl9CgkJY29uc3QgY2F0YWxvZ0l0ZW0gPSBjYXRhbG9nSXRlbXMuZmluZCgoaSkgPT4gaS5pZCA9PT0gc2VsZWN0ZWRJdGVtLmlkKTsKCQlpZiAoIWNhdGFsb2dJdGVtKSBjb250aW51ZTsgLy8gU2tpcCBpZiBpdGVtIG5vdCBmb3VuZCBpbiBjYXRhbG9nCgoJCWNvbnN0IHF1YW50aXR5ID0gY2FuY2VsbGVkID8gMCA6IHNlbGVjdGVkSXRlbS5jb3VudCA/PyAxOwoJCWNvbnN0IHByaWNlID0gcGFyc2VGbG9hdChjYXRhbG9nSXRlbS5wcmljZS52YWx1ZSkgKiBxdWFudGl0eTsKCQl0b3RhbFByaWNlICs9IHByaWNlOwoKCQljb25zdCBicmVha3VwQ2xvbmUgPSBKU09OLnBhcnNlKAoJCQlKU09OLnN0cmluZ2lmeShicmVha3VwSXRlbSkKCQkpOwoJCWJyZWFrdXBDbG9uZVsiQG9uZGMvb3JnL2l0ZW1faWQiXSA9IGNhdGFsb2dJdGVtLmlkOwoJCWJyZWFrdXBDbG9uZS50aXRsZSA9IGNhdGFsb2dJdGVtLmRlc2NyaXB0b3IubmFtZTsKCQlicmVha3VwQ2xvbmVbIkBvbmRjL29yZy9pdGVtX3F1YW50aXR5Il0uY291bnQgPSBxdWFudGl0eTsKCQlicmVha3VwQ2xvbmUucHJpY2UudmFsdWUgPSBgJHtwcmljZS50b0ZpeGVkKDIpfWA7CgkJYnJlYWt1cENsb25lLml0ZW0ucHJpY2UudmFsdWUgPSBjYXRhbG9nSXRlbS5wcmljZS52YWx1ZTsKCQlicmVha3VwT2JqZWN0LnB1c2goYnJlYWt1cENsb25lKTsKCgkJaWYgKHNlc3Npb25EYXRhLm91dF9vZl9zdG9ja19pdGVtX2lkcz8uaW5jbHVkZXMoY2F0YWxvZ0l0ZW0uaWQpKSB7CgkJCWJyZWFrdXBDbG9uZS5pdGVtLnF1YW50aXR5LmF2YWlsYWJsZS5jb3VudCA9ICIwIjsKCQkJYnJlYWt1cENsb25lLml0ZW0ucXVhbnRpdHkubWF4aW11bS5jb3VudCA9ICIwIjsKCQkJYnJlYWt1cENsb25lWyJAb25kYy9vcmcvdGl0bGVfdHlwZSJdID0gIml0ZW0iOwoJCQlkZWZhdWx0UGF5bG9hZC5lcnJvciA9IHsKCQkJCXR5cGU6ICJET01BSU4tRVJST1IiLAoJCQkJY29kZTogIjQwMDAyIiwKCQkJCW1lc3NhZ2U6IGBJdGVtIHdpdGggaWQ6ICR7Y2F0YWxvZ0l0ZW0uaWR9IGlzIG91dCBvZiBzdG9ja2AsCgkJCX07CgkJfSBlbHNlIHsKCQkJdG90YWxRdWFudGl0eSArPSBzZWxlY3RlZEl0ZW0uY291bnQgPz8gMDsKCQkJaWYgKHF1YW50aXR5ID4gMCkgaXRlbVNldC5hZGQoY2F0YWxvZ0l0ZW0uaWQpOwoJCX0KCgkJaWYgKHNlc3Npb25EYXRhLnNlYXJjaF9iYXBfdGVybXM/Lmxpc3Q/LnNvbWUodCA9PiB0LmNvZGUgPT09ICIwMEEiKSkgewoJCQlmb3IgKGNvbnN0IGZlZSBvZiBucEZlZXNicmVha3VwKSB7CgkJCQljb25zdCBmZWVDbG9uZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmVlKSk7CgkJCQlmZWVDbG9uZVsiQG9uZGMvb3JnL2l0ZW1faWQiXSA9IGNhdGFsb2dJdGVtLmlkOwoJCQkJYnJlYWt1cE9iamVjdC5wdXNoKGZlZUNsb25lKTsKCQkJCXRvdGFsUHJpY2UgKz0gcGFyc2VGbG9hdChmZWVDbG9uZS5wcmljZS52YWx1ZSA/PyAiMCIpOwoJCQl9CgkJfQoJfQoKCWJyZWFrdXBPYmplY3QucHVzaChicmVha3VwWzBdKTsKCWJyZWFrdXBPYmplY3QucHVzaChicmVha3VwWzFdKTsKCWlmIChzZXNzaW9uRGF0YS5zZWxlY3RlZF9vZmZlcnMgJiYgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfb2ZmZXJzLmxlbmd0aCA+IDApIHsKCQlsZXQgb2ZmZXJRdW90ZSA9CgkJCW9mZmVyUXVvdGVzWwoJCQkJc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfb2ZmZXJzWzBdLmlkCgkJCV07CgoJCWNvbnN0IG9mZmVySWQgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9vZmZlcnNbMF0uaWQ7CgoJCWlmIChvZmZlcklkID09PSAiRkxBVDUwIiAmJiB0b3RhbFF1YW50aXR5ID4gMCkgewoJCQlicmVha3VwT2JqZWN0LnB1c2gob2ZmZXJRdW90ZSk7CgkJCWxldCBvZmZlclByaWNlID0gcGFyc2VGbG9hdChvZmZlclF1b3RlLnByaWNlLnZhbHVlKTsKCQkJaWYgKGNhbmNlbGxlZCkgb2ZmZXJQcmljZSA9IDA7CgkJCXRvdGFsUHJpY2UgKz0gb2ZmZXJQcmljZTsKCQl9IGVsc2UgaWYgKG9mZmVySWQgPT09ICJjb21ibzEiICYmIGl0ZW1TZXQuc2l6ZSA+PSAzKSB7CgkJCWJyZWFrdXBPYmplY3QucHVzaChvZmZlclF1b3RlKTsKCQkJbGV0IG9mZmVyUHJpY2UgPSBwYXJzZUZsb2F0KG9mZmVyUXVvdGUucHJpY2UudmFsdWUpOwoJCQlpZiAoY2FuY2VsbGVkKSBvZmZlclByaWNlID0gMDsKCQkJdG90YWxQcmljZSArPSBvZmZlclByaWNlOwoJCX0gZWxzZSBpZiAoCgkJCW9mZmVySWQgPT09ICJidXkyZ2V0MyIgJiYKCQkJdG90YWxRdWFudGl0eSA+PSAyICYmCgkJCSFzZXNzaW9uRGF0YS5vdXRfb2Zfc3RvY2tfaXRlbV9pZHM/LmluY2x1ZGVzKCJJMiIpCgkJKSB7CgkJCWlmIChjYW5jZWxsZWQpIHsKCQkJCS8vQHRzLWlnbm9yZQoJCQkJb2ZmZXJRdW90ZVsiQG9uZGMvb3JnL2l0ZW1fcXVhbnRpdHkiXSA9IHsKCQkJCQljb3VudDogMCwKCQkJCX07CgkJCX0KCQkJYnJlYWt1cE9iamVjdC5wdXNoKG9mZmVyUXVvdGUpOwoJCX0KCX0KCXJldHVybiB7CgkJYnJlYWt1cDogYnJlYWt1cE9iamVjdCwKCQlwcmljZTogewoJCQljdXJyZW5jeTogIklOUiIsCgkJCXZhbHVlOiBgJHt0b3RhbFByaWNlLnRvRml4ZWQoMil9YCwKCQl9LAoJCXR0bDogIlAxRCIsCgl9Owp9Cgpjb25zdCBicmVha3VwSXRlbSA9IHsKICAiQG9uZGMvb3JnL2l0ZW1faWQiOiAiSTEiLAogICJAb25kYy9vcmcvaXRlbV9xdWFudGl0eSI6IHsKICAgIGNvdW50OiAxLAogIH0sCiAgdGl0bGU6ICJQbGFpbiBBdHRhIiwKICAiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAiaXRlbSIsCiAgcHJpY2U6IHsKICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgIHZhbHVlOiAiMTAwLjAwIiwKICB9LAogIGl0ZW06IHsKICAgIHF1YW50aXR5OiB7CiAgICAgIGF2YWlsYWJsZTogewogICAgICAgIGNvdW50OiAiOTkiLAogICAgICB9LAogICAgICBtYXhpbXVtOiB7CiAgICAgICAgY291bnQ6ICI5OSIsCiAgICAgIH0sCiAgICB9LAogICAgcHJpY2U6IHsKICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICB2YWx1ZTogIjEwMC4wMCIsCiAgICB9LAogIH0sCn07Cgpjb25zdCBicmVha3VwID0gWwogIHsKICAgICJAb25kYy9vcmcvaXRlbV9pZCI6ICJGMSIsCiAgICB0aXRsZTogIkRlbGl2ZXJ5IGNoYXJnZXMiLAogICAgIkBvbmRjL29yZy90aXRsZV90eXBlIjogImRlbGl2ZXJ5IiwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6ICIwMC4wMCIsCiAgICB9LAogIH0sCiAgewogICAgIkBvbmRjL29yZy9pdGVtX2lkIjogIkYxIiwKICAgIHRpdGxlOiAiQ29udmVuaWVuY2UgRmVlIiwKICAgICJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJtaXNjIiwKICAgIHByaWNlOiB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdmFsdWU6ICIwMC4wMCIsCiAgICB9LAogIH0sCl07Cgphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZSgKICBkZWZhdWx0UGF5bG9hZCwKICBzZXNzaW9uRGF0YQopIHsKICBjb25zdCBzZWxlY3RlZEl0ZW1zT2JqID0gc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXM7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlbGVjdGVkSXRlbXNPYmoubWFwKChpdGVtKSA9PiB7CiAgICByZXR1cm4gewogICAgICBpZDogaXRlbS5pZCwKICAgICAgZnVsZmlsbG1lbnRfaWQ6ICJGMSIsCiAgICB9OwogIH0pOwogIGNvbnN0IHF1b3RlID0gY3JlYXRlUXVvdGUoCiAgICBzZWxlY3RlZEl0ZW1zT2JqLm1hcCgoaXRlbSkgPT4gewogICAgICByZXR1cm4gewogICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgIGNvdW50OiBpdGVtLnF1YW50aXR5LmNvdW50LAogICAgICAgIGZ1bGZpbGxtZW50X2lkOiAiRjEiLAogICAgICB9OwogICAgfSksCiAgICBzZXNzaW9uRGF0YSwKICAgIGRlZmF1bHRQYXlsb2FkLAogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKICApOwoJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHF1b3RlOwoJZGVmYXVsdFBheWxvYWQuY29udGV4dC5tZXNzYWdlX2lkID0gc2Vzc2lvbkRhdGEubWVzc2FnZV9pZFswXTsKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0K
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        ZnVuY3Rpb24gbWVldFJlcXVpcmVtZW50cyhzZXNzaW9uRGF0YSl7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZXMgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: on_select
          timestamp: '2025-12-29T06:44:41.277Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 001f9ecd-fbe0-43da-987e-6db9f5003db6
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            fulfillments:
              - id: F1
                type: Delivery
                '@ondc/org/provider_name': LSP or Provider Name
                tracking: true
                '@ondc/org/category': Standard Delivery
                '@ondc/org/TAT': P2D
                state:
                  descriptor:
                    code: Serviceable
            quote:
              price:
                value: '100.00'
                currency: INR
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100.00'
                  item:
                    quantity:
                      available:
                        count: '99'
                      maximum:
                        count: '99'
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': F1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': F1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            items:
              - id: I1
                fulfillment_id: F1
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        on_select_fulfillments: $.message.order.fulfillments[*]
        on_select_items: $.message.order.items[*]
        tat: $.message.order.fulfillments[0]["@ondc/org/TAT"]
      inputs: {}
  - api: init
    action_id: init
    owner: BAP
    responseFor: null
    unsolicited: false
    description: 'Init '
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewogIGlmIChpbml0aWFsaXplKSB7CiAgICBjb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwogICAgc2F2ZWRCaWxsaW5nLmNyZWF0ZWRfYXQgPSBuZXdJc287CiAgICBzYXZlZEJpbGxpbmcudXBkYXRlZF9hdCA9IG5ld0lzbzsKICB9CiAgcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgc2Vzc2lvbkRhdGEsCiAgZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKICBpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KICBjb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50cyA9CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwogICAgY29uc3Qgc2VsZWN0ZWQgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHM7CiAgICBjb25zdCBkZWZhdWx0RW5kID0gewogICAgICBlbmQ6IHsKICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICBlbWFpbDogIm5vYm9keUBub21haWwuY29tIiwKICAgICAgICAgIHBob25lOiAiOTg5ODk4OTg5OCIsCiAgICAgICAgfSwKICAgICAgICBsb2NhdGlvbjogewogICAgICAgICAgZ3BzOiBzZWxlY3RlZFswXS5lbmQ/LmxvY2F0aW9uPy5ncHMsCiAgICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICAgIGJ1aWxkaW5nOiAibW9jay1idWlsZGluZyIsCiAgICAgICAgICAgIGNpdHk6ICJtb2NrLWNpdHkiLAogICAgICAgICAgICBzdGF0ZTogIm1vY2stc3RhdGUiLAogICAgICAgICAgICBjb3VudHJ5OiAiSU5EIiwKICAgICAgICAgICAgYXJlYV9jb2RlOgogICAgICAgICAgICAgIHNlbGVjdGVkWzBdLmVuZD8ubG9jYXRpb24/LmFkZHJlc3M/LmFyZWFfY29kZSB8fCAiNDAwMDUzIiwKICAgICAgICAgICAgbG9jYWxpdHk6ICJtb2NrLWxvY2FsaXR5IiwKICAgICAgICAgICAgbmFtZTogIm1vY2staG91c2UtbmFtZSIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIH0sCiAgICB9OwoKICAgIGxldCB0YXJnZXRGdWxmaWxsbWVudCA9IHt9OwogICAgICB0YXJnZXRGdWxmaWxsbWVudCA9IG9uU2VsZWN0RnVsZmlsbG1lbnRzLmZpbmQoCiAgICAgICAgKGYpID0+IGYudHlwZSA9PT0gIkRlbGl2ZXJ5IgogICAgICApOwoKICAgIGNvbnN0IGluaXRGdWxmaWxsbWVudHMgPSBbCiAgICAgIHsKICAgICAgICBpZDogdGFyZ2V0RnVsZmlsbG1lbnQ/LmlkIHx8ICJGMyIsCiAgICAgICAgdHlwZTogdGFyZ2V0RnVsZmlsbG1lbnQ/LnR5cGUgfHwgIkRlbGl2ZXJ5IiwKICAgICAgICBlbmQ6IGRlZmF1bHRFbmQuZW5kLAogICAgICB9LAogICAgXTsKCiAgICByZXR1cm4gaW5pdEZ1bGZpbGxtZW50czsKfQphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBpdGVtcyA9IHNlc3Npb25EYXRhLnNlbGVjdGVkX2l0ZW1zOwoJY29uc3Qgb25TZWxlY3REYXRhID0gc2Vzc2lvbkRhdGEub25fc2VsZWN0X2Z1bGZpbGxtZW50czsKCWNvbnN0IGZJZCA9IG9uU2VsZWN0RGF0YS5maW5kKChmKSA9PiBmLnR5cGUgPT09ICJEZWxpdmVyeSIpPy5pZCB8fCAiRjEiOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gaXRlbXMubWFwKChpdGVtKSA9PiB7CgkJcmV0dXJuIHsKCQkJaWQ6IGl0ZW0uaWQsCgkJCWZ1bGZpbGxtZW50X2lkOiBmSWQsCgkJCXF1YW50aXR5OiB7CgkJCQljb3VudDogaXRlbS5xdWFudGl0eS5jb3VudCwKCQkJfSwKCQkJbG9jYXRpb25faWQ6IGl0ZW0ubG9jYXRpb25faWQsCgkJfTsKCX0pOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKAoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZywKCQl0cnVlCgkpOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAoJCXNlc3Npb25EYXRhLAogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMKCSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlciA9IHNlc3Npb25EYXRhLnByb3ZpZGVyWzBdOwoJaWYgKHNlc3Npb25EYXRhLnNlbGVjdGVkX29mZmVycykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5vZmZlcnMgPSBzZXNzaW9uRGF0YS5zZWxlY3RlZF9vZmZlcnMubWFwKAoJCQkob2ZmZXIpID0+IHsKCQkJCXJldHVybiB7CgkJCQkJaWQ6IG9mZmVyLmlkLAoJCQkJCXRhZ3M6IFsKCQkJCQkJewoJCQkJCQkJY29kZTogInNlbGVjdGlvbiIsCgkJCQkJCQlsaXN0OiBbCgkJCQkJCQkJewoJCQkJCQkJCQljb2RlOiAiYXBwbHkiLAoJCQkJCQkJCQl2YWx1ZTogInllcyIsCgkJCQkJCQkJfSwKCQkJCQkJCV0sCgkJCQkJCX0sCgkJCQkJXSwKCQkJCX07CgkJCX0KCQkpOwoJfQoKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRSZXF1aXJlbWVudHMoc2Vzc2lvbkRhdGEpewogIC8vIENoZWNrIGZvciBzZWxlY3RlZF9pdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMgfHwgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gc2VsZWN0ZWRfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcGF5bG9hZF9jaXR5CiAgaWYgKCFzZXNzaW9uRGF0YS5wYXlsb2FkX2NpdHkpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBwYXlsb2FkX2NpdHkgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWUxPQURfQ0lUWSIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5zZWxlY3RlZF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHByb3ZpZGVyCiAgaWYgKCFzZXNzaW9uRGF0YS5wcm92aWRlcikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHByb3ZpZGVyIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19QUk9WSURFUiIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHF1b3RlCiAgaWYgKCFzZXNzaW9uRGF0YS5xdW90ZSB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEucXVvdGUgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcXVvdGUgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1FVT1RFIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igb25fc2VsZWN0X2Z1bGZpbGxtZW50cwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9uX3NlbGVjdF9mdWxmaWxsbWVudHMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9GVUxGSUxMTUVOVFMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfaXRlbXMKICBpZiAoCiAgICAhc2Vzc2lvbkRhdGEub25fc2VsZWN0X2l0ZW1zIHx8CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2l0ZW1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PTl9TRUxFQ1RfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciB0YXQKICBpZiAoIXNlc3Npb25EYXRhLnRhdCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHRhdCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfVEFUIiwKICAgIH07CiAgfQoKICAvLyBBbGwgcmVxdWlyZW1lbnRzIHNhdGlzZmllZAogIHJldHVybiB7CiAgICB2YWxpZDogdHJ1ZSwKICAgIGRlc2NyaXB0aW9uOiAiQWxsIENoZWNrcyBwYXNzZWQgc3VjY2Vzc2Z1bGx5IiwKICAgIGNvZGU6ICIyMDAiLAogIH07Cn0K
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: init
          timestamp: '2025-12-29T07:50:43.211Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: c8681924-f1de-4e37-9456-cb43743ce863
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                location_id: L1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                type: Delivery
                end:
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: mock-building
                      city: mock-city
                      state: mock-state
                      country: IND
                      area_code: '400053'
                      locality: mock-locality
                      name: mock-house-name
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        items: $.message.order.items[*]
        provider: $.message.order.provider
        billing: $.message.order.billing
        fulfillments: $.message.order.fulfillments[*]
        selected_np_fees: >-
          $.message.order.items[*].tags[?(@.code=="np_fees")].list[?(@.code=="id")].value
      inputs: {}
  - api: on_init
    action_id: on_init
    owner: BPP
    responseFor: init
    unsolicited: false
    description: Response to Init call
    mock:
      generate: >-
        ZnVuY3Rpb24gZ2V0VXBkYXRlZEJpbGxpbmcoc2F2ZWRCaWxsaW5nLCBpbml0aWFsaXplID0gZmFsc2UpIHsKCWlmIChpbml0aWFsaXplKSB7CgkJY29uc3QgbmV3SXNvID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgLSA1ICogMTAwMCkudG9JU09TdHJpbmcoKTsKCQlzYXZlZEJpbGxpbmcuY3JlYXRlZF9hdCA9IG5ld0lzbzsKCQlzYXZlZEJpbGxpbmcudXBkYXRlZF9hdCA9IG5ld0lzbzsKCX0KCXJldHVybiBzYXZlZEJpbGxpbmc7Cn0KZnVuY3Rpb24gY3JlYXRlRnVsZmlsbG1lbnRzKAoJc2Vzc2lvbkRhdGEsCglkZWZhdWx0RnVsZmlsbG1lbnRzCikgewoJaWYgKGRlZmF1bHRGdWxmaWxsbWVudHMubGVuZ3RoIDwgMSkgewoJCXRocm93IG5ldyBFcnJvcigiRW1wdHkgZnVsZmlsbG1lbnRzIGZvdW5kIik7Cgl9CgoJCWNvbnN0IGZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCQlyZXR1cm4gZnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewoJCQlyZXR1cm4gewoJCQkJaWQ6IGYuaWQsCgkJCQl0eXBlOiBmLnR5cGUsCgkJCQllbmQ6IGYuZW5kLAoJCQkJdHJhY2tpbmc6IHRydWUsCgkJCX07CgkJfSk7Cgp9CmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAoJZGVmYXVsdFBheWxvYWQsCglzZXNzaW9uRGF0YQopIHsKCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtczsKCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gY3JlYXRlRnVsZmlsbG1lbnRzKAoJCXNlc3Npb25EYXRhLAoJCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCgkpOwoJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gZ2V0VXBkYXRlZEJpbGxpbmcoCgkJc2Vzc2lvbkRhdGEuYmlsbGluZ1swXQoJKTsKCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKCWRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUuYnJlYWt1cCA9CgkJZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZS5icmVha3VwLm1hcCgoYikgPT4gewoJCQlpZiAoYlsiQG9uZGMvb3JnL3RpdGxlX3R5cGUiXSA9PT0gIml0ZW0iKSB7CgkJCQlpZiAoYi5pdGVtICYmIGIuaXRlbS5xdWFudGl0eSkgZGVsZXRlIGIuaXRlbS5xdWFudGl0eTsKCQkJfQoJCQlyZXR1cm4gYjsKCQl9KTsKCglkZWZhdWx0UGF5bG9hZC5jb250ZXh0Lm1lc3NhZ2VfaWQgPSBzZXNzaW9uRGF0YS5tZXNzYWdlX2lkWzBdOwoJcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9Cg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzIChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcyAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: on_init
          timestamp: '2025-12-29T08:10:19.239Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: c2d4ecdb-b863-4eb0-ab35-8851e9c789be
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                type: Delivery
                end:
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                tracking: true
            quote:
              price:
                value: '100'
                currency: INR
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100.00'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: XXXX
                  settlement_ifsc_code: XXXX
                  bank_name: XXXX
                  branch_name: XXXX
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: 00ABCCH7409R1ZZ
                  - code: provider_tax_number
                    value: ABCDE1234F
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        bpp_terms: $.message.order.tags[?(@.code == 'bpp_terms')]
        tags: $.message.order.tags[*]
        fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: confirm
    action_id: confirm
    owner: BAP
    responseFor: null
    unsolicited: false
    description: Confirming the Order after Init
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewoJaWYgKGluaXRpYWxpemUpIHsKCQljb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwoJCXNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwoJCXNhdmVkQmlsbGluZy51cGRhdGVkX2F0ID0gbmV3SXNvOwoJfQoJcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCglzZXNzaW9uRGF0YSwKCWRlZmF1bHRGdWxmaWxsbWVudHMKKSB7CglpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CgkJdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBmdWxmaWxsbWVudHMgZm91bmQiKTsKCX0KCWNvbnN0IG9uU2VsZWN0RnVsZmlsbG1lbnRzID0KCQlzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwoJCWNvbnN0IGZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50czsKCQlyZXR1cm4gZnVsZmlsbG1lbnRzLm1hcCgoZikgPT4gewoJCQljb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50ID0gb25TZWxlY3RGdWxmaWxsbWVudHMuZmluZCgKCQkJCShvZikgPT4gb2YuaWQgPT09IGYuaWQKCQkJKTsKCQkJcmV0dXJuIHsKCQkJCWlkOiBmLmlkLAoJCQkJdHlwZTogZi50eXBlLAoJCQkJZW5kOiB7CgkJCQkJY29udGFjdDogZi5lbmQ/LmNvbnRhY3QsCgkJCQkJcGVyc29uOiB7CgkJCQkJCW5hbWU6ICJtb2NrLXBlcnNvbiIsCgkJCQkJfSwKCQkJCQlsb2NhdGlvbjogZi5lbmQ/LmxvY2F0aW9uLAoJCQkJfSwKCQkJCXRyYWNraW5nOiBmLnRyYWNraW5nLAoJCQkJIkBvbmRjL29yZy9jYXRlZ29yeSI6IG9uU2VsZWN0RnVsZmlsbG1lbnQ/LlsiQG9uZGMvb3JnL2NhdGVnb3J5Il0sCgkJCQkiQG9uZGMvb3JnL1RBVCI6IG9uU2VsZWN0RnVsZmlsbG1lbnQ/LlsiQG9uZGMvb3JnL1RBVCJdLAoJCQl9OwoJCX0pOwoJcmV0dXJuIGRlZmF1bHRGdWxmaWxsbWVudHM7Cn0KYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCglkZWZhdWx0UGF5bG9hZCwKCXNlc3Npb25EYXRhCikgewoJY29uc3QgdGltZUlzbyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gZ2VuZXJhdGVTaXhEaWdpdENvZGUoKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSB0aW1lSXNvOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IHRpbWVJc287CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHNlc3Npb25EYXRhLnF1b3RlWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuYmlsbGluZyA9IGdldFVwZGF0ZWRCaWxsaW5nKAoJCXNlc3Npb25EYXRhLmJpbGxpbmdbMF0KCSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQucGFyYW1zLmFtb3VudCA9CgkJc2Vzc2lvbkRhdGEucXVvdGVbMF0/LnByaWNlPy52YWx1ZTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQucGFyYW1zLnRyYW5zYWN0aW9uX2lkID0KCQkibW9ja19wYXltZW50X2lkXzEyMyI7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCgkJc2Vzc2lvbkRhdGEsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cwoJKTsKICBjb25zdCBleGlzdGluZ1RhZ3MgPSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3M7Cgljb25zdCBicHBUZXJtcyA9IGV4aXN0aW5nVGFncy5maW5kKChmKSA9PiBmLmNvZGUgPT09ICJicHBfdGVybXMiKTsKCWlmIChicHBUZXJtcykgewoJCWJwcFRlcm1zLmxpc3QgPSBzZXNzaW9uRGF0YS5icHBfdGVybXMubGlzdDsKCX0KCXJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVTaXhEaWdpdENvZGUoKSB7CglyZXR1cm4gTWF0aC5mbG9vcigxMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwKS50b1N0cmluZygpOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: confirm
          timestamp: '2025-12-29T08:39:38.573Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 60f5adb8-cc0b-4954-8742-265b5e03593b
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Created
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            provider:
              id: P1
              locations:
                - id: L1
            fulfillments:
              - '@ondc/org/category': Standard Delivery
                '@ondc/org/TAT': P2D
                id: F1
                tracking: true
                end:
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  person:
                    name: ONDC Buyer
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                type: Delivery
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_basis': delivery
              '@ondc/org/settlement_window': P1D
              '@ondc/org/withholding_amount': '00.00'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: np-number
                  - code: provider_tax_number
                    value: PAN_number_of_provider
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: 'Y'
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                  - code: tax_number
                    value: 00ABCCH7409R1ZZ
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:30.516Z'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        payment: $.message.order.payment
        order_state: $.message.order.state
        order_created_at: $.message.order.created_at
        bap_terms: $.message.order.tags[?(@.code == 'bap_terms')]
        fulfillments: $.message.order.fulfillments[*]
        order_id: $.message.order.id
      inputs: {}
  - api: on_confirm
    action_id: on_confirm
    owner: BPP
    responseFor: confirm
    unsolicited: false
    description: On-confirm Response to the confirm call
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwpmdW5jdGlvbiBnZXRVcGRhdGVkQmlsbGluZyhzYXZlZEJpbGxpbmcsIGluaXRpYWxpemUgPSBmYWxzZSkgewoJaWYgKGluaXRpYWxpemUpIHsKCQljb25zdCBuZXdJc28gPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDUgKiAxMDAwKS50b0lTT1N0cmluZygpOwoJCXNhdmVkQmlsbGluZy5jcmVhdGVkX2F0ID0gbmV3SXNvOwoJCXNhdmVkQmlsbGluZy51cGRhdGVkX2F0ID0gbmV3SXNvOwoJfQoJcmV0dXJuIHNhdmVkQmlsbGluZzsKfQpmdW5jdGlvbiBjcmVhdGVGdWxmaWxsbWVudHMoCiAgc2Vzc2lvbkRhdGEsCiAgZGVmYXVsdEZ1bGZpbGxtZW50cwopIHsKICBpZiAoZGVmYXVsdEZ1bGZpbGxtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkVtcHR5IGZ1bGZpbGxtZW50cyBmb3VuZCIpOwogIH0KICBjb25zdCBvblNlbGVjdEZ1bGZpbGxtZW50cyA9CiAgICBzZXNzaW9uRGF0YS5vbl9zZWxlY3RfZnVsZmlsbG1lbnRzOwoKICBjb25zdCBmdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICByZXR1cm4gZnVsZmlsbG1lbnRzCiAgICAgIC5maWx0ZXIoKGYpID0+IG9uU2VsZWN0RnVsZmlsbG1lbnRzLnNvbWUoKHNmKSA9PiBzZi5pZCA9PT0gZi5pZCkpCiAgICAgIC5tYXAoKGYsIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPQogICAgICAgICAgb25TZWxlY3RGdWxmaWxsbWVudHMuZmluZCgoc2YpID0+IHNmLmlkID09PSBmLmlkKSB8fCB7fTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiBmLmlkLAogICAgICAgICAgdHlwZTogZi50eXBlLAogICAgICAgICAgdHJhY2tpbmc6IGYudHJhY2tpbmcsCiAgICAgICAgICBzdGF0ZTogewogICAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgICAgY29kZTogIlBlbmRpbmciLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgICJAb25kYy9vcmcvVEFUIjogc2VsZWN0ZWRbIkBvbmRjL29yZy9UQVQiXSwKICAgICAgICAgICJAb25kYy9vcmcvcHJvdmlkZXJfbmFtZSI6ICJTdG9yZSAxIiwKICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgICAgICAgaWQ6ICJMMSIsCiAgICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgICAgbmFtZTogIlN0b3JlIDEiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZ3BzOiAiMTkuMTI5MDc2LDcyLjgyNTgwMyIsCiAgICAgICAgICAgICAgYWRkcmVzczogewogICAgICAgICAgICAgICAgc3RyZWV0OiAiMSAmIDIsQU1BUiBKWU9USSBDSFMuQkxERy4sT1BQLk5BTkQgS1JJUEEgSEFMTCIsCiAgICAgICAgICAgICAgICBsb2NhbGl0eTogIkFOREhFUkkgRk9VUiBCVU5HTE9XIEFNQVIgSllPVEkgQ0hTIiwKICAgICAgICAgICAgICAgIGNpdHk6ICJtb2NrLXNlbGxlci1jaXR5IiwKICAgICAgICAgICAgICAgIHN0YXRlOiAibW9jay1zdGF0ZSIsCiAgICAgICAgICAgICAgICBhcmVhX2NvZGU6ICI0MDAwNTMiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgICBwaG9uZTogIjk1OTQ2NjM3MTAiLAogICAgICAgICAgICAgIGVtYWlsOiAibm9ib2R5QG5vbWFpbC5jb20iLAogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIGVuZDogZi5lbmQsCiAgICAgICAgfTsKICAgICAgfSk7CiAgCn0KCmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlKAogIGRlZmF1bHRQYXlsb2FkLAogIHNlc3Npb25EYXRhCikgewogIGNvbnN0IHRpbWVJc28gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gdGltZUlzbzsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNyZWF0ZWRfYXQgPSBzZXNzaW9uRGF0YS5vcmRlcl9jcmVhdGVkX2F0WzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaWQgPSBzZXNzaW9uRGF0YS5vcmRlcl9pZFswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBnZXRVcGRhdGVkQmlsbGluZygKICAgIHNlc3Npb25EYXRhLmJpbGxpbmdbMF0KICApOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtczsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyID0gc2Vzc2lvbkRhdGEucHJvdmlkZXJbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVGdWxmaWxsbWVudHMoCiAgICBzZXNzaW9uRGF0YSwKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzCiAgKTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gc2Vzc2lvbkRhdGEucGF5bWVudFswXTsKICBjb25zdCBleGlzdGluZ1RhZ3MgPSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3MKICBjb25zdCBiYXBUZXJtcyA9IGV4aXN0aW5nVGFncy5maW5kKChmKSA9PiBmLmNvZGUgPT09ICJiYXBfdGVybXMiKTsKICBpZiAoYmFwVGVybXMpIHsKICAgIGJhcFRlcm1zLmxpc3QgPSBzZXNzaW9uRGF0YS5iYXBfdGVybXNbMF0ubGlzdAogICAgICAuZmlsdGVyKChpKSA9PiBpLmNvZGUgIT09ICJhY2NlcHRfYnBwX3Rlcm1zIikKICAgICAgLm1hcCgoaSkgPT4KICAgICAgICBpLmNvZGUgPT09ICJzdGF0aWNfdGVybXMiCiAgICAgICAgICA/IHsgLi4uaSwgdmFsdWU6ICJodHRwczovL2dpdGh1Yi5jb20vT05EQy1PZmZpY2lhbC9wcm90b2NvbC1uZXR3b3JrLWV4dGVuc2lvbi9kaXNjdXNzaW9ucy83OSIgfQogICAgICAgICAgOiBpCiAgICAgICk7CiAgfQogIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQubWVzc2FnZV9pZCA9IHNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF07CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9Cg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvcmRlcl9pZCAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEub3JkZXJfaWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvcmRlcl9pZCBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT1JERVJfSUQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBiYXBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJhcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5iYXBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYmFwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CQVBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBzdGF0ZSAoTkVXKQogIGlmICghc2Vzc2lvbkRhdGEuc3RhdGUpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzdGF0ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU1RBVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXltZW50IChORVcpCiAgaWYgKCFzZXNzaW9uRGF0YS5wYXltZW50IHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5wYXltZW50ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheW1lbnQgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BBWU1FTlQiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: on_confirm
          timestamp: '2025-12-29T08:51:49.239Z'
          transaction_id: 3cd7243a-eef8-42e1-8d12-9c76eab6fcea
          message_id: 2280275d-5d9a-413c-8c83-6ddc1db4e761
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: O1
            state: Created
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                quantity:
                  count: 1
                fulfillment_id: F1
            billing:
              address:
                building: my building name or house
                city: Mumbai
                state: Maharashtra
                country: IND
                area_code: '400053'
                locality: my street name
                name: my house or door or floor
              phone: '9898989898'
              name: ONDC buyer
              email: nobody@nomail.com
              created_at: '2024-12-23T07:01:43.145Z'
              updated_at: '2024-12-23T07:01:43.145Z'
            fulfillments:
              - id: F1
                '@ondc/org/provider_name': Store 1
                state:
                  descriptor:
                    code: Pending
                type: Delivery
                tracking: true
                '@ondc/org/TAT': PT60M
                start:
                  location:
                    id: L1
                    descriptor:
                      name: ABC Store
                    gps: 19.129076,72.825803
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:03:32.230Z'
                      end: '2024-12-23T07:08:32.230Z'
                  contact:
                    phone: '9594663710'
                    email: nobody@nomail.com
                end:
                  person:
                    name: John Doe
                  contact:
                    email: nobody@nomail.com
                    phone: '9898989898'
                  location:
                    gps: 19.131140,72.834091
                    address:
                      building: my building name or house
                      city: Mumbai
                      state: Maharashtra
                      country: IND
                      area_code: '400053'
                      locality: my street name
                      name: my house or door or floor
                  time:
                    range:
                      start: '2024-12-23T07:33:32.230Z'
                      end: '2024-12-23T07:04:32.230Z'
            quote:
              price:
                currency: INR
                value: '100.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/item_quantity':
                    count: 1
                  title: Plain Atta
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '100'
                  item:
                    price:
                      currency: INR
                      value: '100.00'
                - '@ondc/org/item_id': I1
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '00.00'
                - '@ondc/org/item_id': I1
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '00.00'
              ttl: P1D
            payment:
              params:
                amount: '100.00'
                currency: INR
                transaction_id: order_PjggJp7MccQmAa
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  beneficiary_name: xxxx
                  settlement_bank_account_no: xxxx
                  settlement_ifsc_code: xxxx
                  bank_name: xxxx
                  branch_name: xxxx
            tags:
              - code: bpp_terms
                list:
                  - code: np_type
                    value: MSN
                  - code: tax_number
                    value: 00ABCCH7409R1ZZ
                  - code: provider_tax_number
                    value: ABCDE1234F
                  - code: accept_bap_terms
                    value: 'Y'
              - code: bap_terms
                list:
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/protocol-network-extension/discussions/79
                  - code: tax_number
                    value: gst_number_of_buyerNP
            created_at: '2024-12-23T07:03:30.516Z'
            updated_at: '2024-12-23T07:03:32.230Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_state: $.message.order.state
        fulfillments: $.message.order.fulfillments[*]
      inputs: {}
  - api: cancel
    action_id: cancel
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyX2lkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIAogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIG9yZGVyX2lkCiAgaWYgKCFzZXNzaW9uRGF0YS5vcmRlcl9pZCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIG9yZGVyX2lkIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19PUkRFUl9JRCIsCiAgICB9OwogIH0KCiAgLy8gQWxsIHJlcXVpcmVtZW50cyBzYXRpc2ZpZWQKICByZXR1cm4gewogICAgdmFsaWQ6IHRydWUsCiAgICBkZXNjcmlwdGlvbjogIkFsbCBDaGVja3MgcGFzc2VkIHN1Y2Nlc3NmdWxseSIsCiAgICBjb2RlOiAiMjAwIiwKICB9Owp9Cg==
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: cancel
          timestamp: '2025-12-30T08:00:22.239Z'
          transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
          message_id: 84a4baa4-5a34-4d59-bc78-7cd078adc326
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order_id: 2024-08-08-250723
          cancellation_reason_id: '051'
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        message_id: $.context.message_id
        cancellation_reason_id: $.message.cancellation_reason_id
      inputs: {}
  - api: on_cancel
    action_id: on_cancel
    owner: BPP
    responseFor: cancel
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        YXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGUoCiAgZXhpc3RpbmdQYXlsb2FkLAogIHNlc3Npb25EYXRhCikgewogIGNvbnN0IGNhbmNlbEl0ZW1zID0gc2Vzc2lvbkRhdGEuaXRlbXMubWFwKChpdGVtKSA9PiB7CiAgICBjb25zdCBvYiA9IHsKICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgIHF1YW50aXR5OiB7CiAgICAgICAgY291bnQ6IGl0ZW0ucXVhbnRpdHkuY291bnQsCiAgICAgIH0sCiAgICAgIGZ1bGZpbGxtZW50X2lkOiAiY2FuY2VsX2lkXzgxODkiLAogICAgfTsKICAgIGl0ZW0ucXVhbnRpdHkuY291bnQgPSAwOwogICAgcmV0dXJuIG9iOwogIH0pOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0gWy4uLnNlc3Npb25EYXRhLml0ZW1zLCAuLi5jYW5jZWxJdGVtc107CiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIgPSBzZXNzaW9uRGF0YS5wcm92aWRlclswXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gc2Vzc2lvbkRhdGEuYmlsbGluZ1swXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBjcmVhdGVDYW5jZWxGdWxmaWxsbWVudHMoCiAgICBzZXNzaW9uRGF0YS5xdW90ZSwKICAgIHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cywKICAgIHNlc3Npb25EYXRhCiAgKTsKCiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnRbMF07CiAgZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaWQgPSBzZXNzaW9uRGF0YS5vcmRlcl9pZFswXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5jcmVhdGVkX2F0ID0gc2Vzc2lvbkRhdGEub3JkZXJfY3JlYXRlZF9hdFswXTsKICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbiA9IHsKICAgIGNhbmNlbGxlZF9ieTogZXhpc3RpbmdQYXlsb2FkLmNvbnRleHQuYmFwX2lkLAogICAgcmVhc29uOiB7CiAgICAgIGlkOiBzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fcmVhc29uX2lkWzBdLAogICAgfSwKICB9OwogIGV4aXN0aW5nUGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07CiAgZXhpc3RpbmdQYXlsb2FkLmNvbnRleHQubWVzc2FnZV9pZCA9IHNlc3Npb25EYXRhLm1lc3NhZ2VfaWRbMF07CiAgCiAgcmV0dXJuIGV4aXN0aW5nUGF5bG9hZDsKfQoKZnVuY3Rpb24gY3JlYXRlQ2FuY2VsRnVsZmlsbG1lbnRzKAogIHF1b3RlLAogIGZ1bGZpbGxtZW50cywKICBzZXNzaW9uRGF0YQopIHsKICBmdWxmaWxsbWVudHMgPSBmdWxmaWxsbWVudHMubWFwKChmKSA9PiB7CiAgICBjb25zdCB0YWdzID0gZi50YWdzIHx8IFtdOwogICAgcmV0dXJuIHsKICAgICAgLi4uZiwKICAgICAgc3RhdGU6IHsKICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICBjb2RlOiAiQ2FuY2VsbGVkIiwKICAgICAgICB9LAogICAgICB9LAogICAgICB0YWdzOiBbCiAgICAgICAgLi4udGFncywKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAiY2FuY2VsX3JlcXVlc3QiLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInJlYXNvbl9pZCIsCiAgICAgICAgICAgICAgdmFsdWU6IHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl9yZWFzb25faWRbMF0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiaW5pdGlhdGVkX2J5IiwKICAgICAgICAgICAgICB2YWx1ZTogc2Vzc2lvbkRhdGEuYmFwX2lkIHx8ICJiYXAiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNvZGU6ICJwcmVjYW5jZWxfc3RhdGUiLAogICAgICAgICAgbGlzdDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogImZ1bGZpbGxtZW50X3N0YXRlIiwKICAgICAgICAgICAgICB2YWx1ZTogIlBlbmRpbmciLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInVwZGF0ZWRfYXQiLAogICAgICAgICAgICAgIHZhbHVlOiBzZXNzaW9uRGF0YS5sYXN0X3VwZGF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9KTsKICBmdWxmaWxsbWVudHMucHVzaCh7CiAgICBpZDogImNhbmNlbF9pZF84MTg5IiwKICAgIHR5cGU6ICJDYW5jZWwiLAogICAgc3RhdGU6IHsKICAgICAgZGVzY3JpcHRvcjogewogICAgICAgIGNvZGU6ICJDYW5jZWxsZWQiLAogICAgICB9LAogICAgfSwKICAgIHRhZ3M6IGNyZWF0ZVF1b3RlVHJhaWwocXVvdGVbMF0pLAogIH0pOwogIHJldHVybiBmdWxmaWxsbWVudHM7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVF1b3RlVHJhaWwocXVvdGUpIHsKICBjb25zdCB0YWdzID0gW107CiAgY29uc3QgYnJlYWt1cCA9IHF1b3RlLmJyZWFrdXAgfHwgW107CiAgZm9yIChjb25zdCBpdGVtIG9mIGJyZWFrdXApIHsKICAgIGNvbnN0IHByaWNlU3RyID0gaXRlbS5wcmljZT8udmFsdWUgfHwgIjAuMDAiOwogICAgY29uc3QgcHJpY2VWYWx1ZSA9IHBhcnNlRmxvYXQocHJpY2VTdHIpOwogICAgaWYgKGl0ZW1bIkBvbmRjL29yZy9pdGVtX3F1YW50aXR5Il0pIHsKICAgICAgaXRlbVsiQG9uZGMvb3JnL2l0ZW1fcXVhbnRpdHkiXS5jb3VudCA9IDA7CiAgICB9CiAgICBpZiAocHJpY2VWYWx1ZSAhPT0gMCkgewogICAgICBjb25zdCB0cmFpbCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2FtcGxlUXVvdGVUcmFpbCkpOwogICAgICB0cmFpbC5saXN0WzBdLnZhbHVlID0gaXRlbVsiQG9uZGMvb3JnL3RpdGxlX3R5cGUiXSB8fCAibWlzYyI7CiAgICAgIHRyYWlsLmxpc3RbMV0udmFsdWUgPSBpdGVtWyJAb25kYy9vcmcvaXRlbV9pZCJdIHx8ICJ1bmtub3duIjsKICAgICAgdHJhaWwubGlzdFsyXS52YWx1ZSA9IGl0ZW0ucHJpY2U/LmN1cnJlbmN5IHx8ICJJTlIiOwogICAgICB0cmFpbC5saXN0WzNdLnZhbHVlID0gKC0xICogcHJpY2VWYWx1ZSkudG9GaXhlZCgyKTsKICAgICAgdGFncy5wdXNoKHRyYWlsKTsKICAgICAgaWYgKGl0ZW0ucHJpY2UpIHsKICAgICAgICBpdGVtLnByaWNlLnZhbHVlID0gIjAuMDAiOwogICAgICB9CiAgICB9CiAgfQogIGlmIChxdW90ZS5wcmljZSAmJiBxdW90ZS5wcmljZS52YWx1ZSkgewogICAgcXVvdGUucHJpY2UudmFsdWUgPSAiMC4wMCI7CiAgfQoKICByZXR1cm4gdGFnczsKfQoKY29uc3Qgc2FtcGxlUXVvdGVUcmFpbCA9IHsKICBjb2RlOiAicXVvdGVfdHJhaWwiLAogIGxpc3Q6IFsKICAgIHsKICAgICAgY29kZTogInR5cGUiLAogICAgICB2YWx1ZTogIm1pc2MiLAogICAgfSwKICAgIHsKICAgICAgY29kZTogImlkIiwKICAgICAgdmFsdWU6ICJjNGIyZGQ3NC05Y2NkLTRlYzEtYjhmOC01OGQzNmRkOGNlMzMiLAogICAgfSwKICAgIHsKICAgICAgY29kZTogImN1cnJlbmN5IiwKICAgICAgdmFsdWU6ICJJTlIiLAogICAgfSwKICAgIHsKICAgICAgY29kZTogInZhbHVlIiwKICAgICAgdmFsdWU6ICItMTAwLjAwIiwKICAgIH0sCiAgXSwKfTsK
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCi8qKgogKiBDaGVja3MgaWYgdGhlIHJlcXVpcmVtZW50cyBmb3IgcHJvY2VlZGluZyB3aXRoIHRoZSBBUEkgY2FsbCBhcmUgbWV0LgogKiAKICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiBtZWV0UmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgLy8gQ2hlY2sgZm9yIHNlbGVjdGVkX2l0ZW1zCiAgaWYgKCFzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcyB8fCBzZXNzaW9uRGF0YS5zZWxlY3RlZF9pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBzZWxlY3RlZF9pdGVtcyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfSVRFTVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBwYXlsb2FkX2NpdHkKICBpZiAoIXNlc3Npb25EYXRhLnBheWxvYWRfY2l0eSkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHBheWxvYWRfY2l0eSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUEFZTE9BRF9DSVRZIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLnNlbGVjdGVkX2Z1bGZpbGxtZW50cyB8fAogICAgc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMAogICkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfU0VMRUNURURfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcHJvdmlkZXIKICBpZiAoIXNlc3Npb25EYXRhLnByb3ZpZGVyKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gcHJvdmlkZXIgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1BST1ZJREVSIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgcXVvdGUKICBpZiAoIXNlc3Npb25EYXRhLnF1b3RlIHx8IHR5cGVvZiBzZXNzaW9uRGF0YS5xdW90ZSAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBxdW90ZSBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfUVVPVEUiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBvbl9zZWxlY3RfZnVsZmlsbG1lbnRzCiAgaWYgKAogICAgIXNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9mdWxmaWxsbWVudHMubGVuZ3RoID09PSAwCiAgKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gb25fc2VsZWN0X2Z1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfT05fU0VMRUNUX0ZVTEZJTExNRU5UUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIG9uX3NlbGVjdF9pdGVtcwogIGlmICgKICAgICFzZXNzaW9uRGF0YS5vbl9zZWxlY3RfaXRlbXMgfHwKICAgIHNlc3Npb25EYXRhLm9uX3NlbGVjdF9pdGVtcy5sZW5ndGggPT09IDAKICApIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBvbl9zZWxlY3RfaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX09OX1NFTEVDVF9JVEVNUyIsCiAgICB9OwogIH0KCiAgLy8gQ2hlY2sgZm9yIHRhdAogIGlmICghc2Vzc2lvbkRhdGEudGF0KSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gdGF0IGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19UQVQiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBpdGVtcwogIGlmICghc2Vzc2lvbkRhdGEuaXRlbXMgfHwgc2Vzc2lvbkRhdGEuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gaXRlbXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX0lURU1TIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgYmlsbGluZwogIGlmICghc2Vzc2lvbkRhdGEuYmlsbGluZyB8fCB0eXBlb2Ygc2Vzc2lvbkRhdGEuYmlsbGluZyAhPT0gIm9iamVjdCIpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICJObyBiaWxsaW5nIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CSUxMSU5HIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3IgZnVsZmlsbG1lbnRzCiAgaWYgKCFzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHMgfHwgc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIGZ1bGZpbGxtZW50cyBhdmFpbGFibGUgaW4gc2Vzc2lvbiBkYXRhIiwKICAgICAgY29kZTogIk1JU1NJTkdfRlVMRklMTE1FTlRTIiwKICAgIH07CiAgfQoKICAvLyBDaGVjayBmb3Igc2VsZWN0ZWRfbnBfZmVlcwogIGlmICghc2Vzc2lvbkRhdGEuc2VsZWN0ZWRfbnBfZmVlcykgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvbjogIk5vIHNlbGVjdGVkX25wX2ZlZXMgYXZhaWxhYmxlIGluIHNlc3Npb24gZGF0YSIsCiAgICAgIGNvZGU6ICJNSVNTSU5HX1NFTEVDVEVEX05QX0ZFRVMiLAogICAgfTsKICB9CgogIC8vIENoZWNrIGZvciBicHBfdGVybXMgKE5FVykKICBpZiAoIXNlc3Npb25EYXRhLmJwcF90ZXJtcyB8fCBzZXNzaW9uRGF0YS5icHBfdGVybXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiTm8gYnBwX3Rlcm1zIGF2YWlsYWJsZSBpbiBzZXNzaW9uIGRhdGEiLAogICAgICBjb2RlOiAiTUlTU0lOR19CUFBfVEVSTVMiLAogICAgfTsKICB9CgogIC8vIEFsbCByZXF1aXJlbWVudHMgc2F0aXNmaWVkCiAgcmV0dXJuIHsKICAgIHZhbGlkOiB0cnVlLAogICAgZGVzY3JpcHRpb246ICJBbGwgQ2hlY2tzIHBhc3NlZCBzdWNjZXNzZnVsbHkiLAogICAgY29kZTogIjIwMCIsCiAgfTsKfQo=
      defaultPayload:
        context:
          domain: ONDC:RET10
          action: on_cancel
          timestamp: '2025-12-30T08:00:30.113Z'
          transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
          message_id: de93e4f2-0f69-4d23-8c53-6a181ece2b50
          bap_id: sample-bap-id
          bap_uri: https://bap.example.com
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: https://bpp.example.com
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            state: Cancelled
            items:
              - id: 839cb128-34bd-444d-9ffc-05903e62b35a
                quantity:
                  count: 0
                fulfillment_id: c4b2dd74-9ccd-4ec1-b8f8-58d36dd8ce33
              - id: 839cb128-34bd-444d-9ffc-05903e62b35a
                quantity:
                  count: 1
                fulfillment_id: 0b562bd4-57fa-452b-8573-142d18ad326e
            provider:
              id: 5b3981a7-512d-4ac4-bd75-ea48eff89a53
              locations:
                - id: 668e238e1b106d310473ddb0
            billing:
              address:
                name: Tanishq Mishra
                building: New_Building
                locality: 6th Cross Road
                city: Bengaluru
                state: Karnataka
                country: IND
                area_code: '560027'
              phone: '9399788618'
              name: Tanishq Mishra
              email: mishratanishq619@gmail.com
              created_at: '2024-08-08T07:40:37.071Z'
              updated_at: '2024-08-08T07:40:37.071Z'
            fulfillments:
              - id: c4b2dd74-9ccd-4ec1-b8f8-58d36dd8ce33
                '@ondc/org/provider_name': Seller Business
                '@ondc/org/TAT': PT96H
                state:
                  descriptor:
                    code: Cancelled
                type: Delivery
                tracking: false
                start:
                  location:
                    id: 668e238e1b106d310473ddb0
                    descriptor:
                      name: Seller Business
                    gps: 12.92580970146639,77.58362409712942
                    address:
                      locality: Jayanagar
                      city: Bengaluru
                      area_code: '560011'
                      state: Karnataka
                  contact:
                    email: test@gmail.com
                    phone: '9876543210'
                end:
                  person:
                    name: Tanishq Mishra
                  contact:
                    email: mishratanishq619@gmail.com
                    phone: '9399788618'
                  location:
                    gps: 12.966545,77.592074
                    address:
                      name: Tanishq Mishra
                      building: New_Building
                      locality: 6th Cross Road
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '560027'
                tags:
                  - code: cancel_request
                    list:
                      - code: reason_id
                        value: '001'
                      - code: initiated_by
                        value: buyerNP.com
                  - code: precancel_state
                    list:
                      - code: fulfillment_state
                        value: Pending
                      - code: updated_at
                        value: '2024-08-08T07:41:05.125Z'
              - id: 0b562bd4-57fa-452b-8573-142d18ad326e
                type: Cancel
                state:
                  descriptor:
                    code: Cancelled
                tags:
                  - code: quote_trail
                    list:
                      - code: type
                        value: misc
                      - code: id
                        value: c4b2dd74-9ccd-4ec1-b8f8-58d36dd8ce33
                      - code: currency
                        value: INR
                      - code: value
                        value: '-100.00'
                  - code: quote_trail
                    list:
                      - code: type
                        value: delivery
                      - code: id
                        value: c4b2dd74-9ccd-4ec1-b8f8-58d36dd8ce33
                      - code: currency
                        value: INR
                      - code: value
                        value: '-493.75'
                  - code: quote_trail
                    list:
                      - code: type
                        value: item
                      - code: id
                        value: 839cb128-34bd-444d-9ffc-05903e62b35a
                      - code: currency
                        value: INR
                      - code: value
                        value: '-2260.00'
            quote:
              price:
                currency: INR
                value: '0'
              breakup:
                - '@ondc/org/item_id': 839cb128-34bd-444d-9ffc-05903e62b35a
                  '@ondc/org/item_quantity':
                    count: 0
                  title: Butterfly Beutiful 12 Gold Necklace
                  '@ondc/org/title_type': item
                  price:
                    currency: INR
                    value: '0'
                  item:
                    price:
                      currency: INR
                      value: '2260.00'
                - '@ondc/org/item_id': c4b2dd74-9ccd-4ec1-b8f8-58d36dd8ce33
                  title: Delivery charges
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '0'
                - '@ondc/org/item_id': c4b2dd74-9ccd-4ec1-b8f8-58d36dd8ce33
                  title: Convenience Fee
                  '@ondc/org/title_type': misc
                  price:
                    currency: INR
                    value: '0'
              ttl: P1D
            payment:
              uri: https://razorpay.com/
              tl_method: http/get
              params:
                amount: '2853.75'
                currency: INR
                transaction_id: 043e401b-8dc8-457a-b4cd-5a32180c4e05
              status: PAID
              type: ON-ORDER
              collected_by: BAP
              '@ondc/org/buyer_app_finder_fee_type': percent
              '@ondc/org/buyer_app_finder_fee_amount': '3.0'
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_phase: sale-amount
                  settlement_type: neft
                  upi_address: gft@oksbi
                  settlement_bank_account_no: '34234343434'
                  settlement_ifsc_code: SBIN0000123
                  beneficiary_name: Seller Name
                  bank_name: SBI
                  branch_name: Nellore
            id: 2024-08-08-250723
            created_at: '2024-08-08T07:41:04.771Z'
            updated_at: '2024-08-08T07:41:39.871Z'
            cancellation:
              cancelled_by: buyerNP.com
              reason:
                id: '001'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        items: $.message.order.items[*]
        on_status_fulfillments: $.message.order.fulfillments[*]
      inputs: {}
transaction_history:
  - action_id: select
    payload:
      context:
        domain: ONDC:RET10
        action: select
        timestamp: '2026-02-04T13:05:29.527Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 44ccba8a-21aa-4b1d-b8bb-f9cd3efb9896
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: std:011
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              quantity:
                count: 1
              location: L1
          fulfillments:
            - end:
                location:
                  gps: 19.129076,72.825803
                  address:
                    area_code: '400053'
    saved_info: {}
  - action_id: on_select
    payload:
      context:
        domain: ONDC:RET10
        action: on_select
        timestamp: '2026-02-04T13:05:29.552Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 44ccba8a-21aa-4b1d-b8bb-f9cd3efb9896
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          fulfillments:
            - id: F1
              type: Delivery
              '@ondc/org/provider_name': LSP or Provider Name
              tracking: true
              '@ondc/org/category': Standard Delivery
              '@ondc/org/TAT': P2D
              state:
                descriptor:
                  code: Serviceable
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Plain Atta
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '200.00'
                item:
                  quantity:
                    available:
                      count: '99'
                    maximum:
                      count: '99'
                  price:
                    currency: INR
                    value: '200.00'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '00.00'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '00.00'
            price:
              currency: INR
              value: '200.00'
            ttl: P1D
          items:
            - id: I1
              fulfillment_id: F1
    saved_info: {}
  - action_id: init
    payload:
      context:
        domain: ONDC:RET10
        action: init
        timestamp: '2026-02-04T13:05:29.566Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 6df35e56-9682-489e-af60-db1112df62e5
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
          billing:
            address:
              building: my building name or house
              city: Mumbai
              state: Maharashtra
              country: IND
              area_code: '400053'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC buyer
            email: nobody@nomail.com
            created_at: '2026-02-04T13:05:24.569Z'
            updated_at: '2026-02-04T13:05:24.569Z'
          fulfillments:
            - id: F1
              type: Delivery
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
          offers: []
    saved_info: {}
  - action_id: on_init
    payload:
      context:
        domain: ONDC:RET10
        action: on_init
        timestamp: '2026-02-04T13:05:29.579Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 6df35e56-9682-489e-af60-db1112df62e5
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
          billing:
            address:
              building: my building name or house
              city: Mumbai
              state: Maharashtra
              country: IND
              area_code: '400053'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC buyer
            email: nobody@nomail.com
            created_at: '2026-02-04T13:05:24.569Z'
            updated_at: '2026-02-04T13:05:24.569Z'
          fulfillments:
            - id: F1
              type: Delivery
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
              tracking: true
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Plain Atta
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '200.00'
                item:
                  price:
                    currency: INR
                    value: '200.00'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '00.00'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '00.00'
            price:
              currency: INR
              value: '200.00'
            ttl: P1D
          payment:
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: XXXX
                settlement_ifsc_code: XXXX
                bank_name: XXXX
                branch_name: XXXX
          tags:
            - code: bpp_terms
              list:
                - code: np_type
                  value: MSN
                - code: tax_number
                  value: 00ABCCH7409R1ZZ
                - code: provider_tax_number
                  value: ABCDE1234F
    saved_info: {}
  - action_id: confirm
    payload:
      context:
        domain: ONDC:RET10
        action: confirm
        timestamp: '2026-02-04T13:05:29.591Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 33137cd5-ebed-47a8-947d-7675abc9beb8
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '600245'
          state: Created
          billing:
            address:
              building: my building name or house
              city: Mumbai
              state: Maharashtra
              country: IND
              area_code: '400053'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC buyer
            email: nobody@nomail.com
            created_at: '2026-02-04T13:05:24.569Z'
            updated_at: '2026-02-04T13:05:24.569Z'
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
          provider:
            id: P1
            locations:
              - id: L1
          fulfillments:
            - id: F1
              type: Delivery
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
              tracking: true
              '@ondc/org/category': Standard Delivery
              '@ondc/org/TAT': P2D
          payment:
            params:
              amount: '200.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_basis': delivery
            '@ondc/org/settlement_window': P1D
            '@ondc/org/withholding_amount': '00.00'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: xxxx
                settlement_ifsc_code: xxxx
                bank_name: xxxx
                branch_name: xxxx
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Plain Atta
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '200.00'
                item:
                  price:
                    currency: INR
                    value: '200.00'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '00.00'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '00.00'
            price:
              currency: INR
              value: '200.00'
            ttl: P1D
          tags:
            - code: bpp_terms
            - code: bap_terms
              list:
                - code: accept_bpp_terms
                  value: 'Y'
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/NP-Static-Terms/buyerNP_BNP/1.0/tc.pdf
                - code: tax_number
                  value: 00ABCCH7409R1ZZ
          created_at: '2026-02-04T13:05:29.594Z'
          updated_at: '2026-02-04T13:05:29.594Z'
    saved_info: {}
  - action_id: on_confirm
    payload:
      context:
        domain: ONDC:RET10
        action: on_confirm
        timestamp: '2026-02-04T13:05:29.600Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 33137cd5-ebed-47a8-947d-7675abc9beb8
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: '600245'
          state: Created
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 1
          billing:
            address:
              building: my building name or house
              city: Mumbai
              state: Maharashtra
              country: IND
              area_code: '400053'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC buyer
            email: nobody@nomail.com
            created_at: '2026-02-04T13:05:24.569Z'
            updated_at: '2026-02-04T13:05:24.569Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Pending
              '@ondc/org/TAT': P2D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 1
                title: Plain Atta
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '200.00'
                item:
                  price:
                    currency: INR
                    value: '200.00'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '00.00'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '00.00'
            price:
              currency: INR
              value: '200.00'
            ttl: P1D
          payment:
            params:
              amount: '200.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_basis': delivery
            '@ondc/org/settlement_window': P1D
            '@ondc/org/withholding_amount': '00.00'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: xxxx
                settlement_ifsc_code: xxxx
                bank_name: xxxx
                branch_name: xxxx
          tags:
            - code: bpp_terms
              list:
                - code: np_type
                  value: MSN
                - code: tax_number
                  value: 00ABCCH7409R1ZZ
                - code: provider_tax_number
                  value: ABCDE1234F
                - code: accept_bap_terms
                  value: 'Y'
            - code: bap_terms
              list:
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/protocol-network-extension/discussions/79
                - code: tax_number
                  value: 00ABCCH7409R1ZZ
          created_at: '2026-02-04T13:05:29.594Z'
          updated_at: '2026-02-04T13:05:29.605Z'
    saved_info: {}
  - action_id: cancel
    payload:
      context:
        domain: ONDC:RET10
        action: cancel
        timestamp: '2026-02-04T13:05:29.612Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 6ac60c30-1598-459b-a5b4-5b1cdbb3fbc2
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order_id: '600245'
        cancellation_reason_id: '051'
    saved_info: {}
  - action_id: on_cancel
    payload:
      context:
        domain: ONDC:RET10
        action: on_cancel
        timestamp: '2026-02-04T13:05:29.624Z'
        transaction_id: 33127360-aa12-4c0a-a92a-cd6602731e31
        message_id: 6ac60c30-1598-459b-a5b4-5b1cdbb3fbc2
        bap_id: sample-bap-id
        bap_uri: https://bap.example.com
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: https://bpp.example.com
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          state: Cancelled
          items:
            - id: I1
              fulfillment_id: F1
              quantity:
                count: 0
            - id: I1
              quantity:
                count: 1
              fulfillment_id: cancel_id_8189
          provider:
            id: P1
            locations:
              - id: L1
          billing:
            address:
              building: my building name or house
              city: Mumbai
              state: Maharashtra
              country: IND
              area_code: '400053'
              locality: my street name
              name: my house or door or floor
            phone: '9898989898'
            name: ONDC buyer
            email: nobody@nomail.com
            created_at: '2026-02-04T13:05:24.569Z'
            updated_at: '2026-02-04T13:05:24.569Z'
          fulfillments:
            - id: F1
              type: Delivery
              tracking: true
              state:
                descriptor:
                  code: Cancelled
              '@ondc/org/TAT': P2D
              '@ondc/org/provider_name': Store 1
              start:
                location:
                  id: L1
                  descriptor:
                    name: Store 1
                  gps: 19.129076,72.825803
                  address:
                    street: 1 & 2,AMAR JYOTI CHS.BLDG.,OPP.NAND KRIPA HALL
                    locality: ANDHERI FOUR BUNGLOW AMAR JYOTI CHS
                    city: mock-seller-city
                    state: mock-state
                    area_code: '400053'
                contact:
                  phone: '9594663710'
                  email: nobody@nomail.com
              end:
                contact:
                  email: nobody@nomail.com
                  phone: '9898989898'
                person:
                  name: mock-person
                location:
                  gps: 19.129076,72.825803
                  address:
                    building: mock-building
                    city: mock-city
                    state: mock-state
                    country: IND
                    area_code: '400053'
                    locality: mock-locality
                    name: mock-house-name
              tags:
                - code: cancel_request
                  list:
                    - code: reason_id
                      value: '051'
                    - code: initiated_by
                      value: bap
                - code: precancel_state
                  list:
                    - code: fulfillment_state
                      value: Pending
                    - code: updated_at
                      value: '2026-02-04T13:05:29.633Z'
            - id: cancel_id_8189
              type: Cancel
              state:
                descriptor:
                  code: Cancelled
              tags:
                - code: quote_trail
                  list:
                    - code: type
                      value: item
                    - code: id
                      value: I1
                    - code: currency
                      value: INR
                    - code: value
                      value: '-200.00'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/item_quantity':
                  count: 0
                title: Plain Atta
                '@ondc/org/title_type': item
                price:
                  currency: INR
                  value: '0.00'
                item:
                  price:
                    currency: INR
                    value: '200.00'
              - '@ondc/org/item_id': F1
                title: Delivery charges
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '00.00'
              - '@ondc/org/item_id': F1
                title: Convenience Fee
                '@ondc/org/title_type': misc
                price:
                  currency: INR
                  value: '00.00'
            price:
              currency: INR
              value: '0.00'
            ttl: P1D
          payment:
            params:
              amount: '200.00'
              currency: INR
              transaction_id: mock_payment_id_123
            status: PAID
            type: ON-ORDER
            collected_by: BAP
            '@ondc/org/buyer_app_finder_fee_type': percent
            '@ondc/org/buyer_app_finder_fee_amount': '3.0'
            '@ondc/org/settlement_basis': delivery
            '@ondc/org/settlement_window': P1D
            '@ondc/org/withholding_amount': '00.00'
            '@ondc/org/settlement_details':
              - settlement_counterparty: seller-app
                settlement_phase: sale-amount
                settlement_type: neft
                beneficiary_name: xxxx
                settlement_bank_account_no: xxxx
                settlement_ifsc_code: xxxx
                bank_name: xxxx
                branch_name: xxxx
          id: '600245'
          created_at: '2026-02-04T13:05:29.594Z'
          updated_at: '2026-02-04T13:05:29.633Z'
          cancellation:
            cancelled_by: sample-bap-id
            reason:
              id: '051'
    saved_info: {}
validationLib: ''
helperLib: ''
