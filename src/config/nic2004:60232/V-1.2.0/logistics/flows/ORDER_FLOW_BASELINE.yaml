meta:
  domain: 'nic2004:60232'
  version: 1.2.0
  flowId: ORDER_FLOW_BASELINE
transaction_data:
  transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
  latest_timestamp: '1970-01-01T00:00:00.000Z'
  bap_id: sample-bap-id
  bap_uri: 'https://bap.example.com'
  bpp_id: sample-bpp-id
  bpp_uri: 'https://bpp.example.com'
steps:
  - api: search
    action_id: search_1
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBpbnB1dHMgPSBzZXNzaW9uRGF0YS51c2VyX2lucHV0czsKICBjb25zdCBUYXRNYXBwaW5nID0gewogICAgIkltbWVkaWF0ZSBEZWxpdmVyeSI6IHsKICAgICAgY29kZTogIlBUNjBNIiwKICAgICAgZGF5OiAwLAogICAgICBwaWNrdXBUaW1lOiAiUFQxNU0iLAogICAgICBvcmRlclByZXBUaW1lOiAiUFQxME0iLAogICAgfSwKICAgICJTYW1lIERheSBEZWxpdmVyeSI6IHsKICAgICAgY29kZTogIlBUNEgiLAogICAgICBkYXk6IDAsCiAgICAgIHBpY2t1cFRpbWU6ICJQVDFIIiwKICAgICAgb3JkZXJQcmVwVGltZTogIlBUMUgiLAogICAgfSwKICAgICJOZXh0IERheSBEZWxpdmVyeSI6IHsKICAgICAgY29kZTogIlAxRCIsCiAgICAgIGRheTogMSwKICAgICAgcGlja3VwVGltZTogIlBUNEgiLAogICAgICBvcmRlclByZXBUaW1lOiAiUFQ0SCIsCiAgICB9LAogICAgIlN0YW5kYXJkIERlbGl2ZXJ5IjogewogICAgICBjb2RlOiAiUDJEIiwKICAgICAgZGF5OiAyLAogICAgICBwaWNrdXBUaW1lOiAiUFQxMkgiLAogICAgICBvcmRlclByZXBUaW1lOiAiUFQxMkgiLAogICAgfSwKICAgICJFeHByZXNzIERlbGl2ZXJ5IjogewogICAgICBjb2RlOiAiUDNEIiwKICAgICAgZGF5OiAyLAogICAgICBwaWNrdXBUaW1lOiAiUDFEIiwKICAgICAgb3JkZXJQcmVwVGltZTogIlAxRCIsCiAgICB9LAogICAgIkluc3RhbnQgRGVsaXZlcnkiOiB7CiAgICAgIGNvZGU6ICJQVDEwTSIsCiAgICAgIGRheTogMCwKICAgICAgcGlja3VwVGltZTogIlBUMk0iLAogICAgICBvcmRlclByZXBUaW1lOiAiUFQyTSIsCiAgICB9LAogIH07CiAgY29uc29sZS5sb2coImluc2lkZSBzZWFyY2ggZ2VuZXJhdG9yIiwgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGEuY2F0ZWdvcnkpKTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5pbnRlbnQucHJvdmlkZXIudGltZS5zY2hlZHVsZS5ob2xpZGF5cyA9IFsKICAgIGdldEZ1dHVyZURhdGUoMTApLAogICAgZ2V0RnV0dXJlRGF0ZSgxNSksCiAgXTsKICBkZWZhdWx0UGF5bG9hZC5jb250ZXh0LmNpdHkgPSBpbnB1dHMuY2l0eV9jb2RlOwoKCiAgaWYgKGlucHV0cz8uY2F0ZWdvcnkpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UuaW50ZW50LmNhdGVnb3J5LmlkID0gaW5wdXRzLmNhdGVnb3J5OwogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5pbnRlbnQucGF5bWVudC50eXBlID0gaW5wdXRzLnBheW1lbnRUeXBlOwoKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UuaW50ZW50LnByb3ZpZGVyLnRpbWUuZHVyYXRpb24gPQogICAgICBUYXRNYXBwaW5nW2lucHV0cz8uY2F0ZWdvcnldLm9yZGVyUHJlcFRpbWU7CiAgfQoKICBjb25zdCBkZWxpdmVyeUZ1bGZpbGxtZW50ID0gewogICAgdHlwZTogIkRlbGl2ZXJ5IiwKICAgIHN0YXJ0OiB7CiAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgZ3BzOiBpbnB1dHMuc3RhcnRfZ3BzLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGFyZWFfY29kZTogaW5wdXRzLnN0YXJ0X2NvZGUKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBlbmQ6IHsKICAgICAgbG9jYXRpb246IHsKICAgICAgICBncHM6IGlucHV0cy5lbmRfZ3BzLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGFyZWFfY29kZTogaW5wdXRzLmVuZF9jb2RlCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UuaW50ZW50LmZ1bGZpbGxtZW50ID0gZGVsaXZlcnlGdWxmaWxsbWVudDsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5pbnRlbnRbIkBvbmRjL29yZy9wYXlsb2FkX2RldGFpbHMiXS5jYXRlZ29yeSA9CiAgICBpbnB1dHM/LnJldGFpbENhdGVnb3J5IHx8ICJHcm9jZXJ5IjsKCiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          country: IND
          city: 'std:080'
          action: search
          core_version: 1.2.0
          bap_id: biz.test.bitsila.com
          bap_uri: 'https://biz.test.bitsila.com/ecc/ondc/logistics-bap'
          transaction_id: T1
          message_id: M1
          timestamp: '2024-04-08T11:53:11.349Z'
          ttl: PT30S
        message:
          intent:
            category:
              id: Immediate Delivery
            payment:
              type: ON-ORDER
            '@ondc/org/payload_details':
              weight:
                unit: kilogram
                value: 1
              value:
                currency: INR
                value: '388.5'
              dimensions:
                length:
                  unit: meter
                  value: 0.1
                breadth:
                  unit: meter
                  value: 0.1
                height:
                  unit: meter
                  value: 0.1
              category: F&B
            fulfillment:
              type: Delivery
              start:
                location:
                  id: '3849:4120'
                  gps: '12.916691283211073, 77.64782934951943'
                  address:
                    area_code: '560102'
              end:
                location:
                  gps: '12.9180305, 77.6372603'
                  address:
                    area_code: '560102'
            provider:
              time:
                days: '1,2,3,4,5,6,7'
                range:
                  start: '0700'
                  end: '2355'
                schedule:
                  holidays: []
                duration: PT15M
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        category_id: $.message.intent.category.id
        start_location: $.message.intent.fulfillment.start.location.gps
        start_area_code: $.message.intent.fulfillment.start.location.address.area_code
        end_location: $.message.intent.fulfillment.end.location.gps
        end_area_code: $.message.intent.fulfillment.end.location.address.area_code
        payment_type: $.message.intent.payment.type
        city_code: $.context.city
        fulfillment: $.message.intent.fulfillment
        retail_category: '$.message.intent[''@ondc/org/payload_details''].category'
      inputs:
        id: LogisticsSearchInput
        jsonSchema:
          $schema: 'http://json-schema.org/draft-07/schema#'
          type: object
          properties:
            retailCategory:
              type: string
              description: Select retail item category
              enum:
                - F&B
                - Grocery
                - Fashion
                - BPC
                - Electronics
                - Appliances
                - Home & Kitchen
                - Health & Wellness
                - Pharma
                - Auto components
                - C2C parcels
              default: F&B
            category:
              type: string
              description: Select a delivery category
              enum:
                - Immediate Delivery
                - Standard Delivery
                - Express Delivery
                - Next Day Delivery
                - Same Day Delivery
              default: Immediate Delivery
            paymentType:
              type: string
              description: Select payment type
              enum:
                - POST-FULFILLMENT
                - ON-ORDER
                - ON-FULFILLMENT
              default: POST-FULFILLMENT
            city_code:
              type: string
              description: City STD code
              pattern: '^std:\d+$'
              default: 'std:080'
            start_gps:
              type: string
              description: 'Start GPS coordinates (lat,long)'
              pattern: >-
                ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
              default: '12.4535,77.9283'
            end_gps:
              type: string
              description: 'End GPS coordinates (lat,long)'
              pattern: >-
                ^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$
              default: '12.4535,77.9283'
            start_code:
              type: string
              description: Start area pincode
              pattern: '^\d{6}$'
              default: '560001'
            end_code:
              type: string
              description: End area pincode
              pattern: '^\d{6}$'
              default: '560001'
          required:
            - retailCategory
            - category
            - paymentType
            - city_code
            - start_gps
            - end_gps
            - start_code
            - end_code
          additionalProperties: false
  - api: on_search
    action_id: on_search_1
    owner: BPP
    responseFor: search_1
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zdCBUYXRNYXBwaW5nID0gewogICAgIkltbWVkaWF0ZSBEZWxpdmVyeSI6IHsgY29kZTogIlBUNjBNIiwgZGF5OiAwLCBwaWNrdXBUaW1lOiAiUFQxNU0iIH0sCiAgICAiU2FtZSBEYXkgRGVsaXZlcnkiOiB7IGNvZGU6ICJQVDRIIiwgZGF5OiAwLCBwaWNrdXBUaW1lOiAiUFQxSCIgfSwKICAgICJOZXh0IERheSBEZWxpdmVyeSI6IHsgY29kZTogIlAxRCIsIGRheTogMSwgcGlja3VwVGltZTogIlBUNEgiIH0sCiAgICAiU3RhbmRhcmQgRGVsaXZlcnkiOiB7IGNvZGU6ICJQMkQiLCBkYXk6IDIsIHBpY2t1cFRpbWU6ICJQVDEySCIgfSwKICAgICJFeHByZXNzIERlbGl2ZXJ5IjogeyBjb2RlOiAiUDNEIiwgZGF5OiAzLCBwaWNrdXBUaW1lOiAiUDFEIiB9LAogICAgIkluc3RhbnQgRGVsaXZlcnkiOiB7IGNvZGU6ICJQVDEwTSIsIGRheTogMCwgcGlja3VwVGltZTogIlBUMk0iIH0sCiAgfTsKICAvLyBkZWZhdWx0UGF5bG9hZC5jb250ZXh0Lm1lc3NhZ2VfaWQgPSBzZXNzaW9uRGF0YS5sYXRlc3RNZXNzYWdlX2lkWzBdOwogIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQuY2l0eSA9IHNlc3Npb25EYXRhLmNpdHlfY29kZVswXTsKCiAgY29uc29sZS5sb2coImNhdGVnb3J5X2lkIiwgc2Vzc2lvbkRhdGE/LmNhdGVnb3J5X2lkWzBdKQoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLmNhdGFsb2dbImJwcC9kZXNjcmlwdG9yIl0udGFnc1swXS5saXN0ID0KICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UuY2F0YWxvZ1siYnBwL2Rlc2NyaXB0b3IiXS50YWdzWzBdLmxpc3QubWFwKAogICAgICAoaXRlbSkgPT4gewogICAgICAgIGlmIChpdGVtLmNvZGUgPT09ICJlZmZlY3RpdmVfZGF0ZSIpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvZGU6IGl0ZW0uY29kZSwKICAgICAgICAgICAgdmFsdWU6IGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wLAogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9CiAgICApOwoKICBjb25zdCBjYXRlZ29yaWVzRGF0YSA9IHsKICAgIGlkOiBzZXNzaW9uRGF0YS5jYXRlZ29yeV9pZFswXSwKICAgIHRpbWU6IHsKICAgICAgbGFiZWw6ICJUQVQiLAogICAgICBkdXJhdGlvbjogVGF0TWFwcGluZ1tzZXNzaW9uRGF0YT8uY2F0ZWdvcnlfaWRbMF1dLmNvZGUsCiAgICAgIHRpbWVzdGFtcDogZ2V0RnV0dXJlRGF0ZSgKICAgICAgICBUYXRNYXBwaW5nW3Nlc3Npb25EYXRhPy5jYXRlZ29yeV9pZFswXV0uZGF5CiAgICAgICksCiAgICB9LAogIH07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5jYXRhbG9nWyJicHAvcHJvdmlkZXJzIl1bMF0uY2F0ZWdvcmllc1swXSA9CiAgICBjYXRlZ29yaWVzRGF0YTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5jYXRhbG9nWyJicHAvcHJvdmlkZXJzIl1bMF0uaXRlbXMgPQogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5jYXRhbG9nWyJicHAvcHJvdmlkZXJzIl1bMF0uaXRlbXMubWFwKAogICAgICAoaXRlbSkgPT4gewogICAgICAgIGNvbnN0IGRlbGl2ZXJ5RnVsZmlsbG1lbnQgPQogICAgICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5jYXRhbG9nPy5bImJwcC9wcm92aWRlcnMiXT8uWzBdPy5mdWxmaWxsbWVudHM/LmZpbmQoCiAgICAgICAgICAgIChmdWxmaWxsbWVudCkgPT4gZnVsZmlsbG1lbnQudHlwZSA9PT0gIkRlbGl2ZXJ5IgogICAgICAgICAgKSB8fCBudWxsOwogICAgICAgIGlmICgKICAgICAgICAgIEFycmF5LmlzQXJyYXkoc2Vzc2lvbkRhdGEuY2F0ZWdvcnlfaWQpICYmCiAgICAgICAgICBzZXNzaW9uRGF0YS5jYXRlZ29yeV9pZFswXSA9PT0gIlN0YW5kYXJkIERlbGl2ZXJ5IiAmJgogICAgICAgICAgZGVsaXZlcnlGdWxmaWxsbWVudCAmJgogICAgICAgICAgaXRlbS5mdWxmaWxsbWVudF9pZCA9PT0gZGVsaXZlcnlGdWxmaWxsbWVudC5pZAogICAgICAgICkgewogICAgICAgICAgaXRlbS5kZXNjcmlwdG9yID0gaXRlbS5kZXNjcmlwdG9yIHx8IHt9OwogICAgICAgICAgaXRlbS5kZXNjcmlwdG9yLmNvZGUgPSAiUDJIMlAiOwogICAgICAgIH0KICAgICAgICBpdGVtLmNhdGVnb3J5X2lkID0gc2Vzc2lvbkRhdGEuY2F0ZWdvcnlfaWRbMF07CiAgICAgICAgaXRlbS50aW1lID0gewogICAgICAgICAgbGFiZWw6ICJUQVQiLAogICAgICAgICAgZHVyYXRpb246IFRhdE1hcHBpbmdbc2Vzc2lvbkRhdGEuY2F0ZWdvcnlfaWRdLmNvZGUsCiAgICAgICAgICB0aW1lc3RhbXA6IGdldEZ1dHVyZURhdGUoCiAgICAgICAgICAgIFRhdE1hcHBpbmdbc2Vzc2lvbkRhdGEuY2F0ZWdvcnlfaWRdLmRheQogICAgICAgICAgKSwKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfQogICAgKTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5jYXRhbG9nWyJicHAvcHJvdmlkZXJzIl1bMF0uZnVsZmlsbG1lbnRzID0KICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UuY2F0YWxvZ1siYnBwL3Byb3ZpZGVycyJdWzBdLmZ1bGZpbGxtZW50cy5tYXAoCiAgICAgIChmdWxmaWxsbWVudCkgPT4gewogICAgICAgIGlmIChmdWxmaWxsbWVudC50eXBlID09PSAiRGVsaXZlcnkiIHx8IGZ1bGZpbGxtZW50LnR5cGUgPT09ICJSZXR1cm4iKSB7CiAgICAgICAgICBpZiAoc2Vzc2lvbkRhdGE/LmNhdGVnb3J5X2lkWzBdID09PSAiU3RhbmRhcmQgRGVsaXZlcnkiIHx8IHNlc3Npb25EYXRhPy5jYXRlZ29yeV9pZFswXSA9PT0gIk5leHQgRGF5IERlbGl2ZXJ5IiB8fCBzZXNzaW9uRGF0YT8uY2F0ZWdvcnlfaWRbMF0gPT09ICJFeHByZXNzIERlbGl2ZXJ5IiB8fCBzZXNzaW9uRGF0YT8uY2F0ZWdvcnlfaWRbMF0gPT09ICJTYW1lIERheSBEZWxpdmVyeSIpIHsKICAgICAgICAgICAgcmVtb3ZlVGFnc0J5Q29kZXMoZnVsZmlsbG1lbnQudGFncywgWyJkaXN0YW5jZSJdKTsKICAgICAgICAgICAgaWYgKGZ1bGZpbGxtZW50LnRhZ3MubGVuZ3RoIDwgMSkgZGVsZXRlIGZ1bGZpbGxtZW50LnRhZ3M7CiAgICAgICAgICB9CiAgICAgICAgICBmdWxmaWxsbWVudC5zdGFydC50aW1lLmR1cmF0aW9uID0KICAgICAgICAgICAgVGF0TWFwcGluZ1tzZXNzaW9uRGF0YS5jYXRlZ29yeV9pZF0ucGlja3VwVGltZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmdWxmaWxsbWVudDsKICAgICAgfQogICAgKTsKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cgp9Cg==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          country: IND
          city: 'std:080'
          action: on_search
          core_version: 1.2.0
          bap_id: logistics_buyer.com
          bap_uri: 'https://logistics_buyer.com/ondc'
          bpp_id: lsp.com
          bpp_uri: 'https://lsp.com/ondc'
          transaction_id: T1
          message_id: M1
          timestamp: '2026-02-06T21:00:30.000Z'
        message:
          catalog:
            bpp/descriptor:
              name: LSP Aggregator Inc
              tags:
                - code: bpp_terms
                  list:
                    - code: static_terms
                      value: ''
                    - code: static_terms_new
                      value: >-
                        https://github.com/ONDC-Official/NP-Static-Terms/lspNP_LSP/1.0/tc.pdf
                    - code: effective_date
                      value: '2023-10-01T00:00:00.000Z'
            bpp/providers:
              - id: P1
                descriptor:
                  name: LSP Courier Inc
                  short_desc: LSP Courier Inc
                  long_desc: LSP Courier Inc
                categories:
                  - id: Immediate Delivery
                    time:
                      label: TAT
                      duration: PT60M
                      timestamp: '2023-06-06'
                fulfillments:
                  - id: '1'
                    type: Delivery
                    start:
                      time:
                        duration: PT15M
                    tags:
                      - code: distance
                        list:
                          - code: motorable_distance_type
                            value: kilometer
                          - code: motorable_distance
                            value: '1.8'
                  - id: '2'
                    type: RTO
                locations:
                  - id: L1
                    gps: '12.967555,77.749666'
                    address:
                      street: Jayanagar 4th Block
                      city: Bengaluru
                      area_code: '560076'
                      state: KA
                items:
                  - id: I1
                    parent_item_id: ''
                    category_id: Immediate Delivery
                    fulfillment_id: '1'
                    descriptor:
                      code: P2P
                      name: Fast delivery
                      short_desc: Fast delivery
                      long_desc: Fast delivery
                    price:
                      currency: INR
                      value: '59.00'
                    time:
                      label: TAT
                      duration: PT45M
                      timestamp: '2023-06-06'
                  - id: I2
                    parent_item_id: I1
                    category_id: Immediate Delivery
                    fulfillment_id: '2'
                    descriptor:
                      code: P2P
                      name: RTO quote
                      short_desc: RTO quote
                      long_desc: RTO quote
                    price:
                      currency: INR
                      value: '23.60'
                    time:
                      label: TAT
                      duration: PT60M
                      timestamp: '2023-06-06'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        on_search_providers: '$.message.catalog[''bpp/providers'']'
        on_search_locations: '$.message.catalog[''bpp/providers''][0].locations'
        on_search_fulfillments: '$.message.catalog[''bpp/providers''][0].fulfillments'
        on_search_items: '$.message.catalog[''bpp/providers''][0].items'
        provider_id: '$.message.catalog[''bpp/providers''][0].id'
        location_id: '$.message.catalog[''bpp/providers''][0].locations[0].id'
      inputs: {}
  - api: init
    action_id: init_1
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5jb250ZXh0LmNpdHkgPSBzZXNzaW9uRGF0YS5jaXR5X2NvZGVbMF07CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wcm92aWRlci5pZCA9IHNlc3Npb25EYXRhLm9uX3NlYXJjaF9wcm92aWRlcnNbMF1bMF0uaWQ7CiAgY29uc3QgZ2V0UGF5ZW1udEZpZWxkcyA9IChwYXltZW50VHlwZSkgPT4gewogICAgaWYgKHBheW1lbnRUeXBlID09PSAiT04tT1JERVIiIHx8IHBheW1lbnRUeXBlID09PSAiT04tRlVMRklMTE1FTlQiKSB7CiAgICAgIHJldHVybiB7IGNvbGxlY3RlZF9ieTogIkJQUCIgfTsKICAgIH0KCiAgICBpZiAocGF5bWVudFR5cGUgPT09ICJQT1NULUZVTEZJTExNRU5UIikgewogICAgICByZXR1cm4gewogICAgICAgIGNvbGxlY3RlZF9ieTogIkJBUCIsCiAgICAgICAgIkBvbmRjL29yZy9zZXR0bGVtZW50X2Jhc2lzIjogImludm9pY2luZyIsCiAgICAgICAgIkBvbmRjL29yZy9zZXR0bGVtZW50X3dpbmRvdyI6ICJQMTVEIiwKICAgICAgfTsKICAgIH0KICB9OwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIubG9jYXRpb25zWzBdLmlkID0KICAgIHNlc3Npb25EYXRhLm9uX3NlYXJjaF9sb2NhdGlvbnNbMF1bMF0uaWQ7CiAgY29uc29sZS5sb2coIm9uIHNlYXJjaCBsb2NhdGlvbnMiLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uRGF0YS5vbl9zZWFyY2hfbG9jYXRpb25zKSk7CgogIGNvbnNvbGUubG9nKCJzZXNzaW9uIGRhdGEgb25fc2VhcmNoIGl0ZW1zIiwgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGEub25fc2VhcmNoX2l0ZW1zKSk7CgoKICAvLyBCdWlsZCBTVEFSVCBvYmplY3QKICBsZXQgc3RhcnRPYmogPSB7CiAgICBsb2NhdGlvbjogewogICAgICBpZDogIlMxIiwKICAgICAgZ3BzOiBzZXNzaW9uRGF0YS5zdGFydF9sb2NhdGlvblswXSwKICAgICAgYWRkcmVzczogewogICAgICAgIG5hbWU6ICJNeSBzdG9yZSBuYW1lIDEiLAogICAgICAgIGJ1aWxkaW5nOiAiTXkgYnVpbGRpbmcgbmFtZSAxIiwKICAgICAgICBsb2NhbGl0eTogIk15IHN0cmVldCBuYW1lIDEiLAogICAgICAgIGNpdHk6ICJteSBjaXR5IDEiLAogICAgICAgIHN0YXRlOiAibXkgc3RhdGUgMSIsCiAgICAgICAgY291bnRyeTogIkluZGlhIiwKICAgICAgICBhcmVhX2NvZGU6IHNlc3Npb25EYXRhLnN0YXJ0X2FyZWFfY29kZVswXSwKICAgICAgfSwKICAgIH0sCiAgICBjb250YWN0OiB7CiAgICAgIHBob25lOiAiOTg4NjA5ODg2MCIsCiAgICAgIGVtYWlsOiAiYWJjZC5lZmdoQGdtYWlsLmNvbSIsCiAgICB9LAogICAgLi4uKHNlc3Npb25EYXRhPy5mdWxmaWxsbWVudD8uc3RhcnQ/Lmluc3RydWN0aW9ucyAmJiB7CiAgICAgIGluc3RydWN0aW9uczogc2Vzc2lvbkRhdGEuZnVsZmlsbG1lbnQuc3RhcnQuaW5zdHJ1Y3Rpb25zLAogICAgfSksCiAgfTsKCiAgLy8gQnVpbGQgRU5EIG9iamVjdAogIGxldCBlbmRPYmogPSB7CiAgICBsb2NhdGlvbjogewogICAgICBncHM6IHNlc3Npb25EYXRhLmVuZF9sb2NhdGlvblswXSwKICAgICAgYWRkcmVzczogewogICAgICAgIG5hbWU6ICJNeSBob3VzZSBvciBidWlsZGluZyAjIiwKICAgICAgICBidWlsZGluZzogIk15IGJ1aWxkaW5nIG5hbWUgMiIsCiAgICAgICAgbG9jYWxpdHk6ICJNeSBzdHJlZXQgbmFtZSAyIiwKICAgICAgICBjaXR5OiAibXkgY2l0eSBuYW1lIDIiLAogICAgICAgIHN0YXRlOiAibXkgc3RhdGUgMiIsCiAgICAgICAgY291bnRyeTogIkluZGlhIiwKICAgICAgICBhcmVhX2NvZGU6IHNlc3Npb25EYXRhLmVuZF9hcmVhX2NvZGVbMF0sCiAgICAgIH0sCiAgICB9LAogICAgY29udGFjdDogewogICAgICBwaG9uZTogIjkxMjM0MjY3ODkiLAogICAgICBlbWFpbDogInh5ei5xd2VxQGdtYWlsLmNvbSIsCiAgICB9LAogICAgLi4uKHNlc3Npb25EYXRhPy5mdWxmaWxsbWVudD8uZW5kPy5pbnN0cnVjdGlvbnMgJiYgewogICAgICBpbnN0cnVjdGlvbnM6IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50LmVuZC5pbnN0cnVjdGlvbnMsCiAgICB9KSwKICB9OwogIGNvbnNvbGUubG9nKCJvbl9zZWFyY2hfZnVsZmlsbG1lbnRzIiwgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGEub25fc2VhcmNoX2Z1bGZpbGxtZW50cykpCiAgY29uc3Qgc291cmNlRnVsZmlsbG1lbnQgPSBzZXNzaW9uRGF0YS5vbl9zZWFyY2hfZnVsZmlsbG1lbnRzWzBdPy5maW5kKAogICAgKGZ1bGZpbGxtZW50KSA9PiB7CiAgICAgIHJldHVybiBmdWxmaWxsbWVudC50eXBlID09PSAiRGVsaXZlcnkiOwogICAgfQogICk7CiAgY29uc29sZS5sb2coInNvdXJjZV9mdWxmaWxsbWVudCIsIEpTT04uc3RyaW5naWZ5KHNvdXJjZUZ1bGZpbGxtZW50KSk7CiAgY29uc3QgbWFwcGVkSXRlbXMgPSBzZXNzaW9uRGF0YS5vbl9zZWFyY2hfaXRlbXNbMF0KICAgID8uZmlsdGVyKChpdGVtKSA9PiBpdGVtLmZ1bGZpbGxtZW50X2lkID09PSBzb3VyY2VGdWxmaWxsbWVudD8uaWQpCiAgICA/Lm1hcCgoaXRlbSkgPT4gKHsKICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgIGZ1bGZpbGxtZW50X2lkOiBpdGVtLmZ1bGZpbGxtZW50X2lkLAogICAgICBjYXRlZ29yeV9pZDogaXRlbS5jYXRlZ29yeV9pZCwKICAgICAgZGVzY3JpcHRvcjogewogICAgICAgIGNvZGU6IGl0ZW0uZGVzY3JpcHRvcj8uY29kZQogICAgICB9CiAgICB9KSkgfHwgW107CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBtYXBwZWRJdGVtczsKCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXSA9IHsKICAgICAgaWQ6IHNvdXJjZUZ1bGZpbGxtZW50LmlkLAoKICAgICAgdHlwZTogc291cmNlRnVsZmlsbG1lbnQudHlwZSwKCiAgICAgIHN0YXJ0OiBzdGFydE9iaiwKICAgICAgZW5kOiBlbmRPYmosCgogICAgICB0YWdzOiByZW1vdmVUYWdzQnlDb2RlcygKICAgICAgICBzb3VyY2VGdWxmaWxsbWVudC50YWdzLAogICAgICAgIFsiZGlzdGFuY2UiXQogICAgICApLAogICAgfTsKCgogIGNvbnNvbGUubG9nKCJkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmciLCBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcpOwoKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nLmNyZWF0ZWRfYXQgPQogICAgZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nLnVwZGF0ZWRfYXQgPQogICAgZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHsKICAgIHR5cGU6IHNlc3Npb25EYXRhLnBheW1lbnRfdHlwZVswXSwKICAgIC4uLmdldFBheWVtbnRGaWVsZHMoc2Vzc2lvbkRhdGEucGF5bWVudF90eXBlWzBdKSwKICB9OwoKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          country: IND
          city: 'std:080'
          action: init
          core_version: 1.2.0
          bap_id: logistics_buyer.com
          bap_uri: 'https://logistics_buyer.com/ondc'
          bpp_id: lsp.com
          bpp_uri: 'https://lsp.com/ondc'
          transaction_id: T1
          message_id: M1
          timestamp: '2023-06-06T21:30:00.000Z'
          ttl: PT30S
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: '1'
                category_id: Immediate Delivery
                descriptor:
                  code: P2P
            fulfillments:
              - id: '1'
                type: Delivery
                start:
                  location:
                    gps: '12.453544,77.928379'
                    address:
                      name: My store name
                      building: My building name
                      locality: My street name
                      city: Bengaluru
                      state: Karnataka
                      country: India
                      area_code: '560041'
                  contact:
                    phone: '9886098860'
                    email: abcd.efgh@gmail.com
                end:
                  location:
                    gps: '12.453544,77.928379'
                    address:
                      name: 'My house #'
                      building: My house or building name
                      locality: My street name
                      city: Bengaluru
                      state: Karnataka
                      country: India
                      area_code: '560076'
                  contact:
                    phone: '9886098860'
                    email: abcd.efgh@gmail.com
            billing:
              name: ONDC Logistics Buyer NP
              address:
                name: My house or building no
                building: My house or building name
                locality: Jayanagar
                city: Bengaluru
                state: Karnataka
                country: India
                area_code: '560076'
              tax_number: XXXXXXXXXXXXXXX
              phone: '9886098860'
              email: abcd.efgh@gmail.com
              created_at: '2023-02-06T21:30:00.000Z'
              updated_at: '2023-02-06T21:30:00.000Z'
            payment:
              '@ondc/org/collection_amount': '300.00'
              collected_by: BPP
              type: ON-FULFILLMENT
              '@ondc/org/settlement_details':
                - settlement_counterparty: buyer-app
                  settlement_type: upi
                  beneficiary_name: xxxxx
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
      saveData:
        transactionId: $.context.transaction_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        init_fulfillments: $.message.order.fulfillments
        items: $.message.order.items
        billing: $.message.order.billing
        payment: $.message.order.payment
        init_latestMessage_id: $.context.message_id
      inputs: {}
  - api: on_init
    action_id: on_init_1
    owner: BPP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5jb250ZXh0Lm1lc3NhZ2VfaWQgPSBzZXNzaW9uRGF0YS5pbml0X2xhdGVzdE1lc3NhZ2VfaWRbMF07CiAgZGVmYXVsdFBheWxvYWQuY29udGV4dC5jaXR5ID0gc2Vzc2lvbkRhdGEuY2l0eV9jb2RlWzBdOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIuaWQgPSBzZXNzaW9uRGF0YS5vbl9zZWFyY2hfcHJvdmlkZXJzWzBdLmlkOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIubG9jYXRpb25zWzBdLmlkID0KICAgIHNlc3Npb25EYXRhLm9uX3NlYXJjaF9sb2NhdGlvbnNbMF1bMF0uaWQ7CgogIGNvbnN0IHRlbXBJdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zWzBdOwogIAogIHRlbXBJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICBkZWxldGUgaXRlbS5jYXRlZ29yeV9pZDsKICAgIGRlbGV0ZSBpdGVtLnRhZ3M7CgogICAgaWYgKHNlc3Npb25EYXRhPy5yYXRlX2Jhc2lzKSB7CiAgICAgIGRlbGV0ZSBpdGVtLmZ1bGZpbGxtZW50X2lkOwogICAgICBpdGVtLmZ1bGZpbGxtZW50X2lkcyA9IFsiRjEiLCAiRjIiXTsKICAgIH0KICB9KTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHRlbXBJdGVtczsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmluaXRfZnVsZmlsbG1lbnRzWzBdOwogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHsKICAgICAgYnJlYWt1cDogWwogICAgICAgIHsKICAgICAgICAgICJAb25kYy9vcmcvaXRlbV9pZCI6IHNlc3Npb25EYXRhLml0ZW1zWzBdWzBdLmlkLAogICAgICAgICAgIkBvbmRjL29yZy90aXRsZV90eXBlIjogImRlbGl2ZXJ5IiwKICAgICAgICAgIHByaWNlOiB7CiAgICAgICAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgICAgICAgdmFsdWU6IHNlc3Npb25EYXRhPy5yYXRlX2Jhc2lzID8gIjEwMC4wMCIgOiAiNTAuMDAiLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICJAb25kYy9vcmcvaXRlbV9pZCI6IHNlc3Npb25EYXRhLml0ZW1zWzBdWzBdLmlkLAogICAgICAgICAgIkBvbmRjL29yZy90aXRsZV90eXBlIjogInRheCIsCiAgICAgICAgICBwcmljZTogewogICAgICAgICAgICBjdXJyZW5jeTogIklOUiIsCiAgICAgICAgICAgIHZhbHVlOiBzZXNzaW9uRGF0YT8ucmF0ZV9iYXNpcyA/ICIxOC4wMCIgOiAiOS4wMCIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgLi4uKHNlc3Npb25EYXRhPy5pc19jb2QgPT09ICJ5ZXMiCiAgICAgICAgICA/IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJAb25kYy9vcmcvaXRlbV9pZCI6IHNlc3Npb25EYXRhLml0ZW1zWzFdLmlkLAogICAgICAgICAgICAgICJAb25kYy9vcmcvdGl0bGVfdHlwZSI6ICJjb2QiLAogICAgICAgICAgICAgIHByaWNlOiB7CiAgICAgICAgICAgICAgICBjdXJyZW5jeTogIklOUiIsCiAgICAgICAgICAgICAgICB2YWx1ZTogIjkuMDAiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAiQG9uZGMvb3JnL2l0ZW1faWQiOiBzZXNzaW9uRGF0YS5pdGVtc1sxXS5pZCwKICAgICAgICAgICAgICAiQG9uZGMvb3JnL3RpdGxlX3R5cGUiOiAidGF4IiwKICAgICAgICAgICAgICBwcmljZTogewogICAgICAgICAgICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICAgICAgICAgICAgdmFsdWU6ICIyLjAwIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgXQogICAgICAgICAgOiBbXSksCiAgICAgIF0sCiAgICAgIHR0bDogIlBUMTVNIiwKICAgIH07CgogIGlmIChzZXNzaW9uRGF0YT8uZmVhdHVyZV9jYW5jZWxsYXRpb25fdGVybXMgPT09ICJ5ZXMiKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbl90ZXJtcyA9IFsKICAgICAgewogICAgICAgIGZ1bGZpbGxtZW50X3N0YXRlOiB7CiAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgIGNvZGU6ICJQZW5kaW5nIiwKICAgICAgICAgICAgc2hvcnRfZGVzYzogIjAwOCIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgY2FuY2VsbGF0aW9uX2ZlZTogewogICAgICAgICAgcGVyY2VudGFnZTogIjAuMDAiLAogICAgICAgIH0sCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBmdWxmaWxsbWVudF9zdGF0ZTogewogICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICBjb2RlOiAiQWdlbnQtYXNzaWduZWQiLAogICAgICAgICAgICBzaG9ydF9kZXNjOiAiMDAxLDAwMyIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgY2FuY2VsbGF0aW9uX2ZlZTogewogICAgICAgICAgcGVyY2VudGFnZTogIjEwMC4wMCIsCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgewogICAgICAgIGZ1bGZpbGxtZW50X3N0YXRlOiB7CiAgICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICAgIGNvZGU6ICJPcmRlci1waWNrZWQtdXAiLAogICAgICAgICAgICBzaG9ydF9kZXNjOiAiMDAxLDAwMyIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgY2FuY2VsbGF0aW9uX2ZlZTogewogICAgICAgICAgcGVyY2VudGFnZTogIjEwMC4wMCIsCiAgICAgICAgfSwKICAgICAgfSwKICAgIF07CiAgfQogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUucHJpY2UgPSB7CiAgICBjdXJyZW5jeTogIklOUiIsCiAgICB2YWx1ZTogY2FsY3VsYXRlUXVvdGVQcmljZShkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlLmJyZWFrdXApLAogIH07CgogIGlmIChzZXNzaW9uRGF0YT8ucmF0ZV9iYXNpcykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uaWQgPSAiRjEiOwogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMucHVzaCh7CiAgICAgIC4uLmRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLAogICAgICBpZDogIkYyIiwKICAgIH0pOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPQogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMubWFwKChmdWxmdWxsbWVudCkgPT4gewogICAgICBpZiAoc2Vzc2lvbkRhdGEuY2F0ZWdvcnlfaWRbMF0gPT09ICJJbW1lZGlhdGUgRGVsaXZlcnkiKSB7CiAgICAgICAgZnVsZnVsbG1lbnQudGFncy5wdXNoKHsKICAgICAgICAgIGNvZGU6ICJyaWRlcl9jaGVjayIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiaW5saW5lX2NoZWNrX2Zvcl9yaWRlciIsCiAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gZnVsZnVsbG1lbnQ7CiAgICB9KTsKCiAgaWYgKHNlc3Npb25EYXRhLnBheW1lbnQpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudCA9IHNlc3Npb25EYXRhLnBheW1lbnRbMF07CiAgfQoKICBpZiAoCiAgICAoc2Vzc2lvbkRhdGEucGF5bWVudF90eXBlID09PSAiUE9TVC1GVUxGSUxMTUVOVCIgfHwKICAgICAgc2Vzc2lvbkRhdGEucGF5bWVudF90eXBlID09PSAiT04tRlVMRklMTE1FTlQiKSAmJgogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50LmNvbGxlY3RlZF9ieSA9PT0gIkJBUCIKICApIHsKICAgIC8vIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudFsiQG9uZGMvb3JnL2NvbGxlY3Rpb25fYW1vdW50Il0gPSAKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudFsiQG9uZGMvb3JnL3NldHRsZW1lbnRfZGV0YWlscyJdID0gWwogICAgICB7CiAgICAgICAgc2V0dGxlbWVudF9jb3VudGVycGFydHk6ICJsc3AiLAogICAgICAgIHNldHRsZW1lbnRfdHlwZTogInVwaSIsCiAgICAgICAgYmVuZWZpY2lhcnlfbmFtZTogInh4eHh4IiwKICAgICAgICB1cGlfYWRkcmVzczogImdmdEBva3NiaSIsCiAgICAgICAgc2V0dGxlbWVudF9iYW5rX2FjY291bnRfbm86ICJYWFhYWFhYWFhYIiwKICAgICAgICBzZXR0bGVtZW50X2lmc2NfY29kZTogIlhYWFhYWFhYWCIsCiAgICAgIH0sCiAgICBdOwogIH0KICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          country: IND
          city: 'std:080'
          action: on_init
          core_version: 1.2.0
          bap_id: logistics_buyer.com
          bap_uri: 'https://logistics_buyer.com/ondc'
          bpp_id: lsp.com
          bpp_uri: 'https://lsp.com/ondc'
          transaction_id: T1
          message_id: M1
          timestamp: '2023-02-06T21:30:30.000Z'
        message:
          order:
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I2
                fulfillment_id: '1'
            fulfillments:
              - id: '1'
                type: Delivery
                start:
                  location:
                    gps: '12.4535445,77.9283792'
                    address:
                      name: Store name
                      building: House or building name
                      locality: Locality
                      city: Bengaluru
                      state: Karnataka
                      country: India
                      area_code: '560041'
                  contact:
                    phone: '9886098860'
                    email: abcd.efgh@gmail.com
                end:
                  location:
                    gps: '12.453544,77.928379'
                    address:
                      name: 'My house #'
                      building: My house or building name
                      locality: locality
                      city: Bengaluru
                      state: Karnataka
                      country: India
                      area_code: '560076'
                  contact:
                    phone: '9886098860'
                    email: abcd.efgh@gmail.com
                tags:
                  - code: rider_check
                    list:
                      - code: inline_check_for_rider
                        value: 'yes'
            quote:
              price:
                currency: INR
                value: '59.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
              ttl: PT15M
            payment:
              '@ondc/org/collection_amount': '300.00'
              type: ON-FULFILLMENT
              collected_by: BPP
              '@ondc/org/settlement_details':
                - settlement_counterparty: buyer-app
                  settlement_type: upi
                  beneficiary_name: xxxxx
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
            cancellation_terms:
              - fulfillment_state:
                  descriptor:
                    code: Pending
                    short_desc: '008'
                cancellation_fee:
                  percentage: '0.00'
                  amount:
                    currency: INR
                    value: '0.00'
              - fulfillment_state:
                  descriptor:
                    code: Agent-assigned
                    short_desc: '001,003'
                cancellation_fee:
                  percentage: '100.00'
                  amount:
                    currency: INR
                    value: '50.00'
              - fulfillment_state:
                  descriptor:
                    code: Order-picked-up
                    short_desc: '001,003'
                cancellation_fee:
                  percentage: '100.00'
                  amount:
                    currency: INR
                    value: '50.00'
              - fulfillment_state:
                  descriptor:
                    code: Out-for-delivery
                    short_desc: '011,012,013,014,015'
                cancellation_fee:
                  percentage: '100.00'
                  amount:
                    currency: INR
                    value: '50.00'
            tags:
              - code: bpp_terms
                list:
                  - code: max_liability
                    value: '2'
                  - code: max_liability_cap
                    value: '10000'
                  - code: mandatory_arbitration
                    value: 'false'
                  - code: court_jurisdiction
                    value: Bengaluru
                  - code: delay_interest
                    value: '1000'
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/protocol-network-extension/discussions/79
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        quote: $.message.order.quote
        cancellation_terms: $.message.order.cancellation_terms
      inputs: {}
  - api: confirm
    action_id: confirm_1
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gdXVpZHY0KCk7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucHJvdmlkZXIuaWQgPSBzZXNzaW9uRGF0YS5wcm92aWRlcl9pZFswXTsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnByb3ZpZGVyLmxvY2F0aW9uc1swXS5pZCA9CiAgICBzZXNzaW9uRGF0YS5sb2NhdGlvbl9pZFswXTsKCiAgaWYgKHNlc3Npb25EYXRhPy5iaWxsaW5nKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBzZXNzaW9uRGF0YS5iaWxsaW5nWzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zWzBdOwoKICBsZXQgdGltZSA9IG51bGw7CgogIHNlc3Npb25EYXRhPy5vbl9zZWFyY2hfaXRlbXNbMF0/LmZvckVhY2goKGl0ZW0pID0+IHsKICAgIC8vIGNvbnNvbGUubG9nKCI6Ojo6Ojo6Ojo6OjoiLCBpdGVtLmlkLCBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zWzBdLmlkLCBpdGVtKQogICAgaWYgKGl0ZW0uaWQgPT09IGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXNbMF0uaWQpIHsKICAgICAgdGltZSA9IGl0ZW0udGltZTsKICAgIH0KICB9KTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMubWFwKAogICAgKGl0ZW0pID0+IHsKICAgICAgaXRlbS50aW1lID0gdGltZTsKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9CiAgKTsKCiAgaWYgKHNlc3Npb25EYXRhPy5yYXRlX2Jhc2lzKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLml0ZW1zID0KICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICBkZWxldGUgaXRlbS5mdWxmaWxsbWVudF9pZDsKICAgICAgICBsZXQgZnVsZmlpbGxtZW50SWRzID0gW107CgogICAgICAgIHNlc3Npb25EYXRhPy5vbl9pbml0X2l0ZW1zPy5mb3JFYWNoKChvbmluaXRJdGVtKSA9PiB7CiAgICAgICAgICBpZiAob25pbml0SXRlbS5pZCA9PT0gaXRlbS5pZCkgewogICAgICAgICAgICBmdWxmaWlsbG1lbnRJZHMgPSBvbmluaXRJdGVtLmZ1bGZpbGxtZW50X2lkczsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgaXRlbS5mdWxmaWxsbWVudF9pZHMgPSBmdWxmaWlsbG1lbnRJZHM7CiAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgIH0pOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50cykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5mdWxmaWxsbWVudHM7CiAgICBjb25zb2xlLmxvZygiZXhpc3RpbmcgcGF5bG9hZCBpbiBjb25maXJtIiwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMpKTsKCiAgfQoKICBpZiAoCiAgICBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcykgJiYKICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcy5sZW5ndGggPiAwCiAgKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbl90ZXJtcyA9CiAgICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtc1swXTsKICB9CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uc3RhcnQudGltZSA9IHsKICAgIGR1cmF0aW9uOiBzZXNzaW9uRGF0YS5vbl9zZWFyY2hfZnVsZmlsbG1lbnRzWzBdWzBdLnN0YXJ0LnRpbWUuZHVyYXRpb24sCiAgfTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uc3RhcnQucGVyc29uID0gewogICAgbmFtZTogInBlcnNvbl9uYW1lXzEiLAogIH07CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLmVuZC5wZXJzb24gPSB7CiAgICBuYW1lOiAicGVyc29uX25hbWVfMiIsCiAgfTsKCgogIGNvbnN0IHRhZ3MgPSBbCiAgICB7CiAgICAgIGNvZGU6ICJzdGF0ZSIsCiAgICAgIGxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAicmVhZHlfdG9fc2hpcCIsCiAgICAgICAgICB2YWx1ZToKICAgICAgICAgICAgc2Vzc2lvbkRhdGE/LmNhdGVnb3J5X2lkID09PSAiSW1tZWRpYXRlIERlbGl2ZXJ5IiA/ICJ5ZXMiIDogIm5vIiwKICAgICAgICB9LAogICAgICBdLAogICAgfSwKCiAgICB7CiAgICAgICAgICBjb2RlOiAicnRvX2FjdGlvbiIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAicmV0dXJuX3RvX29yaWdpbiIsCiAgICAgICAgICAgICAgdmFsdWU6IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzPy5yZXR1cm5Ub09yaWdpbiB8fCAibm8iLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9CiAgXTsKCgogIGxldCBhbGxUYWdzID0gbWVyZ2VGdWxmaWxsbWVudFRhZ3MoCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50c1swXT8udGFncyA/PyBbXSwKICAgIHRhZ3MKICApOwoKCiAgaWYgKAogICAgc2Vzc2lvbkRhdGE/LnJhdGVfYmFzaXMgJiYKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzLmxlbmd0aCA+IDEKICApIHsKICAgIGNvbnN0IHByZVRhZ3MgPSByZW1vdmVUYWdzQnlDb2RlcygKICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMV0udGFncyA/PyBbXSwKICAgICAgWyJsaW5rZWRfcHJvdmlkZXIiXQogICAgKTsKCiAgICBhbGxUYWdzID0gWy4uLmFsbFRhZ3MsIC4uLnByZVRhZ3NdOwogIH0KCiAgYWxsVGFncyA9IHJlbW92ZVRhZ3NCeUNvZGVzKGFsbFRhZ3MsIFsicmlkZXJfY2hlY2siXSk7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0KICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzLm1hcCgoZnVsZmlsbG1lbnQpID0+ICh7CiAgICAgIC4uLmZ1bGZpbGxtZW50LAogICAgICB0YWdzOiBhbGxUYWdzLAogICAgfSkpOwoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLQogIGxldCBpc1JlYWR5VG9TaGlwID0gZmFsc2U7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLnRhZ3MuZm9yRWFjaCgodGFnKSA9PiB7CiAgICBpZiAodGFnLmNvZGUgPT09ICJzdGF0ZSIpIHsKICAgICAgdGFnLmxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmIChpdGVtLmNvZGUgPT09ICJyZWFkeV90b19zaGlwIiAmJiBpdGVtLnZhbHVlID09ICJ5ZXMiKSB7CiAgICAgICAgICBpc1JlYWR5VG9TaGlwID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9CiAgICAoZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgfHwgW10pLm1hcCgoZnVsZmlsbG1lbnQpID0+IHsKCiAgICAgIGNvbnN0IHN0YXJ0Q29kZSA9IHNlc3Npb25EYXRhPy5zdGF0aWNfcGlja3VwX290cDsKICAgICAgY29uc3QgZW5kQ29kZSA9IHNlc3Npb25EYXRhPy5zdGF0aWNfZGVsaXZlcnlfb3RwOwoKICAgICAgbGV0IHVwZGF0ZWRTdGFydEluc3RydWN0aW9uczsKICAgICAgbGV0IHVwZGF0ZWRFbmRJbnN0cnVjdGlvbnM7CgogICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgIC8vIFNUQVJUIElOU1RSVUNUSU9OUwogICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAgIGlmIChzdGFydENvZGUgPT09ICI1IikgewogICAgICAgIHVwZGF0ZWRTdGFydEluc3RydWN0aW9ucyA9IHsKICAgICAgICAgIGNvZGU6ICI1IiwKICAgICAgICAgIHNob3J0X2Rlc2M6ICI5ODcwIiwKICAgICAgICAgIGxvbmdfZGVzYzogImFkZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zIGZvciBwaWNrdXAiLAogICAgICAgICAgYWRkaXRpb25hbF9kZXNjOiB7CiAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogInRleHQvaHRtbCIsCiAgICAgICAgICAgIHVybDogImh0dHA6Ly9kZXNjcmlwdGlvbi5jb20iLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpc1JlYWR5VG9TaGlwICE9PSAidW5kZWZpbmVkIiAmJiBpc1JlYWR5VG9TaGlwKSB7CiAgICAgICAgdXBkYXRlZFN0YXJ0SW5zdHJ1Y3Rpb25zID0gewogICAgICAgICAgY29kZTogIjIiLAogICAgICAgICAgc2hvcnRfZGVzYzogIjEyMzEyMyIsCiAgICAgICAgICBsb25nX2Rlc2M6ICJhZGRpdGlvbmFsIGluc3RydWN0aW9ucyBmb3IgcGlja3VwIiwKICAgICAgICAgIGFkZGl0aW9uYWxfZGVzYzogewogICAgICAgICAgICBjb250ZW50X3R5cGU6ICJ0ZXh0L2h0bWwiLAogICAgICAgICAgICB1cmw6ICJodHRwOi8vZGVzY3JpcHRpb24uY29tIiwKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICAvLyBFTkQgSU5TVFJVQ1RJT05TCiAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICAgaWYgKGVuZENvZGUgPT09ICI1IikgewogICAgICAgIHVwZGF0ZWRFbmRJbnN0cnVjdGlvbnMgPSB7CiAgICAgICAgICBjb2RlOiAiNSIsCiAgICAgICAgICBzaG9ydF9kZXNjOiAiNjg3MSIsCiAgICAgICAgICBsb25nX2Rlc2M6ICJhZGRpdGlvbmFsIGluc3RydWN0aW9ucyBmb3IgZGVsaXZlcnkiLAogICAgICAgICAgYWRkaXRpb25hbF9kZXNjOiB7CiAgICAgICAgICAgIGNvbnRlbnRfdHlwZTogInRleHQvaHRtbCIsCiAgICAgICAgICAgIHVybDogImh0dHA6Ly9kZXNjcmlwdGlvbi5jb20iLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpc1JlYWR5VG9TaGlwICE9PSAidW5kZWZpbmVkIiAmJiBpc1JlYWR5VG9TaGlwKSB7CiAgICAgICAgdXBkYXRlZEVuZEluc3RydWN0aW9ucyA9IHsKICAgICAgICAgIGNvZGU6ICIyIiwKICAgICAgICAgIHNob3J0X2Rlc2M6ICI5ODc2NTciLAogICAgICAgICAgbG9uZ19kZXNjOiAiYWRkaXRpb25hbCBpbnN0cnVjdGlvbnMgZm9yIGRlbGl2ZXJ5IiwKICAgICAgICAgIGFkZGl0aW9uYWxfZGVzYzogewogICAgICAgICAgICBjb250ZW50X3R5cGU6ICJ0ZXh0L2h0bWwiLAogICAgICAgICAgICB1cmw6ICJodHRwOi8vZGVzY3JpcHRpb24uY29tIiwKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgY29uc3QgdXBkYXRlZFRhZ3MgPSBbLi4uKGZ1bGZpbGxtZW50LnRhZ3MgfHwgW10pXTsKICAgICAgCiAgICAgIGNvbnN0IHVwZGF0ZWRGdWxmaWxsbWVudCA9IHsKICAgICAgICAuLi5mdWxmaWxsbWVudCwKICAgICAgICBzdGFydDogewogICAgICAgICAgLi4uKGZ1bGZpbGxtZW50LnN0YXJ0IHx8IHt9KSwKICAgICAgICAgIC4uLih1cGRhdGVkU3RhcnRJbnN0cnVjdGlvbnMgJiYgewogICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHVwZGF0ZWRTdGFydEluc3RydWN0aW9ucywKICAgICAgICAgIH0pLAogICAgICAgIH0sCiAgICAgICAgZW5kOiB7CiAgICAgICAgICAuLi4oZnVsZmlsbG1lbnQuZW5kIHx8IHt9KSwKICAgICAgICAgIC4uLih1cGRhdGVkRW5kSW5zdHJ1Y3Rpb25zICYmIHsKICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiB1cGRhdGVkRW5kSW5zdHJ1Y3Rpb25zLAogICAgICAgICAgfSksCiAgICAgICAgfSwKICAgICAgICB0YWdzOiB1cGRhdGVkVGFncywKICAgICAgfTsKCiAgICAgIGNvbnNvbGUubG9nKCJVcGRhdGVkIGZ1bGZpbGxtZW50OiIsIHVwZGF0ZWRGdWxmaWxsbWVudCk7CgogICAgICByZXR1cm4gdXBkYXRlZEZ1bGZpbGxtZW50OwogICAgfSk7CgoKICBjb25zdCB0ZW1wUXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKCiAgZGVsZXRlIHRlbXBRdW90ZS50dGw7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSB0ZW1wUXVvdGU7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuY3JlYXRlZF9hdCA9IGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwoKICBpZiAoc2Vzc2lvbkRhdGEucGF5bWVudCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gc2Vzc2lvbkRhdGEucGF5bWVudFswXTsKICB9CgogIGlmICgKICAgIChzZXNzaW9uRGF0YS5wYXltZW50X3R5cGUgPT09ICJQT1NULUZVTEZJTExNRU5UIiB8fAogICAgICBzZXNzaW9uRGF0YS5wYXltZW50X3R5cGUgPT09ICJPTi1GVUxGSUxMTUVOVCIpICYmCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQuY29sbGVjdGVkX2J5ID09PSAiQlBQIgogICkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50WyJAb25kYy9vcmcvc2V0dGxlbWVudF9kZXRhaWxzIl0gPSBbCiAgICAgIHsKICAgICAgICBzZXR0bGVtZW50X2NvdW50ZXJwYXJ0eTogImxibnAiLAogICAgICAgIHNldHRsZW1lbnRfdHlwZTogInVwaSIsCiAgICAgICAgYmVuZWZpY2lhcnlfbmFtZTogInh4eHh4IiwKICAgICAgICB1cGlfYWRkcmVzczogImdmdEBva3NiaSIsCiAgICAgICAgc2V0dGxlbWVudF9iYW5rX2FjY291bnRfbm86ICJYWFhYWFhYWFhYIiwKICAgICAgICBzZXR0bGVtZW50X2lmc2NfY29kZTogIlhYWFhYWFhYWCIsCiAgICAgIH0sCiAgICBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlclsiQG9uZGMvb3JnL2xpbmtlZF9vcmRlciJdID0gewogICAgaXRlbXM6IFsKICAgICAgewogICAgICAgIGNhdGVnb3J5X2lkOiBzZXNzaW9uRGF0YT8ucmV0YWlsX2NhdGVnb3J5WzBdIHx8ICJHcm9jZXJ5IiwKICAgICAgICBkZXNjcmlwdG9yOiB7CiAgICAgICAgICBuYW1lOiAiSXRlbTEiLAogICAgICAgIH0sCiAgICAgICAgcXVhbnRpdHk6IHsKICAgICAgICAgIGNvdW50OiAyLAogICAgICAgICAgbWVhc3VyZTogewogICAgICAgICAgICB1bml0OiAia2lsb2dyYW0iLAogICAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBwcmljZTogewogICAgICAgICAgY3VycmVuY3k6ICJJTlIiLAogICAgICAgICAgdmFsdWU6ICI3MC4wMCIsCiAgICAgICAgfSwKICAgICAgfQogICAgXSwKICAgIHByb3ZpZGVyOiB7CiAgICAgIGRlc2NyaXB0b3I6IHsKICAgICAgICBuYW1lOiAiU2VsbGVyMSIsCiAgICAgIH0sCiAgICAgIGFkZHJlc3M6IHsKICAgICAgICBuYW1lOiAiTXkgc3RvcmUgbmFtZSAxIiwKICAgICAgICBidWlsZGluZzogIk15IGJ1aWxkaW5nIG5hbWUgMSIsCiAgICAgICAgbG9jYWxpdHk6ICJNeSBzdHJlZXQgbmFtZSAxIiwKICAgICAgICBjaXR5OiAibXkgY2l0eSAxIiwKICAgICAgICBzdGF0ZTogIm15IHN0YXRlIDEiLAogICAgICAgIGFyZWFfY29kZTogc2Vzc2lvbkRhdGE/LnN0YXJ0X2FyZWFfY29kZVswXSB8fCAiNTYwMDAxIiwKICAgICAgfSwKICAgIH0sCiAgICBvcmRlcjogewogICAgICBpZDogIk8xIiwKICAgICAgd2VpZ2h0OiB7CiAgICAgICAgdW5pdDogImtpbG9ncmFtIiwKICAgICAgICB2YWx1ZTogMywKICAgICAgfSwKICAgICAgZGltZW5zaW9uczogewogICAgICAgIGxlbmd0aDogewogICAgICAgICAgdW5pdDogImNlbnRpbWV0ZXIiLAogICAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgfSwKICAgICAgICBicmVhZHRoOiB7CiAgICAgICAgICB1bml0OiAiY2VudGltZXRlciIsCiAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICB9LAogICAgICAgIGhlaWdodDogewogICAgICAgICAgdW5pdDogImNlbnRpbWV0ZXIiLAogICAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgfSwKICAgICAgfSwKICAgIH0sCiAgfTsKICByZXR1cm4gZGVmYXVsdFBheWxvYWQ7Cn0=
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          country: IND
          city: 'std:080'
          action: confirm
          core_version: 1.2.0
          bap_id: logistics_buyer.com
          bap_uri: 'https://logistics_buyer.com/ondc'
          bpp_id: lsp.com
          bpp_uri: 'https://lsp.com/ondc'
          transaction_id: T1
          message_id: M1
          timestamp: '2023-06-06T22:00:00.000Z'
          ttl: PT30S
        message:
          order:
            id: O2
            state: Created
            provider:
              id: P1
              locations:
                - id: L1
            items:
              - id: I1
                fulfillment_id: '1'
                category_id: Immediate Delivery
                descriptor:
                  code: P2P
                time:
                  label: TAT
                  duration: PT45M
                  timestamp: '2023-06-06'
            quote:
              price:
                currency: INR
                value: '59.00'
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
            fulfillments:
              - id: '1'
                type: Delivery
                '@ondc/org/awb_no': '1227262193237777'
                start:
                  time:
                    duration: PT15M
                  person:
                    name: person_name
                  location:
                    gps: '12.4535445,77.9283792'
                    address:
                      name: Store name
                      building: House or building name
                      locality: Locality
                      city: Bengaluru
                      state: Karnataka
                      country: India
                      area_code: '560041'
                  contact:
                    phone: '9886098860'
                    email: abcd.efgh@gmail.com
                  instructions:
                    code: '2'
                    short_desc: value of PCC
                    long_desc: additional instructions for pickup
                    additional_desc:
                      content_type: text/html
                      url: 'https://reverse_qc_sop_form.htm'
                end:
                  person:
                    name: person_name
                  location:
                    gps: '12.453544,77.928379'
                    address:
                      name: 'My house #'
                      building: My house or building name
                      locality: locality
                      city: Bengaluru
                      state: Karnataka
                      country: India
                      area_code: '560076'
                  contact:
                    phone: '9886098860'
                    email: abcd.efgh@gmail.com
                  instructions:
                    code: '3'
                    short_desc: value of DCC
                    long_desc: additional instructions for delivery
            billing:
              name: ONDC Logistics Buyer NP1
              address:
                name: name
                building: My house or building name
                locality: My street name
                city: Bengaluru
                state: Karnataka
                country: India
                area_code: '560076'
              tax_number: 29AAACU1901H1ZK
              phone: '9886098860'
              email: abcd.efgh@gmail.com
              created_at: '2023-06-06T21:30:00.000Z'
              updated_at: '2023-06-06T21:30:00.000Z'
            payment:
              '@ondc/org/collection_amount': '300.00'
              collected_by: BPP
              type: ON-FULFILLMENT
              '@ondc/org/settlement_details':
                - settlement_counterparty: buyer-app
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_ifsc_code: XXXXXXXXX
            '@ondc/org/linked_order':
              items:
                - category_id: Grocery
                  descriptor:
                    name: Atta
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 0.5
                  price:
                    currency: INR
                    value: '150.00'
              provider:
                descriptor:
                  name: Aadishwar Store
                address:
                  name: KHB Towers
                  building: Building or House No
                  locality: Koramangala
                  city: Bengaluru
                  state: Karnataka
                  area_code: '560070'
              order:
                id: O1
                weight:
                  unit: kilogram
                  value: 1
                dimensions:
                  length:
                    unit: centimeter
                    value: 1
                  breadth:
                    unit: centimeter
                    value: 1
                  height:
                    unit: centimeter
                    value: 1
            tags:
              - code: bpp_terms
                list:
                  - code: max_liability
                    value: '2'
                  - code: max_liability_cap
                    value: '10000'
                  - code: mandatory_arbitration
                    value: 'false'
                  - code: court_jurisdiction
                    value: Bengaluru
                  - code: delay_interest
                    value: '1000'
                  - code: static_terms
                    value: >-
                      https://github.com/ONDC-Official/protocol-network-extension/discussions/79
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: 'Y'
            created_at: '2023-06-06T22:00:00.000Z'
            updated_at: '2023-06-06T22:00:00.000Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        order_status: $.message.order.state
        order_id: $.message.order.id
        confirm_create_at_timestamp: $.message.order.created_at
        fulfillments: $.message.order.fulfillments
        items: $.message.order.items
        quote: $.message.order.quote
        linked_order: '$.message.order[''@ondc/org/linked_order'']'
        confirm_tags: $.message.order.tags
      inputs:
        id: ExampleInputId
        jsonSchema:
          $schema: 'http://json-schema.org/draft-07/schema#'
          type: object
          properties:
            returnToOrigin:
              type: string
              description: Do you want return to origin?
              enum:
                - 'yes'
                - 'no'
              default: 'yes'
          required: []
          additionalProperties: false
  - api: on_confirm
    action_id: on_confirm1
    owner: BPP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgZGVmYXVsdFBheWxvYWQuY29udGV4dC5tZXNzYWdlX2lkID0gc2Vzc2lvbkRhdGEubGF0ZXN0TWVzc2FnZV9pZFswXTsKICBjb25zdCBwb3B1bGF0ZUZ1bGZpbGxtZW50Q29uZmltID0gKAogICAgZXhpc3RpbmdQYXlsb2FkLAogICAgc2Vzc2lvbkRhdGEKICApID0+IHsKICAgCiAgICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPQogICAgICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMubWFwKChmdWxmaWxsbWVudCkgPT4gewogICAgICAgIGxldCBpc1JlYWR5VG9TaGlwID0gZmFsc2U7CgogICAgICAgIGZ1bGZpbGxtZW50LnRhZ3MuZm9yRWFjaCgodGFnKSA9PiB7CiAgICAgICAgICBpZiAodGFnLmNvZGUgPT09ICJzdGF0ZSIpIHsKICAgICAgICAgICAgdGFnLmxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGlmIChpdGVtLmNvZGUgPT09ICJyZWFkeV90b19zaGlwIiAmJiBpdGVtLnZhbHVlID09ICJ5ZXMiKSB7CiAgICAgICAgICAgICAgICBpc1JlYWR5VG9TaGlwID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBmdWxmaWxsbWVudC50cmFja2luZyA9IHRydWU7CgogICAgICAgIGlmIChpc1JlYWR5VG9TaGlwKSB7CiAgICAgICAgICBmdWxmaWxsbWVudC5zdGF0ZSA9IHsKICAgICAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgICAgIGNvZGU6ICJBZ2VudC1hc3NpZ25lZCIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9OwogICAgICAgICAgZnVsZmlsbG1lbnQuYWdlbnQgPSB7CiAgICAgICAgICAgIG5hbWU6ICJwZXJzb25fbmFtZSIsCiAgICAgICAgICAgIHBob25lOiAiOTg4NjA5ODg2MCIsCiAgICAgICAgICB9OwogICAgICAgICAgZnVsZmlsbG1lbnQudmVoaWNsZSA9IHsKICAgICAgICAgICAgcmVnaXN0cmF0aW9uOiAiM0xWSjk0NSIsCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmICghZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzWzBdLnN0YXJ0Py50aW1lPy5yYW5nZSkgewogICAgICAgICAgICBmdWxmaWxsbWVudC5zdGFydC50aW1lLnJhbmdlID0gewogICAgICAgICAgICAgIHN0YXJ0OiBleGlzdGluZ1BheWxvYWQuY29udGV4dC50aW1lc3RhbXAsCiAgICAgICAgICAgICAgZW5kOiBnZXRUaW1lc3RhbXBGcm9tRHVyYXRpb24oCiAgICAgICAgICAgICAgICBleGlzdGluZ1BheWxvYWQuY29udGV4dC50aW1lc3RhbXAsCiAgICAgICAgICAgICAgICBmdWxmaWxsbWVudD8uc3RhcnQ/LnRpbWU/LmR1cmF0aW9uIHx8ICJQMUQiCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZ1bGZpbGxtZW50LmVuZC50aW1lID0gewogICAgICAgICAgICAgIHJhbmdlOiB7CiAgICAgICAgICAgICAgICBzdGFydDogZnVsZmlsbG1lbnQ/LnN0YXJ0Py50aW1lPy5yYW5nZT8uZW5kLAogICAgICAgICAgICAgICAgZW5kOiBnZXRUaW1lc3RhbXBGcm9tRHVyYXRpb24oCiAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF5bG9hZC5jb250ZXh0LnRpbWVzdGFtcCwKICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGE/LnRhdCB8fCAiUDFEIgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bGZpbGxtZW50OwogICAgICB9KTsKCiAgICByZXR1cm4gZXhpc3RpbmdQYXlsb2FkOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhPy5iaWxsaW5nKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBzZXNzaW9uRGF0YS5iaWxsaW5nWzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhPy5pdGVtc1swXTsKCiAgaWYgKHNlc3Npb25EYXRhPy5jb25maXJtX2NyZWF0ZV9hdF90aW1lc3RhbXApIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuY3JlYXRlZF9hdCA9CiAgICAgIHNlc3Npb25EYXRhLmNvbmZpcm1fY3JlYXRlX2F0X3RpbWVzdGFtcFswXTsKICB9CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CgogIGlmIChzZXNzaW9uRGF0YT8uZnVsZmlsbG1lbnRzKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLmZ1bGZpbGxtZW50c1swXTsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcykgJiYKICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcy5sZW5ndGggPiAwKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbl90ZXJtcyA9CiAgICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtc1swXTsKICB9CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPQogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMubWFwKChmdWxmaWxsbWV0KSA9PiB7CiAgICAgIGZ1bGZpbGxtZXQuc3RhdGUgPSB7CiAgICAgICAgZGVzY3JpcHRvcjogewogICAgICAgICAgY29kZTogIlBlbmRpbmciLAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIGZ1bGZpbGxtZXQudGFncy5wdXNoKHsKICAgICAgICBjb2RlOiAid2VhdGhlcl9jaGVjayIsCiAgICAgICAgbGlzdDogWwogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAicmFpbmluZyIsCiAgICAgICAgICAgIHZhbHVlOiAibm8iLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICB9KTsKCiAgICAgIHJldHVybiBmdWxmaWxsbWV0OwogICAgfSk7CiAgZGVmYXVsdFBheWxvYWQgPSBwb3B1bGF0ZUZ1bGZpbGxtZW50Q29uZmltKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5xdW90ZSA9IHNlc3Npb25EYXRhLnF1b3RlWzBdOwoKICBpZiAoc2Vzc2lvbkRhdGEucGF5bWVudCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gc2Vzc2lvbkRhdGEucGF5bWVudFswXTsKICB9CgogIGlmICgKICAgIHNlc3Npb25EYXRhLnBheW1lbnRfdHlwZSA9PT0gIk9OLU9SREVSIiAmJgogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50LmNvbGxlY3RlZF9ieSA9PT0gIkJQUCIKICApIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudC5wYXJhbXMgPSB7CiAgICAgIGN1cnJlbmN5OiAiSU5SIiwKICAgICAgdHJhbnNhY3Rpb25faWQ6ICJ0eG4xMjM0IiwKICAgICAgYW1vdW50OiBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlLnByaWNlLnZhbHVlLAogICAgfTsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudC5zdGF0dXMgPT09ICJQQUlEIjsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5saW5rZWRfb3JkZXIpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXJbIkBvbmRjL29yZy9saW5rZWRfb3JkZXIiXSA9CiAgICAgIHNlc3Npb25EYXRhLmxpbmtlZF9vcmRlclswXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5jb25maXJtX3RhZ3MpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFncyA9IHNlc3Npb25EYXRhLmNvbmZpcm1fdGFnc1swXQogIH0KCiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          action: on_confirm
          timestamp: '2026-02-15T12:12:22.442Z'
          transaction_id: T1
          message_id: M1
          bap_id: sample-bap-id
          bap_uri: 'https://bap.example.com'
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: 'https://bpp.example.com'
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: 0dfdb5d1971e42bfb85d0c77e5035239
            state: Accepted
            provider:
              id: Delhivery
            items:
              - descriptor:
                  code: P2H2P
                category_id: Standard Delivery
                id: 4e017417-9784-4e05-bc66-502fb2d3fa72
                fulfillment_id: '1'
                time:
                  label: TAT
                  duration: P1D
                  timestamp: '2024-02-03'
            quote:
              price:
                currency: INR
                value: '42.48'
              breakup:
                - '@ondc/org/item_id': 4e017417-9784-4e05-bc66-502fb2d3fa72
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '36.00'
                - '@ondc/org/item_id': 4e017417-9784-4e05-bc66-502fb2d3fa72
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '6.48'
            payment:
              type: ON-ORDER
              status: PAID
              collected_by: BAP
              '@ondc/org/settlement_details':
                - settlement_ifsc_code: IFSCTEST1234
                  beneficiary_name: DELHIVERY LIMITED
                  settlement_bank_account_no: ACCTEST1234
                  settlement_counterparty: seller-app
                  settlement_type: neft
              '@ondc/org/collection_amount': '0.0'
            fulfillments:
              - id: '1'
                type: Delivery
                state:
                  descriptor:
                    code: Searching-for-Agent
                '@ondc/org/awb_no': '6421710001606'
                tracking: true
                start:
                  instructions:
                    long_desc: Status For Pickup
                    short_desc: '0001'
                  person:
                    name: Sangeetha Mobiles
                  location:
                    gps: '28.4554726,77.0219019'
                    address:
                      name: Sangeetha Mobiles
                      building: 'below Sangeetha mobiles,'
                      city: Bangalore
                      state: Karnataka
                      country: IND
                      area_code: '400005'
                      locality: Banashankari
                  contact:
                    phone: '8197759422'
                    email: anirban@sangeethamobiles.com
                  time:
                    range:
                      start: '2024-02-03T02:38:00.000Z'
                      end: '2024-02-03T07:38:00.000Z'
                end:
                  instructions:
                    long_desc: Status For Drop
                    short_desc: '0001'
                  person:
                    name: sellerapp
                  location:
                    gps: '21,78'
                    address:
                      name: sellerapp
                      building: indiranagar
                      city: Bengaluru
                      state: Karnataka
                      country: IND
                      area_code: '110017'
                      locality: '12,san jose'
                  contact:
                    phone: '9809557809'
                    email: prasanth.m@sellerapp.com
            billing:
              address:
                door: '1, 621/A'
                country: India
                city: Bangalore
                area_code: '560038'
                name: '12th main road , Hal 2nd stage'
                locality: Indiranagar Bangalore
                state: Karnataka
                building: san jose
              updated_at: '2024-02-02T12:46:04.914Z'
              phone: '9650439777'
              tax_number: 29ABDCS3411L1Z7
              name: SELLMETRIC PRIVATE LIMITED
              created_at: '2024-02-02T12:46:04.914Z'
              email: ondc-billing@sellerapp.com
            '@ondc/org/linked_order':
              items:
                - descriptor:
                    name: Samsung Galaxy A03s Blue 3GB 32GB
                  category_id: Mobiles
                  quantity:
                    count: 1
                    measure:
                      value: 10
                      unit: gram
                  price:
                    currency: INR
                    value: '13499'
              provider:
                descriptor:
                  name: Sangeetha mobiles
                address:
                  name: Sangeetha Mobiles
                  building: 'below Sangeetha mobiles,'
                  city: Bangalore
                  state: Karnataka
                  country: IND
                  area_code: '400005'
                  locality: Banashankari
              order:
                id: SLRP-2914
                weight:
                  value: 11
                  unit: gram
                dimensions:
                  length:
                    value: 10
                    unit: centimeter
                  breadth:
                    value: 10
                    unit: centimeter
                  height:
                    value: 10
                    unit: centimeter
            created_at: '2024-02-02T12:46:05.420Z'
            updated_at: '2024-02-02T12:46:05.420Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        on_confirm_tags: $.message.order.tags
        on_confirm_fulfillments: $.message.order.fulfillments
      inputs: {}
  - api: update
    action_id: update_1
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtc1swXS5tYXAoKGl0ZW0pID0+ICh7CiAgICBpZDogaXRlbS5pZCwKICAgIGNhdGVnb3J5X2lkOiBpdGVtLmNhdGVnb3J5X2lkCiAgfSkpOwoKICBpZiAoc2Vzc2lvbkRhdGE/LmZ1bGZpbGxtZW50c1swXSkgewogICAgbGV0IGFnZW50RGV0YWlscyA9IHsKICAgICAgY291bnQ6IDAsCiAgICAgIGRldGFpbHM6IFtdLAogICAgfTsKCiAgICBzZXNzaW9uRGF0YT8uZnVsZmlsbG1lbnRzWzBdWzBdLnRhZ3MubWFwKCh0YWcpID0+IHsKICAgICAgaWYgKHRhZy5jb2RlID09PSAicmlkZXJfZGV0YWlscyIpIHsKICAgICAgICBhZ2VudERldGFpbHMuY291bnQgKz0gMTsKICAgICAgICBjb25zdCB0ZW1wRGF0YSA9IHt9OwogICAgICAgIHRhZy5saXN0LmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgIGlmIChpdGVtLmNvZGUgPT09ICJuYW1lIikgewogICAgICAgICAgICB0ZW1wRGF0YS5uYW1lID0gaXRlbS52YWx1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXRlbS5jb2RlID09PSAicGhvbmUiKSB7CiAgICAgICAgICAgIHRlbXBEYXRhLnBob25lID0gaXRlbS52YWx1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXRlbS5jb2RlID09PSAidmVoaWNsZV9yZWdpc3RyYXRpb24iKSB7CiAgICAgICAgICAgIHRlbXBEYXRhLnJlZ2lzdHJhdGlvbiA9IGl0ZW0udmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgYWdlbnREZXRhaWxzLmRldGFpbHMucHVzaCh7CiAgICAgICAgICBhZ2VudDogewogICAgICAgICAgICBuYW1lOiB0ZW1wRGF0YS5uYW1lLAogICAgICAgICAgICBwaG9uZTogdGVtcERhdGEucGhvbmUsCiAgICAgICAgICB9LAogICAgICAgICAgdmVoaWNsZTogewogICAgICAgICAgICByZWdpc3RyYXRpb246IHRlbXBEYXRhLnJlZ2lzdHJhdGlvbiwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0gc2Vzc2lvbkRhdGE/LmZ1bGZpbGxtZW50c1swXT8ubWFwKAogICAgICAoZnVsZmlsbG1lbnQsIGluZGV4KSA9PiB7CiAgICAgICAgLy8gVXBkYXRlIHN0YXJ0IGluc3RydWN0aW9ucyBvbmx5IGlmIGNvZGUgaXMgTk9UICI1IgogICAgICAgIGNvbnN0IGV4aXN0aW5nU3RhcnRDb2RlID0gZnVsZmlsbG1lbnQ/LnN0YXJ0Py5pbnN0cnVjdGlvbnM/LmNvZGU7CiAgICAgICAgaWYgKGV4aXN0aW5nU3RhcnRDb2RlICE9PSAiNSIpIHsKICAgICAgICAgIGZ1bGZpbGxtZW50LnN0YXJ0ID0gewogICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHsKICAgICAgICAgICAgICBjb2RlOiAiMiIsCiAgICAgICAgICAgICAgc2hvcnRfZGVzYzogIjEyMzEyMyIsCiAgICAgICAgICAgICAgbG9uZ19kZXNjOiAiYWRkaXRpb25hbCBpbnN0cnVjdGlvbnMgZm9yIHBpY2t1cCIsCiAgICAgICAgICAgICAgYWRkaXRpb25hbF9kZXNjOiB7CiAgICAgICAgICAgICAgICBjb250ZW50X3R5cGU6ICJ0ZXh0L2h0bWwiLAogICAgICAgICAgICAgICAgdXJsOiAiaHR0cDovL2Rlc2NyaXB0aW9uLmNvbSIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH07CiAgICAgICAgfQoKCiAgICAgICAgLy8gVXBkYXRlIHRhZ3MKICAgICAgICBsZXQgcHJlVGFncyA9IHJlbW92ZVRhZ3NCeUNvZGVzKGZ1bGZpbGxtZW50LnRhZ3MsIFsKICAgICAgICAgICJ3ZWF0aGVyX2NoZWNrIiwKICAgICAgICAgICJydG9fYWN0aW9uIiwKICAgICAgICAgICJjb2Rfc2V0dGxlbWVudF9kZXRhaWwiLAogICAgICAgICAgInN0YXRlIiwKICAgICAgICBdKTsKICAgICAgICBjb25zb2xlLmxvZygicHJlVGFncyIsIEpTT04uc3RyaW5naWZ5KHByZVRhZ3MpKTsKICAgICAgICBwcmVUYWdzID0gWwogICAgICAgICAgLi4ucHJlVGFncywKICAgICAgICAgIHsKICAgICAgICAgICAgY29kZTogInN0YXRlIiwKICAgICAgICAgICAgbGlzdDogWwogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvZGU6ICJyZWFkeV90b19zaGlwIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIC4uLihzZXNzaW9uRGF0YS5jYXRlZ29yeV9pZCA9PT0gIkltbWVkaWF0ZSBEZWxpdmVyeSIKICAgICAgICAgICAgICAgID8gWwogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY29kZTogIm9yZGVyX3JlYWR5IiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICA6IFtdKSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgXTsKCiAgICAgICAgZnVsZmlsbG1lbnQudGFncyA9IHByZVRhZ3M7CgogICAgICAgIC8vIEFnZW50IGFuZCB2ZWhpY2xlIGFzc2lnbm1lbnQKICAgICAgICBpZiAoc2Vzc2lvbkRhdGE/LnJhdGVfYmFzaXMpIHsKICAgICAgICAgIGlmIChpbmRleCA+IGFnZW50RGV0YWlscy5jb3VudCkgewogICAgICAgICAgICBpbmRleCA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICBmdWxmaWxsbWVudC5hZ2VudCA9IGFnZW50RGV0YWlscy5kZXRhaWxzW2luZGV4XS5hZ2VudDsKICAgICAgICAgIGZ1bGZpbGxtZW50LnZlaGljbGUgPSBhZ2VudERldGFpbHMuZGV0YWlsc1tpbmRleF0udmVoaWNsZTsKICAgICAgICB9CgogICAgICAgIGRlbGV0ZSBmdWxmaWxsbWVudC5zdGF0ZTsKCiAgICAgICAgcmV0dXJuIGZ1bGZpbGxtZW50OwogICAgICB9CiAgICApOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhLmxpbmtlZF9vcmRlcikgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlclsiQG9uZGMvb3JnL2xpbmtlZF9vcmRlciJdID0KICAgICAgc2Vzc2lvbkRhdGEubGlua2VkX29yZGVyWzBdOwogIH0KCgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          action: update
          bap_id: staging-automation.ondc.org
          bap_uri: 'https://dev-automation.ondc.org/api-service/ONDC:LOG10/1.2.5/buyer'
          bpp_id: staging-automation.ondc.org
          bpp_uri: 'https://dev-automation.ondc.org/api-service/ONDC:LOG10/1.2.5/seller'
          city: 'std:080'
          core_version: 1.2.5
          country: IND
          domain: 'ONDC:LOG10'
          message_id: M1
          timestamp: '2026-02-15T12:51:03.311Z'
          transaction_id: T1
          ttl: PT30S
        message:
          order:
            '@ondc/org/linked_order':
              items:
                - category_id: Grocery
                  descriptor:
                    name: Atta
                  price:
                    currency: INR
                    value: '150.00'
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 0.5
              order:
                dimensions:
                  breadth:
                    unit: centimeter
                    value: 1
                  height:
                    unit: centimeter
                    value: 1
                  length:
                    unit: centimeter
                    value: 1
                id: O1
                weight:
                  unit: kilogram
                  value: 1
            fulfillments:
              - end:
                  contact:
                    email: xyz.qweq@gmail.com
                    phone: '9123426789'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 2
                      city: my city name 2
                      country: India
                      locality: My street name 2
                      name: 'My house or building #'
                      state: my state 2
                    gps: '12.4535,77.9283'
                  person:
                    name: person_name_2
                id: '1'
                start:
                  instructions:
                    additional_desc:
                      content_type: text/html
                      url: 'http://description.com'
                    code: '2'
                    long_desc: additional instructions for pickup
                    short_desc: '123123'
                tracking: true
                type: Delivery
            id: 989bb323-e5f5-4374-808f-45ebaad83472
            items:
              - category_id: Standard Delivery
                id: I1
            updated_at: '2026-02-15T12:51:03.311Z'
          update_target: fulfillment
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        update_fulfillments: $.message.order.fulfillments
      inputs: {}
  - api: on_update
    action_id: on_update_1
    owner: BPP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBjb25zb2xlLmxvZygidXBkYXRlX2Z1bGZpbGxtZW50cyIsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25EYXRhLnVwZGF0ZV9mdWxmaWxsbWVudHMpKTsKICBkZWZhdWx0UGF5bG9hZC5jb250ZXh0Lm1lc3NhZ2VfaWQgPSBzZXNzaW9uRGF0YS5sYXRlc3RNZXNzYWdlX2lkWzBdOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgY29uc3QgcG9wdWxhdGVGdWxmaWxsbWVudFVwZGF0ZSA9ICgKICAgIGV4aXN0aW5nUGF5bG9hZCwKICAgIHNlc3Npb25EYXRhCiAgKSA9PiB7CiAgICBjb25zb2xlLmxvZygiZXhpc3RpbmYgcGF5bG9hZCBpbiB0aGlzIGZ1bmN0aW9uIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQYXlsb2FkKSk7CiAgICBleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPQogICAgICAoZXhpc3RpbmdQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzIHx8IFtdKS5tYXAoKGZ1bGZpbGxtZW50KSA9PiB7CgogICAgICAgIGNvbnN0IHVwZGF0ZWRUYWdzID0gKGZ1bGZpbGxtZW50LnRhZ3MgfHwgW10pLm1hcCgodGFnKSA9PiB7CiAgICAgICAgICBpZiAodGFnLmNvZGUgPT09ICJzdGF0ZSIpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAuLi50YWcsCiAgICAgICAgICAgICAgbGlzdDogKHRhZy5saXN0IHx8IFtdKS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvZGUgPT09ICJyZWFkeV90b19zaGlwIikgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRhZzsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFleGlzdGluZ1BheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHNbMF0uc3RhcnQ/LnRpbWU/LnJhbmdlKSB7CiAgICAgICAgICBmdWxmaWxsbWVudC5zdGFydC50aW1lLnJhbmdlID0gewogICAgICAgICAgICBzdGFydDogZXhpc3RpbmdQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wLAogICAgICAgICAgICBlbmQ6IGdldFRpbWVzdGFtcEZyb21EdXJhdGlvbigKICAgICAgICAgICAgICBleGlzdGluZ1BheWxvYWQuY29udGV4dC50aW1lc3RhbXAsCiAgICAgICAgICAgICAgZnVsZmlsbG1lbnQ/LnN0YXJ0Py50aW1lPy5kdXJhdGlvbiB8fCAiUDFEIgogICAgICAgICAgICApLAogICAgICAgICAgfTsKCiAgICAgICAgICBmdWxmaWxsbWVudC5lbmQudGltZSA9IHsKICAgICAgICAgICAgcmFuZ2U6IHsKICAgICAgICAgICAgICBzdGFydDogZnVsZmlsbG1lbnQ/LnN0YXJ0Py50aW1lPy5yYW5nZT8uZW5kLAogICAgICAgICAgICAgIGVuZDogZ2V0VGltZXN0YW1wRnJvbUR1cmF0aW9uKAogICAgICAgICAgICAgICAgZXhpc3RpbmdQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wLAogICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGE/LnRhdCB8fCAiUDFEIgogICAgICAgICAgICAgICksCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLmZ1bGZpbGxtZW50LAogICAgICAgICAgdGFnczogdXBkYXRlZFRhZ3MKICAgICAgICB9OwogICAgICB9KTsKCiAgICByZXR1cm4gZXhpc3RpbmdQYXlsb2FkOwoKICB9OwoKICBpZiAoc2Vzc2lvbkRhdGE/Lm9uX2NvbmZpcm1fZnVsZmlsbG1lbnRzWzBdKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLm9uX2NvbmZpcm1fZnVsZmlsbG1lbnRzWzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQgPSBwb3B1bGF0ZUZ1bGZpbGxtZW50VXBkYXRlKGRlZmF1bHRQYXlsb2FkLCBzZXNzaW9uRGF0YSk7CgogIGNvbnNvbGUubG9nKCJleGlzdGluZyBwYXlsb2FkLWRlZmF1bHRQYXlsb2FkIiwgSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFBheWxvYWQpKTsKCgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0KICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzLm1hcCgoZnVsZmlsbG1ldCkgPT4gewogICAgICBmdWxmaWxsbWV0LnRhZ3MgPSByZW1vdmVUYWdzQnlDb2RlcyhmdWxmaWxsbWV0LnRhZ3MsIFsKICAgICAgICAic3RhdGUiLAogICAgICAgICJydG9fYWN0aW9uIiwKICAgICAgICAid2VhdGhlcl9jaGVjayIsCiAgICAgIF0pOwoKICAgICAgcmV0dXJuIGZ1bGZpbGxtZXQ7CiAgICB9KTsKCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKICBpZiAoQXJyYXkuaXNBcnJheShzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fdGVybXMpICYmCiAgICBzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fdGVybXMubGVuZ3RoID4gMCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5jYW5jZWxsYXRpb25fdGVybXMgPQogICAgICBzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fdGVybXNbMF07CiAgfQoKICBpZiAoc2Vzc2lvbkRhdGEucGF5bWVudCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gc2Vzc2lvbkRhdGEucGF5bWVudFswXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YT8uaXRlbXMpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtc1swXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YT8uYmlsbGluZykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gc2Vzc2lvbkRhdGEuYmlsbGluZ1swXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YT8ucXVvdGUpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5saW5rZWRfb3JkZXIpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXJbIkBvbmRjL29yZy9saW5rZWRfb3JkZXIiXSA9CiAgICAgIHNlc3Npb25EYXRhLmxpbmtlZF9vcmRlclswXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5vbl9jb25maXJtX3RhZ3MpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFncyA9IHNlc3Npb25EYXRhLm9uX2NvbmZpcm1fdGFnc1swXQogIH0KCiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          action: on_update
          bap_id: staging-automation.ondc.org
          bap_uri: 'https://dev-automation.ondc.org/api-service/ONDC:LOG10/1.2.5/buyer'
          bpp_id: staging-automation.ondc.org
          bpp_uri: 'https://dev-automation.ondc.org/api-service/ONDC:LOG10/1.2.5/seller'
          city: 'std:080'
          core_version: 1.2.5
          country: IND
          domain: 'ONDC:LOG10'
          message_id: M1
          timestamp: '2026-02-15T12:51:03.425Z'
          transaction_id: T1
        message:
          order:
            '@ondc/org/linked_order':
              items:
                - category_id: F&B
                  descriptor:
                    name: Item1
                  price:
                    currency: INR
                    value: '70.00'
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 1
                - category_id: F&B
                  descriptor:
                    name: Item2
                  price:
                    currency: INR
                    value: '160.00'
                  quantity:
                    count: 1
                    measure:
                      unit: kilogram
                      value: 1
              order:
                dimensions:
                  breadth:
                    unit: centimeter
                    value: 1
                  height:
                    unit: centimeter
                    value: 1
                  length:
                    unit: centimeter
                    value: 1
                id: O1
                weight:
                  unit: kilogram
                  value: 3
              provider:
                address:
                  area_code: '560001'
                  building: My building name 1
                  city: my city 1
                  locality: My street name 1
                  name: My store name 1
                  state: my state 1
                descriptor:
                  name: Seller1
            billing:
              address:
                area_code: '560076'
                building: My house or building name
                city: Bengaluru
                country: India
                locality: Jayanagar
                name: My house or building no
                state: Karnataka
              created_at: '2026-02-15T12:51:02.655Z'
              email: abcd.efgh@gmail.com
              name: ONDC Logistics Buyer NP
              phone: '9886098860'
              tax_number: AS34234HKJ342KH
              updated_at: '2026-02-15T12:51:02.655Z'
            fulfillments:
              - end:
                  contact:
                    email: xyz.qweq@gmail.com
                    phone: '9123426789'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 2
                      city: my city name 2
                      country: India
                      locality: My street name 2
                      name: 'My house or building #'
                      state: my state 2
                    gps: '12.4535,77.9283'
                  person:
                    name: person_name_2
                  time:
                    range:
                      end: '2026-02-18T00:51:03.425Z'
                      start: '2026-02-16T00:51:03.425Z'
                id: '1'
                start:
                  contact:
                    email: abcd.efgh@gmail.com
                    phone: '9886098860'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 1
                      city: my city 1
                      country: India
                      locality: My street name 1
                      name: My store name 1
                      state: my state 1
                    gps: '12.4535,77.9283'
                    id: S1
                  person:
                    name: person_name_1
                  time:
                    duration: PT12H
                    range:
                      end: '2026-02-16T00:51:03.425Z'
                      start: '2026-02-15T12:51:03.425Z'
                state:
                  descriptor:
                    code: Searching-for-Agent
                tracking: true
                type: Delivery
            id: 989bb323-e5f5-4374-808f-45ebaad83472
            items:
              - category_id: Standard Delivery
                fulfillment_id: '1'
                id: I1
                time:
                  duration: P2D
                  label: TAT
                  timestamp: '2026-02-17'
            payment:
              '@ondc/org/settlement_basis': invoicing
              '@ondc/org/settlement_details':
                - beneficiary_name: xxxxx
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_counterparty: lsp
                  settlement_ifsc_code: XXXXXXXXX
                  settlement_type: upi
                  upi_address: gft@oksbi
              '@ondc/org/settlement_window': P15D
              collected_by: BAP
              type: POST-FULFILLMENT
            provider:
              id: P1
            quote:
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
              price:
                currency: INR
                value: '59.00'
            state: In-progress
            updated_at: '2026-02-15T12:51:03.425Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        on_update_tags: $.message.order.tags
        on_update_fulfillments: $.message.order.fulfillments
      inputs: {}
  - api: on_status
    action_id: on_status_agent_assigned
    owner: BPP
    responseFor: null
    unsolicited: true
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgaWYgKHNlc3Npb25EYXRhPy5vbl91cGRhdGVfZnVsZmlsbG1lbnRzWzBdKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLm9uX3VwZGF0ZV9mdWxmaWxsbWVudHNbMF07CiAgfQogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuc3RhdGUgPSAiSW4tcHJvZ3Jlc3MiOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cy5tYXAoKGZ1bGZpbGxtZW50KSA9PiB7CiAgICAgIGZ1bGZpbGxtZW50LnN0YXRlLmRlc2NyaXB0b3IuY29kZSA9ICJBZ2VudC1hc3NpZ25lZCI7CgoKICAgICAgZnVsZmlsbG1lbnQuYWdlbnQgPSB7CiAgICAgICAgbmFtZTogImFnZW50X25hbWUiLAogICAgICAgIHBob25lOiAiOTg4NjA5ODg2MCIsCiAgICAgIH07CiAgICAgIGZ1bGZpbGxtZW50LnZlaGljbGUgPSB7CiAgICAgICAgcmVnaXN0cmF0aW9uOiAiM0xWSjk0NSIsCiAgICAgIH07CgogICAgICAvLyBmdWxmaWxsbWVudC50YWdzID0gWwogICAgICAvLyAgIC4uLnJlbW92ZVRhZ3NCeUNvZGVzKGZ1bGZpbGxtZW50LnRhZ3MsIFsKICAgICAgLy8gICAgICJ3ZWF0aGVyX2NoZWNrIiwKICAgICAgLy8gICAgICJydG9fYWN0aW9uIiwKICAgICAgLy8gICAgICJzdGF0ZSIsCiAgICAgIC8vICAgXSksCiAgICAgIC8vIF07CgogICAgICByZXR1cm4gZnVsZmlsbG1lbnQ7CiAgICB9KTsKCiAgaWYgKHNlc3Npb25EYXRhPy5iaWxsaW5nKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBzZXNzaW9uRGF0YS5iaWxsaW5nWzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKICBpZiAoCiAgICBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcykgJiYKICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcy5sZW5ndGggPiAwCiAgKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbl90ZXJtcyA9CiAgICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtc1swXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5wYXltZW50KSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50LnN0YXR1cyA9IGdldFBheW1lbnRTdGF0dXMoCiAgICBzZXNzaW9uRGF0YS5wYXltZW50X3R5cGUsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlCiAgKTsKCiAgaWYgKHNlc3Npb25EYXRhPy5pdGVtc1swXSkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zWzBdOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhLmxpbmtlZF9vcmRlclswXSkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlclsiQG9uZGMvb3JnL2xpbmtlZF9vcmRlciJdID0KICAgICAgc2Vzc2lvbkRhdGEubGlua2VkX29yZGVyWzBdOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhLm9uX2NvbmZpcm1fdGFncykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci50YWdzID0gc2Vzc2lvbkRhdGEub25fY29uZmlybV90YWdzWzBdCiAgfQoKICBpZiAoc2Vzc2lvbkRhdGEub25fdXBkYXRlX3RhZ3MubGVuZ3RoID4gMCkgewogICAgY29uc29sZS5sb2coInNlc3Npb25EYXRhLm9uX3VwZGF0ZV90YWdzIiwgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGEub25fdXBkYXRlX3RhZ3MpKTsKCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3MgPSBzZXNzaW9uRGF0YS5vbl91cGRhdGVfdGFnc1swXQogIH0KICAKCiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          action: on_status
          bap_id: staging-automation.ondc.org
          bap_uri: 'https://dev-automation.ondc.org/api-service/ONDC:LOG10/1.2.5/buyer'
          bpp_id: staging-automation.ondc.org
          bpp_uri: 'https://dev-automation.ondc.org/api-service/ONDC:LOG10/1.2.5/seller'
          city: 'std:080'
          core_version: 1.2.5
          country: IND
          domain: 'ONDC:LOG10'
          message_id: 9dfb5950-c519-40eb-afd1-0c3dbd0cfca8
          timestamp: '2026-02-15T12:51:04.050Z'
          transaction_id: 8544228f-a14f-4bca-81e5-a720286b5233
        message:
          order:
            '@ondc/org/linked_order':
              items:
                - category_id: F&B
                  descriptor:
                    name: Item1
                  price:
                    currency: INR
                    value: '70.00'
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 1
                - category_id: F&B
                  descriptor:
                    name: Item2
                  price:
                    currency: INR
                    value: '160.00'
                  quantity:
                    count: 1
                    measure:
                      unit: kilogram
                      value: 1
              order:
                dimensions:
                  breadth:
                    unit: centimeter
                    value: 1
                  height:
                    unit: centimeter
                    value: 1
                  length:
                    unit: centimeter
                    value: 1
                id: O1
                weight:
                  unit: kilogram
                  value: 3
              provider:
                address:
                  area_code: '560001'
                  building: My building name 1
                  city: my city 1
                  locality: My street name 1
                  name: My store name 1
                  state: my state 1
                descriptor:
                  name: Seller1
            billing:
              address:
                area_code: '560076'
                building: My house or building name
                city: Bengaluru
                country: India
                locality: Jayanagar
                name: My house or building no
                state: Karnataka
              created_at: '2026-02-15T12:51:02.655Z'
              email: abcd.efgh@gmail.com
              name: ONDC Logistics Buyer NP
              phone: '9886098860'
              tax_number: AS34234HKJ342KH
              updated_at: '2026-02-15T12:51:02.655Z'
            fulfillments:
              - agent:
                  name: agent_name
                  phone: '9886098860'
                end:
                  contact:
                    email: xyz.qweq@gmail.com
                    phone: '9123426789'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 2
                      city: my city name 2
                      country: India
                      locality: My street name 2
                      name: 'My house or building #'
                      state: my state 2
                    gps: '12.4535,77.9283'
                  person:
                    name: person_name_2
                  time:
                    range:
                      end: '2026-02-18T00:51:03.425Z'
                      start: '2026-02-16T00:51:03.425Z'
                id: '1'
                start:
                  contact:
                    email: abcd.efgh@gmail.com
                    phone: '9886098860'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 1
                      city: my city 1
                      country: India
                      locality: My street name 1
                      name: My store name 1
                      state: my state 1
                    gps: '12.4535,77.9283'
                    id: S1
                  person:
                    name: person_name_1
                  time:
                    duration: PT12H
                    range:
                      end: '2026-02-16T00:51:03.425Z'
                      start: '2026-02-15T12:51:03.425Z'
                state:
                  descriptor:
                    code: Agent-assigned
                tracking: true
                type: Delivery
                vehicle:
                  registration: 3LVJ945
            id: 989bb323-e5f5-4374-808f-45ebaad83472
            items:
              - category_id: Standard Delivery
                fulfillment_id: '1'
                id: I1
                time:
                  duration: P2D
                  label: TAT
                  timestamp: '2026-02-17'
            payment:
              '@ondc/org/settlement_basis': invoicing
              '@ondc/org/settlement_details':
                - beneficiary_name: xxxxx
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_counterparty: lsp
                  settlement_ifsc_code: XXXXXXXXX
                  settlement_type: upi
                  upi_address: gft@oksbi
              '@ondc/org/settlement_window': P15D
              collected_by: BAP
              status: NOT-PAID
              type: POST-FULFILLMENT
            provider:
              id: P1
            quote:
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
              price:
                currency: INR
                value: '59.00'
            state: In-progress
            tags:
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: 'yes'
            updated_at: '2026-02-15T12:51:04.050Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        on_status_agent_assigned_fulfillments: $.message.order.fulfillments
      inputs: {}
  - api: on_status
    action_id: on_status_order_picked_up
    owner: BPP
    responseFor: null
    unsolicited: true
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgaWYgKHNlc3Npb25EYXRhPy5vbl9zdGF0dXNfYWdlbnRfYXNzaWduZWRfZnVsZmlsbG1lbnRzWzBdKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9IHNlc3Npb25EYXRhLm9uX3N0YXR1c19hZ2VudF9hc3NpZ25lZF9mdWxmaWxsbWVudHNbMF07CiAgfQoKICAKICAgICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5zdGF0ZSA9ICJJbi1wcm9ncmVzcyI7CiAgICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuZnVsZmlsbG1lbnRzID0KICAgICAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cy5tYXAoKGZ1bGZpbGxtZW50KSA9PiB7CiAgICAgICAgICBpZiAoZnVsZmlsbG1lbnQudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgICAgICBmdWxmaWxsbWVudC5zdGF0ZS5kZXNjcmlwdG9yLmNvZGUgPSAiT3JkZXItcGlja2VkLXVwIjsKICAgICAgICAgICAgZnVsZmlsbG1lbnQuc3RhcnQudGltZSA9IHsKICAgICAgICAgICAgICAuLi5mdWxmaWxsbWVudC5zdGFydC50aW1lLAogICAgICAgICAgICAgIHRpbWVzdGFtcDogZGVmYXVsdFBheWxvYWQuY29udGV4dD8udGltZXN0YW1wLAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgcDJoMnBMaXN0ID0gWwogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvZGU6ICJncHNfZW5hYmxlZCIsCiAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvZGU6ICJ1cmxfZW5hYmxlZCIsCiAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb2RlOiAidXJsIiwKICAgICAgICAgICAgICAgIHZhbHVlOiAiaHR0cHM6Ly90cmFja2luZ191cmwuY29tIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdOwoKICAgICAgICAgICAgZnVsZmlsbG1lbnQudGFncy5wdXNoKHsKICAgICAgICAgICAgICBjb2RlOiAidHJhY2tpbmciLAogICAgICAgICAgICAgIGxpc3Q6IHAyaDJwTGlzdCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZnVsZmlsbG1lbnQ7CiAgICAgICAgfSk7CgogIGlmIChzZXNzaW9uRGF0YT8uYmlsbGluZykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5iaWxsaW5nID0gc2Vzc2lvbkRhdGEuYmlsbGluZ1swXTsKICB9CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudXBkYXRlZF9hdCA9IGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnF1b3RlID0gc2Vzc2lvbkRhdGEucXVvdGVbMF07CiAgaWYgKAogICAgQXJyYXkuaXNBcnJheShzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fdGVybXMpICYmCiAgICBzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fdGVybXMubGVuZ3RoID4gMAogICkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5jYW5jZWxsYXRpb25fdGVybXMgPQogICAgICBzZXNzaW9uRGF0YS5jYW5jZWxsYXRpb25fdGVybXNbMF07CiAgfQoKICBpZiAoc2Vzc2lvbkRhdGEucGF5bWVudCkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50ID0gc2Vzc2lvbkRhdGEucGF5bWVudFswXTsKICB9CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudC5zdGF0dXMgPSBnZXRQYXltZW50U3RhdHVzKAogICAgc2Vzc2lvbkRhdGEucGF5bWVudF90eXBlLAogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5zdGF0ZQogICk7CgogIGlmICgKICAgIHNlc3Npb25EYXRhLnBheW1lbnRfdHlwZSA9PT0gIk9OLUZVTEZJTExNRU5UIiAmJgogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5zdGF0ZSA9PT0gIkNvbXBsZXRlZCIKICApIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucGF5bWVudFsiQG9uZGMvb3JnL3NldHRsZW1lbnRfZGV0YWlscyJdID0gWwogICAgICB7CiAgICAgICAgLi4uZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50WwogICAgICAgICJAb25kYy9vcmcvc2V0dGxlbWVudF9kZXRhaWxzIgogICAgICAgIF1bMF0sCiAgICAgICAgc2V0dGxlbWVudF9zdGF0dXM6ICJQQUlEIiwKICAgICAgICBzZXR0bGVtZW50X3JlZmVyZW5jZTogIlhYWFhYWFhYWCIsCiAgICAgICAgc2V0dGxlbWVudF90aW1lc3RhbXA6IGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wLAogICAgICB9LAogICAgXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YT8uaXRlbXMpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIuaXRlbXMgPSBzZXNzaW9uRGF0YS5pdGVtc1swXTsKICB9CgoKICBpZiAoc2Vzc2lvbkRhdGEubGlua2VkX29yZGVyKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyWyJAb25kYy9vcmcvbGlua2VkX29yZGVyIl0gPQogICAgICBzZXNzaW9uRGF0YS5saW5rZWRfb3JkZXJbMF07CiAgfQoKICBpZiAoc2Vzc2lvbkRhdGEub25fY29uZmlybV90YWdzKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnRhZ3MgPSBzZXNzaW9uRGF0YS5vbl9jb25maXJtX3RhZ3NbMF0KICB9CgogIGlmIChzZXNzaW9uRGF0YS5vbl91cGRhdGVfdGFncy5sZW5ndGggPiAwKSB7CiAgICBjb25zb2xlLmxvZygic2Vzc2lvbkRhdGEub25fdXBkYXRlX3RhZ3MiLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uRGF0YS5vbl91cGRhdGVfdGFncykpOwoKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFncyA9IHNlc3Npb25EYXRhLm9uX3VwZGF0ZV90YWdzWzBdCiAgfQogIHJldHVybiBkZWZhdWx0UGF5bG9hZDsKfQ==
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          action: on_status
          timestamp: '2026-02-15T15:45:25.073Z'
          transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
          message_id: fb3fad91-32d2-42d8-81c9-c7533885d794
          bap_id: sample-bap-id
          bap_uri: 'https://bap.example.com'
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: 'https://bpp.example.com'
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: 8355a0472eee42c8b470d4c2ae803104
            state: In-progress
            provider:
              id: DTDC
            items:
              - id: B2C SMART EXPRESS
                category_id: Standard Delivery
                fulfillment_id: '1'
                descriptor:
                  code: P2H2P
                time:
                  label: TAT
                  duration: P2D
                  timestamp: '2024-09-04'
            quote:
              price:
                currency: INR
                value: '77.00'
              breakup:
                - '@ondc/org/item_id': B2C SMART EXPRESS
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '63.14'
                - '@ondc/org/item_id': B2C SMART EXPRESS
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.86'
            billing:
              name: Bizom
              email: ondchelp@mobisy.com
              phone: '9886193962'
              address:
                name: Bizom
                locality: Bellandur Main Rd
                city: Bengaluru
                state: Karnataka
                country: India
                building: Sri Arunachaleshwara Building
                area_code: '560103'
              tax_number: 29AAFCM4341L1Z6
              created_at: '2024-09-02T09:58:13.462Z'
              updated_at: '2024-09-02T09:58:13.462Z'
            payment:
              type: POST-FULFILLMENT
              collected_by: BAP
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: '123456789123456'
                  settlement_ifsc_code: ICIC00001234
              status: NOT-PAID
            '@ondc/org/linked_order':
              items:
                - category_id: Grocery
                  descriptor:
                    name: >-
                      Surya Pickle Mirchi (Red Chilli) Powder 500g |Suitable for
                      Pickling
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 0.5
                  price:
                    currency: INR
                    value: '70.0'
              provider:
                address:
                  name: Shailja Rajput
                  locality: Central Jail Road Sarjapur
                  city: Bangalore
                  state: Karnataka
                  country: IND
                  building: Silverwood Regency Apartment
                  area_code: '560103'
                descriptor:
                  name: Bizom Mart
              order:
                id: 2024-09-02-361761
                weight:
                  unit: kilogram
                  value: 1
                dimensions:
                  length:
                    unit: centimeter
                    value: 8
                  breadth:
                    unit: centimeter
                    value: 10
                  height:
                    unit: centimeter
                    value: 12
            created_at: '2024-09-02T09:58:23.392Z'
            updated_at: '2024-09-02T11:40:55.610Z'
            fulfillments:
              - id: '1'
                type: Delivery
                '@ondc/org/awb_no': 7D2321487
                tracking: true
                start:
                  person:
                    name: Shailja Rajput
                  location:
                    gps: '12.927341,77.671691'
                    address:
                      name: Shailja Rajput
                      locality: Central Jail Road Sarjapur
                      city: Bangalore
                      state: Karnataka
                      country: IND
                      building: Silverwood Regency Apartment
                      area_code: '560103'
                  contact:
                    phone: '7829222119'
                    email: shailja.rajput@mobisy.com
                  time:
                    range:
                      start: '2024-09-02T10:05:00.639Z'
                      end: '2024-09-02T17:30:00.639Z'
                    timestamp: '2024-09-02T11:40:53.614Z'
                  instructions:
                    name: Proof Of Pickup
                    images:
                      - >-
                        https://shipsy-demo.s3.amazonaws.com/1/poc/2024-09-02/pickupcompleted/poc_z71y3c_1725277255498
                end:
                  person:
                    name: Delhi Address
                  location:
                    gps: '28.516106,77.114037'
                    address:
                      name: Delhi Address
                      locality: Avenue Jacaranda
                      city: New Delhi
                      state: Delhi
                      country: IND
                      building: Maheshwari Apartment
                      area_code: '110038'
                  contact:
                    phone: '7829222119'
                    email: shailja.rajput@mobisy.com
                  time:
                    range:
                      start: '2024-09-04T10:05:00.639Z'
                      end: '2024-09-04T17:30:00.639Z'
                tags:
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: 'yes'
                      - code: url_enabled
                        value: 'yes'
                      - code: url
                        value: >-
                          https://testtrack.dtdc.com/ctbs-tracking/customerInterface.tr?submitName=showCITrackingDetails&cType=Consignment&cnNo=7D2321487
                state:
                  descriptor:
                    code: Order-picked-up
                vehicle:
                  registration: HR1234
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
        on_status_order_picked_up_fulfillments: $.message.order.fulfillments
      inputs: {}
  - api: track
    action_id: track_1
    owner: BAP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyX2lkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          action: track
          timestamp: '2026-02-15T16:10:15.723Z'
          transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
          message_id: ac3e13ab-ac43-4c3d-b934-a3bc7a5c2cad
          bap_id: sample-bap-id
          bap_uri: 'https://bap.example.com'
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: 'https://bpp.example.com'
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order_id: 989bb323-e5f5-4374-808f-45ebaad83472
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_track
    action_id: on_track_1
    owner: BPP
    responseFor: null
    unsolicited: false
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBpZiAoc2Vzc2lvbkRhdGE/Lm9uX3N0YXR1c19vcmRlcl9waWNrZWRfdXBfZnVsZmlsbG1lbnRzKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLnRyYWNraW5nLmlkID0gc2Vzc2lvbkRhdGEub25fc3RhdHVzX29yZGVyX3BpY2tlZF91cF9mdWxmaWxsbWVudHNbMF1bMF0uaWQ7CiAgfQoKICBjb25zdCBjb250ZXh0VGltZXN0YW1wID0gZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CiAgY29uc3QgaXRlbVR5cGUgPSBzZXNzaW9uRGF0YS5pdGVtc1swXVswXS5kZXNjcmlwdG9yLmNvZGUgfHwgIlAyUCIKICBpZiAoaXRlbVR5cGUgPT09ICJQMlAiKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLnRyYWNraW5nLmxvY2F0aW9uID0gewogICAgICBncHM6ICIxMi45NzQwLDc3LjYxMzQiLAogICAgICB0aW1lOiB7CiAgICAgICAgdGltZXN0YW1wOiBjb250ZXh0VGltZXN0YW1wLAogICAgICB9LAogICAgICB1cGRhdGVkX2F0OiBjb250ZXh0VGltZXN0YW1wLAogICAgfTsKICAgIGRlbGV0ZSBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLnRyYWNraW5nLnVybDsKICB9IGVsc2UgewogICAgZGVsZXRlIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UudHJhY2tpbmcubG9jYXRpb247CiAgfQoKICBjb25zdCB0YWdzID0gWwogICAgewogICAgICBjb2RlOiAib3JkZXIiLAogICAgICBsaXN0OiBbCiAgICAgICAgewogICAgICAgICAgY29kZTogImlkIiwKICAgICAgICAgIHZhbHVlOiBzZXNzaW9uRGF0YS5vcmRlcl9pZFswXSwKICAgICAgICB9LAogICAgICBdLAogICAgfSwKICAgIHsKICAgICAgY29kZTogImNvbmZpZyIsCiAgICAgIGxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAiYXR0ciIsCiAgICAgICAgICB2YWx1ZToKICAgICAgICAgICAgaXRlbVR5cGUgPT09ICJQMlAiCiAgICAgICAgICAgICAgPyAidHJhY2tpbmcubG9jYXRpb24uZ3BzIgogICAgICAgICAgICAgIDogInRyYWNraW5nLnVybCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICB2YWx1ZTogaXRlbVR5cGUgPT09ICJQMlAiID8gImxpdmVfcG9sbCIgOiAiZGVmZXJyZWQiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9LAogICAgLi4uKGl0ZW1UeXBlID09PSAiUDJQIgogICAgICA/IFsKICAgICAgICB7CiAgICAgICAgICBjb2RlOiAicGF0aCIsCiAgICAgICAgICBsaXN0OiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAibGF0X2xuZyIsCiAgICAgICAgICAgICAgdmFsdWU6ICIxMi45NzQwLDc3LjYxMzQiLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29kZTogInNlcXVlbmNlIiwKICAgICAgICAgICAgICB2YWx1ZTogIjEiLAogICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgICB9LAogICAgICBdCiAgICAgIDogW10pLAogIF07CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2UudHJhY2tpbmcudGFncyA9IHRhZ3M7CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          action: on_track
          timestamp: '2026-02-15T16:10:49.579Z'
          transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
          message_id: 73978d4d-ffd0-4e84-9a6d-0a775f5dcc46
          bap_id: sample-bap-id
          bap_uri: 'https://bap.example.com'
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: 'https://bpp.example.com'
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          tracking:
            id: '1'
            location:
              gps: '12.9740,77.6134'
              time:
                timestamp: '2026-02-15T12:51:09.613Z'
              updated_at: '2026-02-15T12:51:09.613Z'
            status: active
            tags:
              - code: order
                list:
                  - code: id
                    value: 989bb323-e5f5-4374-808f-45ebaad83472
              - code: config
                list:
                  - code: attr
                    value: tracking.location.gps
                  - code: type
                    value: live_poll
              - code: path
                list:
                  - code: lat_lng
                    value: '12.9740,77.6134'
                  - code: sequence
                    value: '1'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_status
    action_id: on_status_out_for_delivery
    owner: BPP
    responseFor: null
    unsolicited: true
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgaWYgKHNlc3Npb25EYXRhPy5vbl9zdGF0dXNfb3JkZXJfcGlja2VkX3VwX2Z1bGZpbGxtZW50c1swXSkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfb3JkZXJfcGlja2VkX3VwX2Z1bGZpbGxtZW50c1swXTsKICB9CgoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlID0gIkluLXByb2dyZXNzIjsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cyA9CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmZ1bGZpbGxtZW50cy5tYXAoKGZ1bGZpbGxtZW50KSA9PiB7CiAgICAgIGlmIChmdWxmaWxsbWVudC50eXBlID09PSAiRGVsaXZlcnkiKSB7CiAgICAgICAgZnVsZmlsbG1lbnQuc3RhdGUuZGVzY3JpcHRvci5jb2RlID0gIk91dC1mb3ItZGVsaXZlcnkiOwogICAgICAgIGZ1bGZpbGxtZW50LnN0YXJ0LnRpbWUgPSB7CiAgICAgICAgICAuLi5mdWxmaWxsbWVudC5zdGFydC50aW1lLAogICAgICAgICAgdGltZXN0YW1wOiBkZWZhdWx0UGF5bG9hZC5jb250ZXh0Py50aW1lc3RhbXAsCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gZnVsZmlsbG1lbnQ7CiAgICB9KTsKCiAgaWYgKHNlc3Npb25EYXRhPy5iaWxsaW5nKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBzZXNzaW9uRGF0YS5iaWxsaW5nWzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKICBpZiAoCiAgICBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcykgJiYKICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcy5sZW5ndGggPiAwCiAgKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbl90ZXJtcyA9CiAgICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtc1swXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5wYXltZW50KSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50LnN0YXR1cyA9IGdldFBheW1lbnRTdGF0dXMoCiAgICBzZXNzaW9uRGF0YS5wYXltZW50X3R5cGUsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlCiAgKTsKCiAgaWYgKAogICAgc2Vzc2lvbkRhdGEucGF5bWVudF90eXBlID09PSAiT04tRlVMRklMTE1FTlQiICYmCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlID09PSAiQ29tcGxldGVkIgogICkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50WyJAb25kYy9vcmcvc2V0dGxlbWVudF9kZXRhaWxzIl0gPSBbCiAgICAgIHsKICAgICAgICAuLi5kZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnRbCiAgICAgICAgIkBvbmRjL29yZy9zZXR0bGVtZW50X2RldGFpbHMiCiAgICAgICAgXVswXSwKICAgICAgICBzZXR0bGVtZW50X3N0YXR1czogIlBBSUQiLAogICAgICAgIHNldHRsZW1lbnRfcmVmZXJlbmNlOiAiWFhYWFhYWFhYIiwKICAgICAgICBzZXR0bGVtZW50X3RpbWVzdGFtcDogZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXAsCiAgICAgIH0sCiAgICBdOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhPy5pdGVtcykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zWzBdOwogIH0KCgogIGlmIChzZXNzaW9uRGF0YS5saW5rZWRfb3JkZXIpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXJbIkBvbmRjL29yZy9saW5rZWRfb3JkZXIiXSA9CiAgICAgIHNlc3Npb25EYXRhLmxpbmtlZF9vcmRlclswXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5vbl9jb25maXJtX3RhZ3MpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFncyA9IHNlc3Npb25EYXRhLm9uX2NvbmZpcm1fdGFnc1swXQogIH0KCiAgaWYgKHNlc3Npb25EYXRhLm9uX3VwZGF0ZV90YWdzLmxlbmd0aCA+IDApIHsKICAgIGNvbnNvbGUubG9nKCJzZXNzaW9uRGF0YS5vbl91cGRhdGVfdGFncyIsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25EYXRhLm9uX3VwZGF0ZV90YWdzKSk7CgogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci50YWdzID0gc2Vzc2lvbkRhdGEub25fdXBkYXRlX3RhZ3NbMF0KICB9CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          action: on_status
          timestamp: '2026-02-15T16:11:32.615Z'
          transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
          message_id: 0210df37-5962-4530-84e1-b760f7b7110d
          bap_id: sample-bap-id
          bap_uri: 'https://bap.example.com'
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: 'https://bpp.example.com'
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            id: 8355a0472eee42c8b470d4c2ae803104
            state: In-progress
            provider:
              id: DTDC
            items:
              - id: B2C SMART EXPRESS
                category_id: Standard Delivery
                fulfillment_id: '1'
                descriptor:
                  code: P2H2P
                time:
                  label: TAT
                  duration: P2D
                  timestamp: '2024-09-04'
            quote:
              price:
                currency: INR
                value: '77.00'
              breakup:
                - '@ondc/org/item_id': B2C SMART EXPRESS
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '63.14'
                - '@ondc/org/item_id': B2C SMART EXPRESS
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '13.86'
            billing:
              name: Bizom
              email: ondchelp@mobisy.com
              phone: '9886193962'
              address:
                name: Bizom
                locality: Bellandur Main Rd
                city: Bengaluru
                state: Karnataka
                country: India
                building: Sri Arunachaleshwara Building
                area_code: '560103'
              tax_number: 29AAFCM4341L1Z6
              created_at: '2024-09-02T09:58:13.462Z'
              updated_at: '2024-09-02T09:58:13.462Z'
            payment:
              type: POST-FULFILLMENT
              collected_by: BAP
              '@ondc/org/settlement_details':
                - settlement_counterparty: seller-app
                  settlement_type: upi
                  upi_address: gft@oksbi
                  settlement_bank_account_no: '123456789123456'
                  settlement_ifsc_code: ICIC00001234
              status: NOT-PAID
            '@ondc/org/linked_order':
              items:
                - category_id: Grocery
                  descriptor:
                    name: >-
                      Surya Pickle Mirchi (Red Chilli) Powder 500g |Suitable for
                      Pickling
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 0.5
                  price:
                    currency: INR
                    value: '70.0'
              provider:
                address:
                  name: Shailja Rajput
                  locality: Central Jail Road Sarjapur
                  city: Bangalore
                  state: Karnataka
                  country: IND
                  building: Silverwood Regency Apartment
                  area_code: '560103'
                descriptor:
                  name: Bizom Mart
              order:
                id: 2024-09-02-361761
                weight:
                  unit: kilogram
                  value: 1
                dimensions:
                  length:
                    unit: centimeter
                    value: 8
                  breadth:
                    unit: centimeter
                    value: 10
                  height:
                    unit: centimeter
                    value: 12
            created_at: '2024-09-02T09:58:23.392Z'
            updated_at: '2024-09-02T11:50:39.079Z'
            fulfillments:
              - id: '1'
                type: Delivery
                '@ondc/org/awb_no': 7D2321487
                tracking: true
                start:
                  person:
                    name: Shailja Rajput
                  location:
                    gps: '12.927341,77.671691'
                    address:
                      name: Shailja Rajput
                      locality: Central Jail Road Sarjapur
                      city: Bangalore
                      state: Karnataka
                      country: IND
                      building: Silverwood Regency Apartment
                      area_code: '560103'
                  contact:
                    phone: '7829222119'
                    email: shailja.rajput@mobisy.com
                  time:
                    range:
                      start: '2024-09-02T10:05:00.639Z'
                      end: '2024-09-02T17:30:00.639Z'
                    timestamp: '2024-09-02T11:40:53.614Z'
                  instructions:
                    name: Proof Of Pickup
                    images:
                      - >-
                        https://shipsy-demo.s3.amazonaws.com/1/poc/2024-09-02/pickupcompleted/poc_z71y3c_1725277255498
                end:
                  person:
                    name: Delhi Address
                  location:
                    gps: '28.516106,77.114037'
                    address:
                      name: Delhi Address
                      locality: Avenue Jacaranda
                      city: New Delhi
                      state: Delhi
                      country: IND
                      building: Maheshwari Apartment
                      area_code: '110038'
                  contact:
                    phone: '7829222119'
                    email: shailja.rajput@mobisy.com
                  time:
                    range:
                      start: '2024-09-04T10:05:00.639Z'
                      end: '2024-09-04T17:30:00.639Z'
                tags:
                  - code: tracking
                    list:
                      - code: gps_enabled
                        value: 'yes'
                      - code: url_enabled
                        value: 'yes'
                      - code: url
                        value: >-
                          https://testtrack.dtdc.com/ctbs-tracking/customerInterface.tr?submitName=showCITrackingDetails&cType=Consignment&cnNo=7D2321487
                state:
                  descriptor:
                    code: Out-for-delivery
                vehicle:
                  registration: HR1234
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
  - api: on_status
    action_id: on_status_order_delivered
    owner: BPP
    responseFor: null
    unsolicited: true
    description: please add relevant description
    mock:
      generate: >-
        LyoqCiAqIEdlbmVyYXRlcyB0aGUgbW9jayBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgZGVmYXVsdCBwYXlsb2FkIHVzaW5nIHNlc3Npb24gZGF0YQogKiBmcm9tIHByZXZpb3VzIHN0ZXBzIGFuZCB1c2VyIGlucHV0cy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0UGF5bG9hZCAtIFRoZSBiYXNlIHBheWxvYWQgb2JqZWN0IHdpdGggY29udGV4dCBhbHJlYWR5IHBvcHVsYXRlZC4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhLnVzZXJfaW5wdXRzIC0gVXNlci1wcm92aWRlZCBpbnB1dCB2YWx1ZXMgZm9yIHRoaXMgc3RlcC4KICogQHBhcmFtIHsqfSBzZXNzaW9uRGF0YS5ba2V5XSAtIEFueSBzYXZlZCBkYXRhIGZyb20gcHJldmlvdXMgc3RlcHMgKGRlZmluZWQgaW4gc2F2ZURhdGEgY29uZmlnKS4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBnZW5lcmF0ZWQgcGF5bG9hZCBvYmplY3QgdG8gYmUgc2VudCBpbiB0aGUgQVBJIHJlcXVlc3QuCiAqLwphc3luYyBmdW5jdGlvbiBnZW5lcmF0ZShkZWZhdWx0UGF5bG9hZCwgc2Vzc2lvbkRhdGEpIHsKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmlkID0gc2Vzc2lvbkRhdGEub3JkZXJfaWRbMF07CiAgaWYgKHNlc3Npb25EYXRhPy5vbl9zdGF0dXNfb3JkZXJfcGlja2VkX3VwX2Z1bGZpbGxtZW50c1swXSkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPSBzZXNzaW9uRGF0YS5vbl9zdGF0dXNfb3JkZXJfcGlja2VkX3VwX2Z1bGZpbGxtZW50c1swXTsKICB9CgoKICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlID0gIkNvbXBsZXRlZCI7CiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMgPQogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5mdWxmaWxsbWVudHMubWFwKChmdWxmaWxsbWVudCkgPT4gewogICAgICBpZiAoZnVsZmlsbG1lbnQudHlwZSA9PT0gIkRlbGl2ZXJ5IikgewogICAgICAgIGZ1bGZpbGxtZW50LnN0YXRlLmRlc2NyaXB0b3IuY29kZSA9ICJPcmRlci1kZWxpdmVyZWQiOwoKICAgICAgICBpZiAoIWZ1bGZpbGxtZW50LmVuZC50aW1lKSB7CiAgICAgICAgICBmdWxmaWxsbWVudC5lbmQudGltZSA9IHsKICAgICAgICAgICAgdGltZXN0YW1wOiBkZWZhdWx0UGF5bG9hZC5jb250ZXh0LnRpbWVzdGFtcCwKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZ1bGZpbGxtZW50LmVuZC50aW1lLnRpbWVzdGFtcCA9CiAgICAgICAgICAgIGRlZmF1bHRQYXlsb2FkLmNvbnRleHQudGltZXN0YW1wOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZnVsZmlsbG1lbnQ7CiAgICB9KTsKCiAgaWYgKHNlc3Npb25EYXRhPy5iaWxsaW5nKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmJpbGxpbmcgPSBzZXNzaW9uRGF0YS5iaWxsaW5nWzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci51cGRhdGVkX2F0ID0gZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXA7CgogIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIucXVvdGUgPSBzZXNzaW9uRGF0YS5xdW90ZVswXTsKICBpZiAoCiAgICBBcnJheS5pc0FycmF5KHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcykgJiYKICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtcy5sZW5ndGggPiAwCiAgKSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLmNhbmNlbGxhdGlvbl90ZXJtcyA9CiAgICAgIHNlc3Npb25EYXRhLmNhbmNlbGxhdGlvbl90ZXJtc1swXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5wYXltZW50KSB7CiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnQgPSBzZXNzaW9uRGF0YS5wYXltZW50WzBdOwogIH0KCiAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50LnN0YXR1cyA9IGdldFBheW1lbnRTdGF0dXMoCiAgICBzZXNzaW9uRGF0YS5wYXltZW50X3R5cGUsCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlCiAgKTsKCiAgaWYgKAogICAgc2Vzc2lvbkRhdGEucGF5bWVudF90eXBlID09PSAiT04tRlVMRklMTE1FTlQiICYmCiAgICBkZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnN0YXRlID09PSAiQ29tcGxldGVkIgogICkgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5wYXltZW50WyJAb25kYy9vcmcvc2V0dGxlbWVudF9kZXRhaWxzIl0gPSBbCiAgICAgIHsKICAgICAgICAuLi5kZWZhdWx0UGF5bG9hZC5tZXNzYWdlLm9yZGVyLnBheW1lbnRbCiAgICAgICAgIkBvbmRjL29yZy9zZXR0bGVtZW50X2RldGFpbHMiCiAgICAgICAgXVswXSwKICAgICAgICBzZXR0bGVtZW50X3N0YXR1czogIlBBSUQiLAogICAgICAgIHNldHRsZW1lbnRfcmVmZXJlbmNlOiAiWFhYWFhYWFhYIiwKICAgICAgICBzZXR0bGVtZW50X3RpbWVzdGFtcDogZGVmYXVsdFBheWxvYWQuY29udGV4dC50aW1lc3RhbXAsCiAgICAgIH0sCiAgICBdOwogIH0KCiAgaWYgKHNlc3Npb25EYXRhPy5pdGVtcykgewogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci5pdGVtcyA9IHNlc3Npb25EYXRhLml0ZW1zWzBdOwogIH0KCgogIGlmIChzZXNzaW9uRGF0YS5saW5rZWRfb3JkZXIpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXJbIkBvbmRjL29yZy9saW5rZWRfb3JkZXIiXSA9CiAgICAgIHNlc3Npb25EYXRhLmxpbmtlZF9vcmRlclswXTsKICB9CgogIGlmIChzZXNzaW9uRGF0YS5vbl9jb25maXJtX3RhZ3MpIHsKICAgIGRlZmF1bHRQYXlsb2FkLm1lc3NhZ2Uub3JkZXIudGFncyA9IHNlc3Npb25EYXRhLm9uX2NvbmZpcm1fdGFnc1swXQogIH0KCiAgaWYgKHNlc3Npb25EYXRhLm9uX3VwZGF0ZV90YWdzLmxlbmd0aCA+IDApIHsKICAgIGNvbnNvbGUubG9nKCJzZXNzaW9uRGF0YS5vbl91cGRhdGVfdGFncyIsIEpTT04uc3RyaW5naWZ5KHNlc3Npb25EYXRhLm9uX3VwZGF0ZV90YWdzKSk7CgogICAgZGVmYXVsdFBheWxvYWQubWVzc2FnZS5vcmRlci50YWdzID0gc2Vzc2lvbkRhdGEub25fdXBkYXRlX3RhZ3NbMF0KICB9CiAgcmV0dXJuIGRlZmF1bHRQYXlsb2FkOwp9
      validate: >-
        LyoqCiAqIFZhbGlkYXRlcyB0aGUgaW5jb21pbmcgcmVxdWVzdCBwYXlsb2FkIGZvciBhbiBBUEkgY2FsbCBpbiB0aGUgdHJhbnNhY3Rpb24gZmxvdy4KICogCiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRQYXlsb2FkIC0gVGhlIGluY29taW5nIHJlcXVlc3QgcGF5bG9hZCB0byB2YWxpZGF0ZS4KICogQHBhcmFtIHtPYmplY3R9IHNlc3Npb25EYXRhIC0gRGF0YSBjb2xsZWN0ZWQgZnJvbSBwcmV2aW91cyB0cmFuc2FjdGlvbiBzdGVwcy4KICogCiAqIEByZXR1cm5zIHtPYmplY3R9IHsgdmFsaWQ6IGJvb2xlYW4sIGNvZGU6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZyB9CiAqLwpmdW5jdGlvbiB2YWxpZGF0ZSh0YXJnZXRQYXlsb2FkLCBzZXNzaW9uRGF0YSkgewogIHJldHVybiB7IHZhbGlkOiB0cnVlLCBjb2RlOiAyMDAsIGRlc2NyaXB0aW9uOiAiVmFsaWQgcmVxdWVzdCIgfTsKfQ==
      requirements: >-
        LyoqCiAqIENoZWNrcyBpZiB0aGUgcmVxdWlyZW1lbnRzIGZvciBwcm9jZWVkaW5nIHdpdGggdGhlIEFQSSBjYWxsIGFyZSBtZXQuCiAqIAogKiBAcGFyYW0ge09iamVjdH0gc2Vzc2lvbkRhdGEgLSBEYXRhIGNvbGxlY3RlZCBmcm9tIHByZXZpb3VzIHRyYW5zYWN0aW9uIHN0ZXBzLgogKiAKICogQHJldHVybnMge09iamVjdH0geyB2YWxpZDogYm9vbGVhbiwgY29kZTogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0KICovCmZ1bmN0aW9uIG1lZXRzUmVxdWlyZW1lbnRzKHNlc3Npb25EYXRhKSB7CiAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGNvZGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXF1aXJlbWVudHMgbWV0IiB9Owp9
      defaultPayload:
        context:
          domain: 'nic2004:60232'
          action: on_status
          timestamp: '2026-02-15T17:26:00.759Z'
          transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
          message_id: 3a9c0368-dee1-4fa9-8762-b57f9d0ab1bd
          bap_id: sample-bap-id
          bap_uri: 'https://bap.example.com'
          ttl: PT30S
          bpp_id: sample-bpp-id
          bpp_uri: 'https://bpp.example.com'
          country: IND
          city: '*'
          core_version: 1.2.0
        message:
          order:
            '@ondc/org/linked_order':
              items:
                - category_id: F&B
                  descriptor:
                    name: Item1
                  price:
                    currency: INR
                    value: '70.00'
                  quantity:
                    count: 2
                    measure:
                      unit: kilogram
                      value: 1
                - category_id: F&B
                  descriptor:
                    name: Item2
                  price:
                    currency: INR
                    value: '160.00'
                  quantity:
                    count: 1
                    measure:
                      unit: kilogram
                      value: 1
              order:
                dimensions:
                  breadth:
                    unit: centimeter
                    value: 1
                  height:
                    unit: centimeter
                    value: 1
                  length:
                    unit: centimeter
                    value: 1
                id: O1
                weight:
                  unit: kilogram
                  value: 3
              provider:
                address:
                  area_code: '560001'
                  building: My building name 1
                  city: my city 1
                  locality: My street name 1
                  name: My store name 1
                  state: my state 1
                descriptor:
                  name: Seller1
            billing:
              address:
                area_code: '560076'
                building: My house or building name
                city: Bengaluru
                country: India
                locality: Jayanagar
                name: My house or building no
                state: Karnataka
              created_at: '2026-02-15T12:51:02.655Z'
              email: abcd.efgh@gmail.com
              name: ONDC Logistics Buyer NP
              phone: '9886098860'
              tax_number: AS34234HKJ342KH
              updated_at: '2026-02-15T12:51:02.655Z'
            fulfillments:
              - agent:
                  name: agent_name
                  phone: '9886098860'
                end:
                  contact:
                    email: xyz.qweq@gmail.com
                    phone: '9123426789'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 2
                      city: my city name 2
                      country: India
                      locality: My street name 2
                      name: 'My house or building #'
                      state: my state 2
                    gps: '12.4535,77.9283'
                  person:
                    name: person_name_2
                  time:
                    range:
                      end: '2026-02-18T00:51:03.425Z'
                      start: '2026-02-16T00:51:03.425Z'
                    timestamp: '2026-02-15T12:51:13.297Z'
                id: '1'
                start:
                  contact:
                    email: abcd.efgh@gmail.com
                    phone: '9886098860'
                  location:
                    address:
                      area_code: '560001'
                      building: My building name 1
                      city: my city 1
                      country: India
                      locality: My street name 1
                      name: My store name 1
                      state: my state 1
                    gps: '12.4535,77.9283'
                    id: S1
                  person:
                    name: person_name_1
                  time:
                    duration: PT12H
                    range:
                      end: '2026-02-16T00:51:03.425Z'
                      start: '2026-02-15T12:51:03.425Z'
                    timestamp: '2026-02-15T12:51:09.353Z'
                state:
                  descriptor:
                    code: Order-delivered
                tracking: true
                type: Delivery
                vehicle:
                  registration: 3LVJ945
            id: 989bb323-e5f5-4374-808f-45ebaad83472
            items:
              - category_id: Standard Delivery
                fulfillment_id: '1'
                id: I1
                time:
                  duration: P2D
                  label: TAT
                  timestamp: '2026-02-17'
            payment:
              '@ondc/org/settlement_basis': invoicing
              '@ondc/org/settlement_details':
                - beneficiary_name: xxxxx
                  settlement_bank_account_no: XXXXXXXXXX
                  settlement_counterparty: lsp
                  settlement_ifsc_code: XXXXXXXXX
                  settlement_type: upi
                  upi_address: gft@oksbi
              '@ondc/org/settlement_window': P15D
              collected_by: BAP
              status: NOT-PAID
              type: POST-FULFILLMENT
            provider:
              id: P1
            quote:
              breakup:
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': delivery
                  price:
                    currency: INR
                    value: '50.00'
                - '@ondc/org/item_id': I1
                  '@ondc/org/title_type': tax
                  price:
                    currency: INR
                    value: '9.00'
              price:
                currency: INR
                value: '59.00'
            state: Completed
            tags:
              - code: bap_terms
                list:
                  - code: accept_bpp_terms
                    value: 'yes'
            updated_at: '2026-02-15T12:51:13.297Z'
      saveData:
        transactionId: $.context.transaction_id
        latestMessage_id: $.context.message_id
        latestTimestamp: $.context.timestamp
        bapId: $.context.bap_id
        bapUri: $.context.bap_uri
        bppId: $.context.bpp_id
        bppUri: $.context.bpp_uri
      inputs: {}
transaction_history:
  - action_id: search_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: search
        timestamp: '2026-02-18T05:33:28.407Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: ee571b90-a7d0-47ed-b05e-333f40a8180d
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        country: IND
        city: 'std:080'
        core_version: 1.2.0
      message:
        intent:
          category:
            id: Immediate Delivery
          payment:
            type: POST-FULFILLMENT
          '@ondc/org/payload_details':
            weight:
              unit: kilogram
              value: 1
            value:
              currency: INR
              value: '388.5'
            dimensions:
              length:
                unit: meter
                value: 0.1
              breadth:
                unit: meter
                value: 0.1
              height:
                unit: meter
                value: 0.1
            category: F&B
          fulfillment:
            type: Delivery
            start:
              location:
                gps: '12.4535,77.9283'
                address:
                  area_code: '560001'
            end:
              location:
                gps: '12.4535,77.9283'
                address:
                  area_code: '560001'
          provider:
            time:
              days: '1,2,3,4,5,6,7'
              range:
                start: '0700'
                end: '2355'
              schedule:
                holidays:
                  - '2026-02-28'
                  - '2026-03-05'
              duration: PT10M
    action: search
    saved_info: {}
  - action_id: on_search_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: on_search
        timestamp: '2026-02-18T05:33:28.440Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: ee571b90-a7d0-47ed-b05e-333f40a8180d
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: 'std:080'
        core_version: 1.2.0
      message:
        catalog:
          bpp/descriptor:
            name: LSP Aggregator Inc
            tags:
              - code: bpp_terms
                list:
                  - code: static_terms
                    value: ''
                  - code: static_terms_new
                    value: >-
                      https://github.com/ONDC-Official/NP-Static-Terms/lspNP_LSP/1.0/tc.pdf
                  - code: effective_date
                    value: '2026-02-18T05:33:28.440Z'
          bpp/providers:
            - id: P1
              descriptor:
                name: LSP Courier Inc
                short_desc: LSP Courier Inc
                long_desc: LSP Courier Inc
              categories:
                - id: Immediate Delivery
                  time:
                    label: TAT
                    duration: PT60M
                    timestamp: '2026-02-18'
              fulfillments:
                - id: '1'
                  type: Delivery
                  start:
                    time:
                      duration: PT15M
                  tags:
                    - code: distance
                      list:
                        - code: motorable_distance_type
                          value: kilometer
                        - code: motorable_distance
                          value: '1.8'
                - id: '2'
                  type: RTO
              locations:
                - id: L1
                  gps: '12.967555,77.749666'
                  address:
                    street: Jayanagar 4th Block
                    city: Bengaluru
                    area_code: '560076'
                    state: KA
              items:
                - id: I1
                  parent_item_id: ''
                  category_id: Immediate Delivery
                  fulfillment_id: '1'
                  descriptor:
                    code: P2P
                    name: Fast delivery
                    short_desc: Fast delivery
                    long_desc: Fast delivery
                  price:
                    currency: INR
                    value: '59.00'
                  time:
                    label: TAT
                    duration: PT60M
                    timestamp: '2026-02-18'
                - id: I2
                  parent_item_id: I1
                  category_id: Immediate Delivery
                  fulfillment_id: '2'
                  descriptor:
                    code: P2P
                    name: RTO quote
                    short_desc: RTO quote
                    long_desc: RTO quote
                  price:
                    currency: INR
                    value: '23.60'
                  time:
                    label: TAT
                    duration: PT60M
                    timestamp: '2026-02-18'
    action: on_search
    saved_info: {}
  - action_id: init_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: init
        timestamp: '2026-02-18T05:33:28.486Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: 06feb0ec-5f00-4835-9e3e-df4a74c58621
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: 'std:080'
        core_version: 1.2.0
      message:
        order:
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: '1'
              category_id: Immediate Delivery
              descriptor:
                code: P2P
          fulfillments:
            - id: '1'
              type: Delivery
              start:
                location:
                  id: S1
                  gps: '12.4535,77.9283'
                  address:
                    name: My store name 1
                    building: My building name 1
                    locality: My street name 1
                    city: my city 1
                    state: my state 1
                    country: India
                    area_code: '560001'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
              end:
                location:
                  gps: '12.4535,77.9283'
                  address:
                    name: 'My house or building #'
                    building: My building name 2
                    locality: My street name 2
                    city: my city name 2
                    state: my state 2
                    country: India
                    area_code: '560001'
                contact:
                  phone: '9123426789'
                  email: xyz.qweq@gmail.com
              tags: []
          billing:
            name: ONDC Logistics Buyer NP
            address:
              name: My house or building no
              building: My house or building name
              locality: Jayanagar
              city: Bengaluru
              state: Karnataka
              country: India
              area_code: '560076'
            tax_number: XXXXXXXXXXXXXXX
            phone: '9886098860'
            email: abcd.efgh@gmail.com
            created_at: '2026-02-18T05:33:28.486Z'
            updated_at: '2026-02-18T05:33:28.486Z'
          payment:
            type: POST-FULFILLMENT
            collected_by: BAP
            '@ondc/org/settlement_basis': invoicing
            '@ondc/org/settlement_window': P15D
    action: init
    saved_info: {}
  - action_id: on_init_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: on_init
        timestamp: '2026-02-18T05:33:28.535Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: 06feb0ec-5f00-4835-9e3e-df4a74c58621
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: 'std:080'
        core_version: 1.2.0
      message:
        order:
          provider:
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: '1'
              descriptor:
                code: P2P
          fulfillments:
            - id: '1'
              type: Delivery
              start:
                location:
                  id: S1
                  gps: '12.4535,77.9283'
                  address:
                    name: My store name 1
                    building: My building name 1
                    locality: My street name 1
                    city: my city 1
                    state: my state 1
                    country: India
                    area_code: '560001'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
              end:
                location:
                  gps: '12.4535,77.9283'
                  address:
                    name: 'My house or building #'
                    building: My building name 2
                    locality: My street name 2
                    city: my city name 2
                    state: my state 2
                    country: India
                    area_code: '560001'
                contact:
                  phone: '9123426789'
                  email: xyz.qweq@gmail.com
              tags:
                - code: rider_check
                  list:
                    - code: inline_check_for_rider
                      value: 'yes'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '50.00'
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '9.00'
            ttl: PT15M
            price:
              currency: INR
              value: '59.00'
          payment:
            type: POST-FULFILLMENT
            collected_by: BAP
            '@ondc/org/settlement_basis': invoicing
            '@ondc/org/settlement_window': P15D
          cancellation_terms:
            - fulfillment_state:
                descriptor:
                  code: Pending
                  short_desc: "008" 
              cancellation_fee:
                percentage: '0.00'
                amount:
                  currency: INR
                  value: '0.00'
            - fulfillment_state:
                descriptor:
                  code: Agent-assigned
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Order-picked-up
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Out-for-delivery
                  short_desc: '011,012,013,014,015'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
          tags:
            - code: bpp_terms
              list:
                - code: max_liability
                  value: '2'
                - code: max_liability_cap
                  value: '10000'
                - code: mandatory_arbitration
                  value: 'false'
                - code: court_jurisdiction
                  value: Bengaluru
                - code: delay_interest
                  value: '1000'
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/protocol-network-extension/discussions/79
    action: on_init
    saved_info: {}
  - action_id: confirm_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: confirm
        timestamp: '2026-02-18T05:33:29.450Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: 689797fe-b6bf-41d2-9913-5b02af95cbb1
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: 013c0704-dc9d-4993-b282-2855cdfa3b26
          state: Created
          provider:
            id: P1
            locations:
              - id: L1
          items:
            - id: I1
              fulfillment_id: '1'
              category_id: Immediate Delivery
              descriptor:
                code: P2P
              time:
                label: TAT
                duration: PT60M
                timestamp: '2026-02-18'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '50.00'
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '9.00'
            price:
              currency: INR
              value: '59.00'
          fulfillments:
            - id: '1'
              type: Delivery
              '@ondc/org/awb_no': '1227262193237777'
              start:
                time:
                  duration: PT15M
                person:
                  name: person_name_1
                location:
                  gps: '12.4535445,77.9283792'
                  address:
                    name: Store name
                    building: House or building name
                    locality: Locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560041'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '2'
                  short_desc: value of PCC
                  long_desc: additional instructions for pickup
                  additional_desc:
                    content_type: text/html
                    url: 'https://reverse_qc_sop_form.htm'
              end:
                person:
                  name: person_name_2
                location:
                  gps: '12.453544,77.928379'
                  address:
                    name: 'My house #'
                    building: My house or building name
                    locality: locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560076'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '3'
                  short_desc: value of DCC
                  long_desc: additional instructions for delivery
              tags:
                - code: state
                  list:
                    - code: ready_to_ship
                      value: 'no'
                - code: rto_action
                  list:
                    - code: return_to_origin
                      value: 'yes'
          billing:
            name: ONDC Logistics Buyer NP
            address:
              name: My house or building no
              building: My house or building name
              locality: Jayanagar
              city: Bengaluru
              state: Karnataka
              country: India
              area_code: '560076'
            tax_number: XXXXXXXXXXXXXXX
            phone: '9886098860'
            email: abcd.efgh@gmail.com
            created_at: '2026-02-18T05:33:28.486Z'
            updated_at: '2026-02-18T05:33:28.486Z'
          payment:
            type: POST-FULFILLMENT
            collected_by: BAP
            '@ondc/org/settlement_basis': invoicing
            '@ondc/org/settlement_window': P15D
          '@ondc/org/linked_order':
            items:
              - category_id: F&B
                descriptor:
                  name: Item1
                quantity:
                  count: 2
                  measure:
                    unit: kilogram
                    value: 1
                price:
                  currency: INR
                  value: '70.00'
            provider:
              descriptor:
                name: Seller1
              address:
                name: My store name 1
                building: My building name 1
                locality: My street name 1
                city: my city 1
                state: my state 1
                area_code: '560001'
            order:
              id: O1
              weight:
                unit: kilogram
                value: 3
              dimensions:
                length:
                  unit: centimeter
                  value: 1
                breadth:
                  unit: centimeter
                  value: 1
                height:
                  unit: centimeter
                  value: 1
          tags:
            - code: bpp_terms
              list:
                - code: max_liability
                  value: '2'
                - code: max_liability_cap
                  value: '10000'
                - code: mandatory_arbitration
                  value: 'false'
                - code: court_jurisdiction
                  value: Bengaluru
                - code: delay_interest
                  value: '1000'
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/protocol-network-extension/discussions/79
            - code: bap_terms
              list:
                - code: accept_bpp_terms
                  value: 'Y'
          created_at: '2026-02-18T05:33:29.450Z'
          updated_at: '2026-02-18T05:33:29.450Z'
          cancellation_terms:
            - fulfillment_state:
                descriptor:
                  code: Pending
                  short_desc: 008
              cancellation_fee:
                percentage: '0.00'
                amount:
                  currency: INR
                  value: '0.00'
            - fulfillment_state:
                descriptor:
                  code: Agent-assigned
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Order-picked-up
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Out-for-delivery
                  short_desc: '011,012,013,014,015'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
    action: confirm
    saved_info: {}
  - action_id: on_confirm1
    payload:
      context:
        domain: 'nic2004:60232'
        action: on_confirm
        timestamp: '2026-02-18T05:33:29.483Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: 689797fe-b6bf-41d2-9913-5b02af95cbb1
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          id: 013c0704-dc9d-4993-b282-2855cdfa3b26
          state: Accepted
          provider:
            id: Delhivery
          items:
            - id: I1
              fulfillment_id: '1'
              category_id: Immediate Delivery
              descriptor:
                code: P2P
              time:
                label: TAT
                duration: PT60M
                timestamp: '2026-02-18'
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '50.00'
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '9.00'
            price:
              currency: INR
              value: '59.00'
          payment:
            type: POST-FULFILLMENT
            collected_by: BAP
            '@ondc/org/settlement_basis': invoicing
            '@ondc/org/settlement_window': P15D
          fulfillments:
            - id: '1'
              type: Delivery
              '@ondc/org/awb_no': '1227262193237777'
              start:
                time:
                  duration: PT15M
                person:
                  name: person_name_1
                location:
                  gps: '12.4535445,77.9283792'
                  address:
                    name: Store name
                    building: House or building name
                    locality: Locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560041'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '2'
                  short_desc: value of PCC
                  long_desc: additional instructions for pickup
                  additional_desc:
                    content_type: text/html
                    url: 'https://reverse_qc_sop_form.htm'
              end:
                person:
                  name: person_name_2
                location:
                  gps: '12.453544,77.928379'
                  address:
                    name: 'My house #'
                    building: My house or building name
                    locality: locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560076'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '3'
                  short_desc: value of DCC
                  long_desc: additional instructions for delivery
              tags:
                - code: state
                  list:
                    - code: ready_to_ship
                      value: 'no'
                - code: rto_action
                  list:
                    - code: return_to_origin
                      value: 'yes'
                - code: weather_check
                  list:
                    - code: raining
                      value: 'no'
              state:
                descriptor:
                  code: Pending
              tracking: true
          billing:
            name: ONDC Logistics Buyer NP
            address:
              name: My house or building no
              building: My house or building name
              locality: Jayanagar
              city: Bengaluru
              state: Karnataka
              country: India
              area_code: '560076'
            tax_number: XXXXXXXXXXXXXXX
            phone: '9886098860'
            email: abcd.efgh@gmail.com
            created_at: '2026-02-18T05:33:28.486Z'
            updated_at: '2026-02-18T05:33:28.486Z'
          '@ondc/org/linked_order':
            items:
              - category_id: F&B
                descriptor:
                  name: Item1
                quantity:
                  count: 2
                  measure:
                    unit: kilogram
                    value: 1
                price:
                  currency: INR
                  value: '70.00'
            provider:
              descriptor:
                name: Seller1
              address:
                name: My store name 1
                building: My building name 1
                locality: My street name 1
                city: my city 1
                state: my state 1
                area_code: '560001'
            order:
              id: O1
              weight:
                unit: kilogram
                value: 3
              dimensions:
                length:
                  unit: centimeter
                  value: 1
                breadth:
                  unit: centimeter
                  value: 1
                height:
                  unit: centimeter
                  value: 1
          created_at: '2026-02-18T05:33:29.450Z'
          updated_at: '2026-02-18T05:33:29.483Z'
          cancellation_terms:
            - fulfillment_state:
                descriptor:
                  code: Pending
                  short_desc: 008
              cancellation_fee:
                percentage: '0.00'
                amount:
                  currency: INR
                  value: '0.00'
            - fulfillment_state:
                descriptor:
                  code: Agent-assigned
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Order-picked-up
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Out-for-delivery
                  short_desc: '011,012,013,014,015'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
          tags:
            - code: bpp_terms
              list:
                - code: max_liability
                  value: '2'
                - code: max_liability_cap
                  value: '10000'
                - code: mandatory_arbitration
                  value: 'false'
                - code: court_jurisdiction
                  value: Bengaluru
                - code: delay_interest
                  value: '1000'
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/protocol-network-extension/discussions/79
            - code: bap_terms
              list:
                - code: accept_bpp_terms
                  value: 'Y'
    action: on_confirm
    saved_info: {}
  - action_id: update_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: update
        timestamp: '2026-02-18T05:33:29.521Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: 3580e00e-1c01-4073-a283-e014a986f7f2
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          '@ondc/org/linked_order':
            items:
              - category_id: F&B
                descriptor:
                  name: Item1
                quantity:
                  count: 2
                  measure:
                    unit: kilogram
                    value: 1
                price:
                  currency: INR
                  value: '70.00'
            provider:
              descriptor:
                name: Seller1
              address:
                name: My store name 1
                building: My building name 1
                locality: My street name 1
                city: my city 1
                state: my state 1
                area_code: '560001'
            order:
              id: O1
              weight:
                unit: kilogram
                value: 3
              dimensions:
                length:
                  unit: centimeter
                  value: 1
                breadth:
                  unit: centimeter
                  value: 1
                height:
                  unit: centimeter
                  value: 1
          fulfillments:
            - id: '1'
              type: Delivery
              '@ondc/org/awb_no': '1227262193237777'
              start:
                instructions:
                  code: '2'
                  short_desc: '123123'
                  long_desc: additional instructions for pickup
                  additional_desc:
                    content_type: text/html
                    url: 'http://description.com'
              end:
                person:
                  name: person_name_2
                location:
                  gps: '12.453544,77.928379'
                  address:
                    name: 'My house #'
                    building: My house or building name
                    locality: locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560076'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '3'
                  short_desc: value of DCC
                  long_desc: additional instructions for delivery
              tags:
                - code: state
                  list:
                    - code: ready_to_ship
                      value: 'yes'
          id: 013c0704-dc9d-4993-b282-2855cdfa3b26
          items:
            - id: I1
              category_id: Immediate Delivery
          updated_at: '2026-02-18T05:33:29.521Z'
        update_target: fulfillment
    action: update
    saved_info: {}
  - action_id: on_update_1
    payload:
      context:
        domain: 'nic2004:60232'
        action: on_update
        timestamp: '2026-02-18T05:33:29.584Z'
        transaction_id: 84770f59-155f-4a91-85f0-2a97ecb314b5
        message_id: 3580e00e-1c01-4073-a283-e014a986f7f2
        bap_id: sample-bap-id
        bap_uri: 'https://bap.example.com'
        ttl: PT30S
        bpp_id: sample-bpp-id
        bpp_uri: 'https://bpp.example.com'
        country: IND
        city: '*'
        core_version: 1.2.0
      message:
        order:
          '@ondc/org/linked_order':
            items:
              - category_id: F&B
                descriptor:
                  name: Item1
                quantity:
                  count: 2
                  measure:
                    unit: kilogram
                    value: 1
                price:
                  currency: INR
                  value: '70.00'
            provider:
              descriptor:
                name: Seller1
              address:
                name: My store name 1
                building: My building name 1
                locality: My street name 1
                city: my city 1
                state: my state 1
                area_code: '560001'
            order:
              id: O1
              weight:
                unit: kilogram
                value: 3
              dimensions:
                length:
                  unit: centimeter
                  value: 1
                breadth:
                  unit: centimeter
                  value: 1
                height:
                  unit: centimeter
                  value: 1
          billing:
            name: ONDC Logistics Buyer NP
            address:
              name: My house or building no
              building: My house or building name
              locality: Jayanagar
              city: Bengaluru
              state: Karnataka
              country: India
              area_code: '560076'
            tax_number: XXXXXXXXXXXXXXX
            phone: '9886098860'
            email: abcd.efgh@gmail.com
            created_at: '2026-02-18T05:33:28.486Z'
            updated_at: '2026-02-18T05:33:28.486Z'
          fulfillments:
            - id: '1'
              type: Delivery
              '@ondc/org/awb_no': '1227262193237777'
              start:
                time:
                  duration: PT15M
                  range:
                    start: '2026-02-18T05:33:29.584Z'
                    end: '2026-02-18T05:48:29.584Z'
                person:
                  name: person_name_1
                location:
                  gps: '12.4535445,77.9283792'
                  address:
                    name: Store name
                    building: House or building name
                    locality: Locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560041'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '2'
                  short_desc: value of PCC
                  long_desc: additional instructions for pickup
                  additional_desc:
                    content_type: text/html
                    url: 'https://reverse_qc_sop_form.htm'
              end:
                person:
                  name: person_name_2
                location:
                  gps: '12.453544,77.928379'
                  address:
                    name: 'My house #'
                    building: My house or building name
                    locality: locality
                    city: Bengaluru
                    state: Karnataka
                    country: India
                    area_code: '560076'
                contact:
                  phone: '9886098860'
                  email: abcd.efgh@gmail.com
                instructions:
                  code: '3'
                  short_desc: value of DCC
                  long_desc: additional instructions for delivery
                time:
                  range:
                    start: '2026-02-18T05:48:29.584Z'
                    end: '2026-02-19T05:33:29.584Z'
              tags: []
              state:
                descriptor:
                  code: Pending
              tracking: true
          id: 013c0704-dc9d-4993-b282-2855cdfa3b26
          items:
            - id: I1
              fulfillment_id: '1'
              category_id: Immediate Delivery
              descriptor:
                code: P2P
              time:
                label: TAT
                duration: PT60M
                timestamp: '2026-02-18'
          payment:
            type: POST-FULFILLMENT
            collected_by: BAP
            '@ondc/org/settlement_basis': invoicing
            '@ondc/org/settlement_window': P15D
          provider:
            id: P1
          quote:
            breakup:
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': delivery
                price:
                  currency: INR
                  value: '50.00'
              - '@ondc/org/item_id': I1
                '@ondc/org/title_type': tax
                price:
                  currency: INR
                  value: '9.00'
            price:
              currency: INR
              value: '59.00'
          state: In-progress
          updated_at: '2026-02-18T05:33:29.584Z'
          cancellation_terms:
            - fulfillment_state:
                descriptor:
                  code: Pending
                  short_desc: 008
              cancellation_fee:
                percentage: '0.00'
                amount:
                  currency: INR
                  value: '0.00'
            - fulfillment_state:
                descriptor:
                  code: Agent-assigned
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Order-picked-up
                  short_desc: '001,003'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
            - fulfillment_state:
                descriptor:
                  code: Out-for-delivery
                  short_desc: '011,012,013,014,015'
              cancellation_fee:
                percentage: '100.00'
                amount:
                  currency: INR
                  value: '50.00'
          tags:
            - code: bpp_terms
              list:
                - code: max_liability
                  value: '2'
                - code: max_liability_cap
                  value: '10000'
                - code: mandatory_arbitration
                  value: 'false'
                - code: court_jurisdiction
                  value: Bengaluru
                - code: delay_interest
                  value: '1000'
                - code: static_terms
                  value: >-
                    https://github.com/ONDC-Official/protocol-network-extension/discussions/79
            - code: bap_terms
              list:
                - code: accept_bpp_terms
                  value: 'Y'
    action: on_update
    saved_info: {}
validationLib: ''
helperLib: >-
  LyoKICBDdXN0b20gaGVscGVyIGZ1bmN0aW9ucyBhdmFpbGFibGUgaW4gYWxsIG1vY2sgZ2VuZXJhdGlvbiBmdW5jdGlvbnMuCiAgdGhlc2UgYXJlIGFwcGVuZGVkIGJlbG93IHRoZSBnZW5lcmF0ZSBmdW5jdGlvbiBmb3IgZWFjaCBzdGVwLgoqLwoKLy8gR2VuZXJhdGVzIGEgVVVJRCB2NApmdW5jdGlvbiB1dWlkdjQoKSB7CiAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHsKICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwOwogICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7CiAgICByZXR1cm4gdi50b1N0cmluZygxNik7CiAgfSk7Cn0KCi8vIEdlbmVyYXRlIGEgNiBkaWdpdCBzdHJpbmcgSUQKZnVuY3Rpb24gZ2VuZXJhdGU2RGlnaXRJZCgpIHsKICByZXR1cm4gTWF0aC5mbG9vcigxMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwKS50b1N0cmluZygpOwp9CgovLyBSZXR1cm5zIHRoZSBjdXJyZW50IElTTyB0aW1lc3RhbXAKZnVuY3Rpb24gY3VycmVudFRpbWVzdGFtcCgpIHsKICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwp9CgovLyBDb252ZXJ0cyBJU08gODYwMSBkdXJhdGlvbiBzdHJpbmcgdG8gdG90YWwgc2Vjb25kcwpjb25zdCBpc29EdXJUb1NlYyA9IChkdXJhdGlvbikgPT4gewogIGNvbnN0IGR1clJFID0gL1AoKGQrKVkpPygoZCspTSk/KChkKylXKT8oKGQrKUQpP1Q/KChkKylIKT8oKGQrKU0pPygoZCspUyk/LzsKICBjb25zdCBzID0gZHVyUkUuZXhlYyhkdXJhdGlvbik7CiAgaWYgKCFzKSByZXR1cm4gMDsKCiAgcmV0dXJuIChOdW1iZXIocz8uWzJdKSB8fCAwKSAqIDMxNTM2MDAwICsKICAgIChOdW1iZXIocz8uWzRdKSB8fCAwKSAqIDI2MjgyODggKwogICAgKE51bWJlcihzPy5bNl0pIHx8IDApICogNjA0ODAwICsKICAgIChOdW1iZXIocz8uWzhdKSB8fCAwKSAqIDg2NDAwICsKICAgIChOdW1iZXIocz8uWzEwXSkgfHwgMCkgKiAzNjAwICsKICAgIChOdW1iZXIocz8uWzEyXSkgfHwgMCkgKiA2MCArCiAgICAoTnVtYmVyKHM/LlsxNF0pIHx8IDApOwp9OwoKCmZ1bmN0aW9uIGRlbGF5KG1zKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7Cn0KCmZ1bmN0aW9uIGdldFRpbWVzdGFtcEZyb21EdXJhdGlvbigKICBkYXRlLAogIGR1cmF0aW9uCikgewogIGNvbnNvbGUubG9nKCJkdXJhdGlvTiIsIGR1cmF0aW9uKTsKICBjb25zdCBkdXJhdGlvblJlZ2V4ID0gL1AoPzooXGQrKUQpPyg/OlQoPzooXGQrKUgpPyg/OihcZCspTSk/KD86KFxkKylTKT8pPy87CiAgY29uc3QgbWF0Y2ggPSBkdXJhdGlvbi5tYXRjaChkdXJhdGlvblJlZ2V4KTsKCiAgaWYgKCFtYXRjaCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIElTTyA4NjAxIGR1cmF0aW9uIGZvcm1hdCIpOwogIH0KCiAgY29uc3QgZGF5cyA9IG1hdGNoWzFdID8gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSB8fCAwIDogMDsKICBjb25zdCBob3VycyA9IG1hdGNoWzJdID8gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKSB8fCAwIDogMDsKICBjb25zdCBtaW51dGVzID0gbWF0Y2hbM10gPyBwYXJzZUludChtYXRjaFszXSwgMTApIHx8IDAgOiAwOwogIGNvbnN0IHNlY29uZHMgPSBtYXRjaFs0XSA/IHBhcnNlSW50KG1hdGNoWzRdLCAxMCkgfHwgMCA6IDA7CgogIGNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZShkYXRlKTsKICBmdXR1cmVEYXRlLnNldERhdGUoZnV0dXJlRGF0ZS5nZXREYXRlKCkgKyBkYXlzKTsKICBmdXR1cmVEYXRlLnNldEhvdXJzKGZ1dHVyZURhdGUuZ2V0SG91cnMoKSArIGhvdXJzKTsKICBmdXR1cmVEYXRlLnNldE1pbnV0ZXMoZnV0dXJlRGF0ZS5nZXRNaW51dGVzKCkgKyBtaW51dGVzKTsKICBmdXR1cmVEYXRlLnNldFNlY29uZHMoZnV0dXJlRGF0ZS5nZXRTZWNvbmRzKCkgKyBzZWNvbmRzKTsKCiAgcmV0dXJuIGZ1dHVyZURhdGUudG9JU09TdHJpbmcoKTsKfQoKZnVuY3Rpb24gcmVtb3ZlVGFnc0J5Q29kZXModGFncywgY29kZXNUb1JlbW92ZSkgewogIHJldHVybiB0YWdzLmZpbHRlcigodGFnKSA9PiAhY29kZXNUb1JlbW92ZS5pbmNsdWRlcyh0YWcuY29kZSkpOwp9CgpmdW5jdGlvbiBnZXRGdXR1cmVEYXRlKGRheXNBaGVhZCkgewogIGNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZSgpOwogIGZ1dHVyZURhdGUuc2V0RGF0ZShmdXR1cmVEYXRlLmdldERhdGUoKSArIGRheXNBaGVhZCk7CgogIHJldHVybiBmdXR1cmVEYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoIlQiKVswXTsKfQoKZnVuY3Rpb24gaXNFbXB0eShvYmopIHsKICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDA7Cn0KCmNvbnN0IGdldEZ1dHVyZURhdGVJbk1pbnV0ZXMgPSAobWludXRlcykgPT4gewogIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7CiAgY29uc3QgZnV0dXJlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApOwogIHJldHVybiBmdXR1cmUudG9JU09TdHJpbmcoKTsKfTsKLy8gZnVuY3Rpb24gZ2V0T3JkZXJQcmVwVGltZShjYXRlZ29yeSkgewovLyAgIGNvbnN0IFRhdE1hcHBpbmcgPSB7Ci8vICAgICAiSW1tZWRpYXRlIERlbGl2ZXJ5IjogewovLyAgICAgICBjb2RlOiAiUFQ2ME0iLAovLyAgICAgICBkYXk6IDAsCi8vICAgICAgIHBpY2t1cFRpbWU6ICJQVDE1TSIsCi8vICAgICAgIG9yZGVyUHJlcFRpbWU6ICJQVDEwTSIsCi8vICAgICB9LAovLyAgICAgIlNhbWUgRGF5IERlbGl2ZXJ5IjogewovLyAgICAgICBjb2RlOiAiUFQ0SCIsCi8vICAgICAgIGRheTogMCwKLy8gICAgICAgcGlja3VwVGltZTogIlBUMUgiLAovLyAgICAgICBvcmRlclByZXBUaW1lOiAiUFQxSCIsCi8vICAgICB9LAovLyAgICAgIk5leHQgRGF5IERlbGl2ZXJ5IjogewovLyAgICAgICBjb2RlOiAiUDFEIiwKLy8gICAgICAgZGF5OiAxLAovLyAgICAgICBwaWNrdXBUaW1lOiAiUFQ0SCIsCi8vICAgICAgIG9yZGVyUHJlcFRpbWU6ICJQVDRIIiwKLy8gICAgIH0sCi8vICAgICAiU3RhbmRhcmQgRGVsaXZlcnkiOiB7Ci8vICAgICAgIGNvZGU6ICJQMkQiLAovLyAgICAgICBkYXk6IDIsCi8vICAgICAgIHBpY2t1cFRpbWU6ICJQVDEySCIsCi8vICAgICAgIG9yZGVyUHJlcFRpbWU6ICJQVDEySCIsCi8vICAgICB9LAovLyAgICAgIkV4cHJlc3MgRGVsaXZlcnkiOiB7Ci8vICAgICAgIGNvZGU6ICJQM0QiLAovLyAgICAgICBkYXk6IDIsCi8vICAgICAgIHBpY2t1cFRpbWU6ICJQMUQiLAovLyAgICAgICBvcmRlclByZXBUaW1lOiAiUDFEIiwKLy8gICAgIH0sCi8vICAgICAiSW5zdGFudCBEZWxpdmVyeSI6IHsKLy8gICAgICAgY29kZTogIlBUMTBNIiwKLy8gICAgICAgZGF5OiAwLAovLyAgICAgICBwaWNrdXBUaW1lOiAiUFQyTSIsCi8vICAgICAgIG9yZGVyUHJlcFRpbWU6ICJQVDJNIiwKLy8gICAgIH0sCi8vICAgfTsKLy8gICByZXR1cm4gVGF0TWFwcGluZ1tjYXRlZ29yeV0/Lm9yZGVyUHJlcFRpbWUgfHwgbnVsbDsKLy8gfTsKCmNvbnN0IGNhbGN1bGF0ZVF1b3RlUHJpY2UgPSAoYnJlYWt1cCkgPT4gewogIGxldCB0b3RhbFByaWNlID0gMDsKICBicmVha3VwLmZvckVhY2goKGl0ZW0pID0+IHsKICAgIHRvdGFsUHJpY2UgKz0gcGFyc2VGbG9hdChpdGVtLnByaWNlLnZhbHVlKSB8fCAwOwogIH0pOwoKICByZXR1cm4gdG90YWxQcmljZS50b0ZpeGVkKDIpOyAvLyByZXR1cm5zIGEgc3RyaW5nIHdpdGggMiBkZWNpbWFsIHBsYWNlcwp9OwoKY29uc3QgZ2VuZXJhdGVRdW90ZVRyYWlsID0gKAogIGJyZWFrdXAsCiAgaXRlbXMsCiAgb3B0aW9ucywKICBwYXJlbnRJdGVtSWQKKSA9PiB7CiAgY29uc3QgewogICAgZnVsZmlsbG1lbnRTdGF0ZSA9ICJQUkUiLAogICAgaXNSVE8gPSBmYWxzZSwKICAgIHBhcnRDYW5jZWwgPSBmYWxzZSwKICB9ID0gb3B0aW9uczsKICBjb25zdCBxdW90ZVRyYWlsVGFncyA9IFtdOwoKICBmdW5jdGlvbiBleHRyYWN0VHlwZSh0YWdzKSB7CiAgICBjb25zdCB0eXBlVGFnID0gdGFncy5maW5kKCh0YWcpID0+IHRhZy5jb2RlID09PSAidHlwZSIpOwogICAgaWYgKCF0eXBlVGFnIHx8ICF0eXBlVGFnLmxpc3QpIHJldHVybiBudWxsOwoKICAgIGNvbnN0IHR5cGVJdGVtID0gdHlwZVRhZy5saXN0LmZpbmQoKGl0ZW0pID0+IGl0ZW0uY29kZSA9PT0gInR5cGUiKTsKICAgIHJldHVybiB0eXBlSXRlbSA/IHR5cGVJdGVtLnZhbHVlIDogbnVsbDsKICB9CgogIGJyZWFrdXAuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgaWYgKAogICAgICBpdGVtWyJAb25kYy9vcmcvdGl0bGVfdHlwZSJdID09PSAiZGVsaXZlcnkiIHx8CiAgICAgIGl0ZW1bIkBvbmRjL29yZy90aXRsZV90eXBlIl0gPT09ICJwYWNraW5nIgogICAgKSB7CiAgICAgIGlmIChmdWxmaWxsbWVudFN0YXRlID09PSAiUFJFIiAmJiAhcGFydENhbmNlbCkgewogICAgICAgIHF1b3RlVHJhaWxUYWdzLnB1c2goewogICAgICAgICAgY29kZTogInF1b3RlX3RyYWlsIiwKICAgICAgICAgIGxpc3Q6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvZGU6ICJ0eXBlIiwKICAgICAgICAgICAgICB2YWx1ZTogaXRlbVsiQG9uZGMvb3JnL3RpdGxlX3R5cGUiXSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvZGU6ICJpZCIsCiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW1bIkBvbmRjL29yZy9pdGVtX2lkIl0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb2RlOiAiY3VycmVuY3kiLAogICAgICAgICAgICAgIHZhbHVlOiAiSU5SIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvZGU6ICJ2YWx1ZSIsCiAgICAgICAgICAgICAgdmFsdWU6IGAtJHtpdGVtLnByaWNlLnZhbHVlfWAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0pOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGl0ZW1bIkBvbmRjL29yZy90aXRsZV90eXBlIl0gPT09ICJvZmZlciIpIHsKICAgICAgcXVvdGVUcmFpbFRhZ3MucHVzaCh7CiAgICAgICAgY29kZTogInF1b3RlX3RyYWlsIiwKICAgICAgICBsaXN0OiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvZGU6ICJ0eXBlIiwKICAgICAgICAgICAgdmFsdWU6IGl0ZW1bIkBvbmRjL29yZy90aXRsZV90eXBlIl0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAiaWQiLAogICAgICAgICAgICB2YWx1ZTogaXRlbVsiQG9uZGMvb3JnL2l0ZW1faWQiXSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvZGU6ICJjdXJyZW5jeSIsCiAgICAgICAgICAgIHZhbHVlOiAiSU5SIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGNvZGU6ICJ2YWx1ZSIsCiAgICAgICAgICAgIHZhbHVlOiBgJHtNYXRoLmFicyhwYXJzZUludChpdGVtLnByaWNlLnZhbHVlKSl9YCwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKAogICAgICBwYXJzZUludChpdGVtLnByaWNlLnZhbHVlKSAhPT0gMCAmJgogICAgICAoIXBhcmVudEl0ZW1JZCB8fCBpdGVtPy5pdGVtPy5wYXJlbnRfaXRlbV9pZCA9PT0gcGFyZW50SXRlbUlkKQogICAgKSB7CiAgICAgIGNvbnNvbGUubG9nKCJpdGVtczoiLCBpdGVtcyk7CiAgICAgIGNvbnNvbGUubG9nKCJpdGVte2FzZGFzIiwgaXRlbVsiQG9uZGMvb3JnL2l0ZW1faWQiXSk7CgogICAgICBjb25zdCB0YWdzID0gaXRlbXMuZmluZCgKICAgICAgICAoYWxsSXRlbSkgPT4gYWxsSXRlbS5pZCA9PT0gaXRlbVsiQG9uZGMvb3JnL2l0ZW1faWQiXQogICAgICApLnRhZ3M7CiAgICAgIGNvbnN0IHN1YlR5cGUgPSBleHRyYWN0VHlwZSh0YWdzKTsKCiAgICAgIHF1b3RlVHJhaWxUYWdzLnB1c2goewogICAgICAgIGNvZGU6ICJxdW90ZV90cmFpbCIsCiAgICAgICAgbGlzdDogWwogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAidHlwZSIsCiAgICAgICAgICAgIHZhbHVlOiBpdGVtWyJAb25kYy9vcmcvdGl0bGVfdHlwZSJdLAogICAgICAgICAgfSwKICAgICAgICAgIC4uLihzdWJUeXBlCiAgICAgICAgICAgID8gWwogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvZGU6ICJzdWJ0eXBlIiwKICAgICAgICAgICAgICAgIHZhbHVlOiBzdWJUeXBlLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0KICAgICAgICAgICAgOiBbXSksCgogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAicGFyZW50X2l0ZW1faWQiLAogICAgICAgICAgICB2YWx1ZTogaXRlbS5pdGVtLnBhcmVudF9pdGVtX2lkLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgY29kZTogImlkIiwKICAgICAgICAgICAgdmFsdWU6IGl0ZW1bIkBvbmRjL29yZy9pdGVtX2lkIl0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAiY3VycmVuY3kiLAogICAgICAgICAgICB2YWx1ZTogIklOUiIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBjb2RlOiAidmFsdWUiLAogICAgICAgICAgICB2YWx1ZTogYC0ke2l0ZW0ucHJpY2UudmFsdWV9YCwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSk7CiAgICB9CiAgfSk7CgogIC8vIGlmIChpc1JUTykgewogIC8vICAgcXVvdGVUcmFpbFRhZ3MucHVzaCh7CiAgLy8gICAgIGNvZGU6ICJxdW90ZV90cmFpbCIsCiAgLy8gICAgIGxpc3Q6IFsKICAvLyAgICAgICB7CiAgLy8gICAgICAgICBjb2RlOiAidHlwZSIsCiAgLy8gICAgICAgICB2YWx1ZTogImRlbGl2ZXJ5IiwKICAvLyAgICAgICB9LAogIC8vICAgICAgIHsKICAvLyAgICAgICAgIGNvZGU6ICJpZCIsCiAgLy8gICAgICAgICB2YWx1ZTogIkYxLVJUTyIsCiAgLy8gICAgICAgfSwKICAvLyAgICAgICB7CiAgLy8gICAgICAgICBjb2RlOiAiY3VycmVuY3kiLAogIC8vICAgICAgICAgdmFsdWU6ICJJTlIiLAogIC8vICAgICAgIH0sCiAgLy8gICAgICAgewogIC8vICAgICAgICAgY29kZTogInZhbHVlIiwKICAvLyAgICAgICAgIHZhbHVlOiBgNTBgLAogIC8vICAgICAgIH0sCiAgLy8gICAgIF0sCiAgLy8gICB9KTsKICAvLyB9CgogIHJldHVybiBxdW90ZVRyYWlsVGFnczsKfTsKCmZ1bmN0aW9uIHJlc2V0UXVvdGVQcmljZXMocXVvdGUpIHsKICAvLyBBIGhlbHBlciB0byBjb252ZXJ0IGFueSBwcmljZSB2YWx1ZSBpbnRvIHplcm8gd2l0aCBzYW1lIGRlY2ltYWwgZm9ybWF0CiAgY29uc3QgdG9aZXJvRm9ybWF0dGVkID0gKHZhbHVlKSA9PiB7CiAgICBjb25zdCBkZWNpbWFscyA9IHZhbHVlLmluY2x1ZGVzKCIuIikgPyB2YWx1ZS5zcGxpdCgiLiIpWzFdLmxlbmd0aCA6IDA7CiAgICByZXR1cm4gKDApLnRvRml4ZWQoZGVjaW1hbHMpOwogIH07CgogIHJldHVybiB7CiAgICAuLi5xdW90ZSwKICAgIGJyZWFrdXA6IHF1b3RlLmJyZWFrdXAubWFwKChpdGVtKSA9PiAoewogICAgICAuLi5pdGVtLAogICAgICBwcmljZTogewogICAgICAgIC4uLml0ZW0ucHJpY2UsCiAgICAgICAgdmFsdWU6IHRvWmVyb0Zvcm1hdHRlZChpdGVtLnByaWNlLnZhbHVlKQogICAgICB9CiAgICB9KSksCiAgICBwcmljZTogewogICAgICAuLi5xdW90ZS5wcmljZSwKICAgICAgdmFsdWU6IHRvWmVyb0Zvcm1hdHRlZChxdW90ZS5wcmljZS52YWx1ZSkKICAgIH0KICB9Owp9CgpmdW5jdGlvbiBtZXJnZUZ1bGZpbGxtZW50VGFncygKICBleGlzdGluZ1RhZ3MgPSBbXSwKICBuZXdUYWdzID0gW10KKSB7CiAgY29uc3QgbWVyZ2VkID0gW107CgogIC8vIFBpY2sgTEFTVCBvY2N1cnJlbmNlIGZyb20gbmV3VGFncyAoYXV0aG9yaXRhdGl2ZSkKICBjb25zdCBuZXdMaW5rZWRPcmRlciA9IFsuLi5uZXdUYWdzXQogICAgLnJldmVyc2UoKQogICAgLmZpbmQodCA9PiB0LmNvZGUgPT09ICJsaW5rZWRfb3JkZXIiKTsKCiAgY29uc3QgbmV3TGlua2VkUHJvdmlkZXIgPSBbLi4ubmV3VGFnc10KICAgIC5yZXZlcnNlKCkKICAgIC5maW5kKHQgPT4gdC5jb2RlID09PSAibGlua2VkX3Byb3ZpZGVyIik7CgogIGxldCBsaW5rZWRPcmRlckFkZGVkID0gZmFsc2U7CiAgbGV0IGxpbmtlZFByb3ZpZGVyQWRkZWQgPSBmYWxzZTsKCiAgLy8gMe+4j+KDoyBQcm9jZXNzIGV4aXN0aW5nIHRhZ3MKICBmb3IgKGNvbnN0IHRhZyBvZiBleGlzdGluZ1RhZ3MpIHsKICAgIGlmICh0YWcuY29kZSA9PT0gImxpbmtlZF9vcmRlciIpIHsKICAgICAgaWYgKCFsaW5rZWRPcmRlckFkZGVkKSB7CiAgICAgICAgbWVyZ2VkLnB1c2gobmV3TGlua2VkT3JkZXIgPz8gdGFnKTsKICAgICAgICBsaW5rZWRPcmRlckFkZGVkID0gdHJ1ZTsKICAgICAgfQogICAgICBjb250aW51ZTsKICAgIH0KCiAgICBpZiAodGFnLmNvZGUgPT09ICJsaW5rZWRfcHJvdmlkZXIiKSB7CiAgICAgIGlmICghbGlua2VkUHJvdmlkZXJBZGRlZCkgewogICAgICAgIG1lcmdlZC5wdXNoKG5ld0xpbmtlZFByb3ZpZGVyID8/IHRhZyk7CiAgICAgICAgbGlua2VkUHJvdmlkZXJBZGRlZCA9IHRydWU7CiAgICAgIH0KICAgICAgY29udGludWU7CiAgICB9CgogICAgbWVyZ2VkLnB1c2godGFnKTsKICB9CgogIC8vIDLvuI/ig6MgQWRkIG1pc3Npbmcgc2luZ2xldG9uIHRhZ3MKICBpZiAobmV3TGlua2VkT3JkZXIgJiYgIWxpbmtlZE9yZGVyQWRkZWQpIHsKICAgIG1lcmdlZC5wdXNoKG5ld0xpbmtlZE9yZGVyKTsKICB9CgogIGlmIChuZXdMaW5rZWRQcm92aWRlciAmJiAhbGlua2VkUHJvdmlkZXJBZGRlZCkgewogICAgbWVyZ2VkLnB1c2gobmV3TGlua2VkUHJvdmlkZXIpOwogIH0KCiAgLy8gM++4j+KDoyBBZGQgTk9OLXNpbmdsZXRvbiBuZXcgdGFncyAoZGVkdXAtc2FmZSkKICBmb3IgKGNvbnN0IHRhZyBvZiBuZXdUYWdzKSB7CiAgICBpZiAoCiAgICAgIHRhZy5jb2RlICE9PSAibGlua2VkX29yZGVyIiAmJgogICAgICB0YWcuY29kZSAhPT0gImxpbmtlZF9wcm92aWRlciIKICAgICkgewogICAgICBtZXJnZWQucHVzaCh0YWcpOwogICAgfQogIH0KCiAgcmV0dXJuIG1lcmdlZDsKfQoKY29uc3QgZ2V0UGF5bWVudFN0YXR1cyA9IChwYXltZW50VHlwZSwgb3JkZXJTdGF0ZSkgPT4gewogIGlmIChwYXltZW50VHlwZSA9PT0gIk9OLUZVTEZJTExNRU5UIiAmJiBvcmRlclN0YXRlID09PSAiQ29tcGxldGVkIikgewogICAgcmV0dXJuICJQQUlEIjsKICB9CgogIGlmIChwYXltZW50VHlwZSA9PT0gIk9OLU9SREVSIikgewogICAgcmV0dXJuICJQQUlEIjsKICB9CgogIGlmIChwYXltZW50VHlwZSA9PT0gIlBPU1QtRlVMRklMTE1FTlQiKSB7CiAgICByZXR1cm4gIk5PVC1QQUlEIjsKICB9CgogIHJldHVybiAiTk9ULVBBSUQiOwp9Owo=
